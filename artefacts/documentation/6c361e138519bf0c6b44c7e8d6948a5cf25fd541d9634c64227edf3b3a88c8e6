TODO: this logic can't depend on layout if we are recycling!