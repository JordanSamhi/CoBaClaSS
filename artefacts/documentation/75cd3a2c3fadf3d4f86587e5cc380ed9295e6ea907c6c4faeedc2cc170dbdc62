 Returns true if state has changed, false if nothing changed