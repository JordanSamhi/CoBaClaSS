 Update the state of the shelf. 