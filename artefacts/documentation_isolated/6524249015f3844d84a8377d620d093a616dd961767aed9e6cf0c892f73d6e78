 The settings provider must hold its lock when calling here.