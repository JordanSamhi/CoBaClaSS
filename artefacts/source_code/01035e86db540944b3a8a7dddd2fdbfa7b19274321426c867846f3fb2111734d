public String getWifiOverlayApkPkgName(){
    if (mWifiOverlayApkPkgName != null) {
        return mWifiOverlayApkPkgName;
    }
    List<ResolveInfo> resolveInfos = getPackageManager().queryIntentActivities(new Intent(ACTION_RESOURCES_APK), PackageManager.MATCH_SYSTEM_ONLY);
    resolveInfos.removeIf(info -> !Environment.isAppInWifiApex(info.activityInfo.applicationInfo));
    if (resolveInfos.isEmpty()) {
        Log.e(TAG, "Attempted to fetch resources before Wifi Resources APK is loaded!", new IllegalStateException());
        return null;
    }
    if (resolveInfos.size() > 1) {
        Log.w(TAG, "Found > 1 APK that can resolve Wifi Resources APK intent: " + resolveInfos.stream().map(info -> info.activityInfo.applicationInfo.packageName).collect(Collectors.joining(", ")));
    }
    ResolveInfo info = resolveInfos.get(0);
    mWifiOverlayApkPkgName = info.activityInfo.applicationInfo.packageName;
    Log.i(TAG, "Found Wifi Resources APK at: " + mWifiOverlayApkPkgName);
    return mWifiOverlayApkPkgName;
}