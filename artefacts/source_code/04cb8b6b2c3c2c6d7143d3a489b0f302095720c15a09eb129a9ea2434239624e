public void updateBackgroundForGroupState(){
    if (mIsSummaryWithChildren) {
        mShowNoBackground = !mShowGroupBackgroundWhenExpanded && isGroupExpanded() && !isGroupExpansionChanging() && !isUserLocked();
        mChildrenContainer.updateHeaderForExpansion(mShowNoBackground);
        List<ExpandableNotificationRow> children = mChildrenContainer.getAttachedChildren();
        for (int i = 0; i < children.size(); i++) {
            children.get(i).updateBackgroundForGroupState();
        }
    } else if (isChildInGroup()) {
        final int childColor = getShowingLayout().getBackgroundColorForExpansionState();
        final boolean showBackground = isGroupExpanded() || ((mNotificationParent.isGroupExpansionChanging() || mNotificationParent.isUserLocked()) && childColor != 0);
        mShowNoBackground = !showBackground;
    } else {
        mShowNoBackground = false;
    }
    updateOutline();
    updateBackground();
}