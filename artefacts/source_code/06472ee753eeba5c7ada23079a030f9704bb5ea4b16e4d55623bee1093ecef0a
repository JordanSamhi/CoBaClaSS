public void addOnShowModeChangedListener(@NonNull OnShowModeChangedListener listener, @Nullable Handler handler){
    synchronized (mLock) {
        if (mListeners == null) {
            mListeners = new ArrayMap<>();
        }
        final boolean shouldEnableCallback = mListeners.isEmpty();
        mListeners.put(listener, handler);
        if (shouldEnableCallback) {
            setSoftKeyboardCallbackEnabled(true);
        }
    }
}