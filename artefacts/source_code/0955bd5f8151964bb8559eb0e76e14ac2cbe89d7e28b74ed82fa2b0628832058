public long getAvailableRestoreToken(String packageName){
    mContext.enforceCallingOrSelfPermission(android.Manifest.permission.BACKUP, "getAvailableRestoreToken");
    long token = mAncestralToken;
    synchronized (mQueueLock) {
        if (mCurrentToken != 0 && mProcessedPackagesJournal.hasBeenProcessed(packageName)) {
            if (MORE_DEBUG) {
                Slog.i(TAG, addUserIdToLogMessage(mUserId, "App in ever-stored, so using current token"));
            }
            token = mCurrentToken;
        }
    }
    if (MORE_DEBUG) {
        Slog.i(TAG, addUserIdToLogMessage(mUserId, "getAvailableRestoreToken() == " + token));
    }
    return token;
}