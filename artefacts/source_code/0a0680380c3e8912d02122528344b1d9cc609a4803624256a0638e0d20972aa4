public int setButtonVisibility(@IdRes int buttonResId, boolean visible){
    final int index = getContextButtonIndex(buttonResId);
    if (index == INVALID_INDEX) {
        throw new RuntimeException("Cannot find the button id of " + buttonResId + " in context group");
    }
    setVisibility(View.INVISIBLE);
    mButtonData.get(index).markedVisible = visible;
    boolean alreadyFoundVisibleButton = false;
    int i = mButtonData.size() - 1;
    for (; i >= 0; --i) {
        final ButtonData buttonData = mButtonData.get(i);
        if (!alreadyFoundVisibleButton && buttonData.markedVisible) {
            buttonData.setVisibility(View.VISIBLE);
            setVisibility(View.VISIBLE);
            alreadyFoundVisibleButton = true;
        } else {
            buttonData.setVisibility(View.INVISIBLE);
        }
    }
    return mButtonData.get(index).button.getVisibility();
}