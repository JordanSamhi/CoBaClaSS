public void save(WifiConfiguration config, @Nullable IBinder binder, @Nullable IActionListener callback, int callbackIdentifier, int callingUid){
    mWifiInjector.getWifiThreadRunner().post(() -> {
        if (callback != null && binder != null) {
            mProcessingActionListeners.add(binder, callback, callbackIdentifier);
        }
        if (config == null) {
            loge("saveNetwork with null configuration my state " + getCurrentState().getName());
            sendActionListenerFailure(callbackIdentifier, WifiManager.ERROR);
            return;
        }
        NetworkUpdateResult result = mWifiConfigManager.addOrUpdateNetwork(config, callingUid);
        if (!result.isSuccess()) {
            loge("saveNetwork adding/updating config=" + config + " failed");
            sendActionListenerFailure(callbackIdentifier, WifiManager.ERROR);
            return;
        }
        if (!mWifiConfigManager.enableNetwork(result.getNetworkId(), false, callingUid, null)) {
            loge("saveNetwork enabling config=" + config + " failed");
            sendActionListenerFailure(callbackIdentifier, WifiManager.ERROR);
            return;
        }
        broadcastWifiCredentialChanged(WifiManager.WIFI_CREDENTIAL_SAVED, config);
        Message message = obtainMessage(CMD_SAVE_NETWORK, -1, callbackIdentifier, result);
        message.sendingUid = callingUid;
        sendMessage(message);
    });
}