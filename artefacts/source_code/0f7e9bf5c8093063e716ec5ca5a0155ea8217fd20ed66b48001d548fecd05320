public void setUidActiveLocked(int uid, boolean active){
    final boolean changed = (active != mForegroundUids.get(uid));
    if (!changed) {
        return;
    }
    if (DEBUG) {
        Slog.d(TAG, "uid " + uid + " going " + (active ? "active" : "inactive"));
    }
    mForegroundUids.put(uid, active);
    mDeviceIdleUpdateFunctor.mChanged = false;
    mService.getJobStore().forEachJobForSourceUid(uid, mDeviceIdleUpdateFunctor);
    if (mDeviceIdleUpdateFunctor.mChanged) {
        mStateChangedListener.onControllerStateChanged();
    }
}