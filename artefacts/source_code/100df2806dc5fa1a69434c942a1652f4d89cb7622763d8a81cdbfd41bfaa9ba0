public void terminate(){
    synchronized (mLock) {
        final long waitForDeathCookie = new Random().nextLong();
        final CountDownLatch waitForDeathLatch = new CountDownLatch(1);
        linkToHostapdDeath((cookie) -> {
            Log.d(TAG, "IHostapd died: cookie=" + cookie);
            if (cookie != waitForDeathCookie)
                return;
            waitForDeathLatch.countDown();
        }, waitForDeathCookie);
        final String methodStr = "terminate";
        if (!checkHostapdAndLogFailure(methodStr))
            return;
        try {
            mIHostapd.terminate();
        } catch (RemoteException e) {
            handleRemoteException(e, methodStr);
        }
        try {
            if (!waitForDeathLatch.await(WAIT_FOR_DEATH_TIMEOUT_MS, TimeUnit.MILLISECONDS)) {
                Log.w(TAG, "Timed out waiting for confirmation of hostapd death");
            }
        } catch (InterruptedException e) {
            Log.w(TAG, "Failed to wait for hostapd death");
        }
    }
}