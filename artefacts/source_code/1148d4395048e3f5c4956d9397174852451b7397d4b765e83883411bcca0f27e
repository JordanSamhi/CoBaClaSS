public static KeyPair genKeyPair() throws NoSuchAlgorithmException{
    KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(EC_ALG);
    try {
        keyPairGenerator.initialize(new ECGenParameterSpec(EC_P256_OPENSSL_NAME));
        return keyPairGenerator.generateKeyPair();
    } catch (InvalidAlgorithmParameterException ex) {
    }
    try {
        keyPairGenerator.initialize(new ECGenParameterSpec(EC_P256_COMMON_NAME));
        return keyPairGenerator.generateKeyPair();
    } catch (InvalidAlgorithmParameterException ex) {
        throw new NoSuchAlgorithmException("Unable to find the NIST P-256 curve", ex);
    }
}