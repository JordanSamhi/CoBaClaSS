public static int throwOnError(int errorFlag) throws BufferQueueAbandonedException{
    if (errorFlag == NO_ERROR) {
        return NO_ERROR;
    } else if (errorFlag == BAD_VALUE) {
        throw new BufferQueueAbandonedException();
    }
    if (errorFlag < 0) {
        throw new UnsupportedOperationException("Unknown error " + errorFlag);
    }
    return errorFlag;
}