public SparseArray<List<AccessibilityWindowInfo>> getWindowsOnAllDisplays(int connectionId){
    try {
        IAccessibilityServiceConnection connection = getConnection(connectionId);
        if (connection != null) {
            SparseArray<List<AccessibilityWindowInfo>> windows = sAccessibilityCache.getWindowsOnAllDisplays();
            if (windows != null) {
                if (DEBUG) {
                    Log.i(LOG_TAG, "Windows cache hit");
                }
                return windows;
            }
            if (DEBUG) {
                Log.i(LOG_TAG, "Windows cache miss");
            }
            final long identityToken = Binder.clearCallingIdentity();
            try {
                windows = connection.getWindows();
            } finally {
                Binder.restoreCallingIdentity(identityToken);
            }
            if (windows != null) {
                sAccessibilityCache.setWindowsOnAllDisplays(windows);
                return windows;
            }
        } else {
            if (DEBUG) {
                Log.w(LOG_TAG, "No connection for connection id: " + connectionId);
            }
        }
    } catch (RemoteException re) {
        Log.e(LOG_TAG, "Error while calling remote getWindowsOnAllDisplays", re);
    }
    final SparseArray<List<AccessibilityWindowInfo>> emptyWindows = new SparseArray<>();
    return emptyWindows;
}