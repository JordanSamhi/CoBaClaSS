public void onCharacteristicWriteRequest(String address, int transId, int offset, int length, boolean isPrep, boolean needRsp, int handle, byte[] value){
    if (VDBG)
        Log.d(TAG, "onCharacteristicWriteRequest() - handle=" + handle);
    BluetoothDevice device = mAdapter.getRemoteDevice(address);
    BluetoothGattCharacteristic characteristic = getCharacteristicByHandle(handle);
    if (characteristic == null) {
        Log.w(TAG, "onCharacteristicWriteRequest() no char for handle " + handle);
        return;
    }
    try {
        mCallback.onCharacteristicWriteRequest(device, transId, characteristic, isPrep, needRsp, offset, value);
    } catch (Exception ex) {
        Log.w(TAG, "Unhandled exception in callback", ex);
    }
}