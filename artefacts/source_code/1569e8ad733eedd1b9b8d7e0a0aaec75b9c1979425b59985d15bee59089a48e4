public void collectNoteOpCallsForValidation(String stackTrace, int op, String packageName, long version){
    if (!AppOpsManager.NOTE_OP_COLLECTION_ENABLED) {
        return;
    }
    Objects.requireNonNull(stackTrace);
    Preconditions.checkArgument(op >= 0);
    Preconditions.checkArgument(op < AppOpsManager._NUM_OP);
    Objects.requireNonNull(version);
    NoteOpTrace noteOpTrace = new NoteOpTrace(stackTrace, op, packageName, version);
    boolean noteOpSetWasChanged;
    synchronized (this) {
        noteOpSetWasChanged = mNoteOpCallerStacktraces.add(noteOpTrace);
        if (noteOpSetWasChanged && !mWriteNoteOpsScheduled) {
            mWriteNoteOpsScheduled = true;
            mHandler.postDelayed(PooledLambda.obtainRunnable((that) -> {
                AsyncTask.execute(() -> {
                    that.writeNoteOps();
                });
            }, this), 2500);
        }
    }
}