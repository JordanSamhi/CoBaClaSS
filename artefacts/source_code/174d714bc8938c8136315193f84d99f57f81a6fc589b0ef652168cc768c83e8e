public void recordAttachSession(int uid, boolean usesIdentityCallback, SparseArray<WifiAwareClientState> clients){
    int currentConcurrentCount = 0;
    for (int i = 0; i < clients.size(); ++i) {
        if (clients.valueAt(i).getUid() == uid) {
            ++currentConcurrentCount;
        }
    }
    synchronized (mLock) {
        AttachData data = mAttachDataByUid.get(uid);
        if (data == null) {
            data = new AttachData();
            mAttachDataByUid.put(uid, data);
        }
        data.mUsesIdentityCallback |= usesIdentityCallback;
        data.mMaxConcurrentAttaches = Math.max(data.mMaxConcurrentAttaches, currentConcurrentCount);
        recordAttachStatus(NanStatusType.SUCCESS);
    }
}