public static AppSnippet getAppSnippet(Activity pContext, ApplicationInfo appInfo, File sourceFile){
    final String archiveFilePath = sourceFile.getAbsolutePath();
    Resources pRes = pContext.getResources();
    AssetManager assmgr = new AssetManager();
    assmgr.addAssetPath(archiveFilePath);
    Resources res = new Resources(assmgr, pRes.getDisplayMetrics(), pRes.getConfiguration());
    CharSequence label = null;
    if (appInfo.labelRes != 0) {
        try {
            label = res.getText(appInfo.labelRes);
        } catch (Resources.NotFoundException e) {
        }
    }
    if (label == null) {
        label = (appInfo.nonLocalizedLabel != null) ? appInfo.nonLocalizedLabel : appInfo.packageName;
    }
    Drawable icon = null;
    try {
        if (appInfo.icon != 0) {
            try {
                icon = res.getDrawable(appInfo.icon);
            } catch (Resources.NotFoundException e) {
            }
        }
        if (icon == null) {
            icon = pContext.getPackageManager().getDefaultActivityIcon();
        }
    } catch (OutOfMemoryError e) {
        Log.i(LOG_TAG, "Could not load app icon", e);
    }
    return new PackageUtil.AppSnippet(label, icon);
}