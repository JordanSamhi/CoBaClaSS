public static boolean isDowngradePermitted(int installFlags, boolean isAppDebuggable){
    final boolean downgradeRequested = (installFlags & PackageManager.INSTALL_REQUEST_DOWNGRADE) != 0;
    if (!downgradeRequested) {
        return false;
    }
    final boolean isDebuggable = Build.IS_DEBUGGABLE || isAppDebuggable;
    if (isDebuggable) {
        return true;
    }
    return (installFlags & PackageManager.INSTALL_ALLOW_DOWNGRADE) != 0;
}