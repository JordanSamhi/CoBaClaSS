public void maybeDeferBroadcast(String tag, long time){
    synchronized (mLock) {
        final Intent intent = mDeferredMap.get(tag);
        if (intent == null) {
            mDeferredMap.put(tag, createIntent(tag, time));
            sendMessageDelayed(obtainMessage(MSG_SEND_DEFERRED_BROADCAST, tag), mLowPriorityRateLimitPeriod);
        } else {
            intent.putExtra(DropBoxManager.EXTRA_TIME, time);
            final int dropped = intent.getIntExtra(DropBoxManager.EXTRA_DROPPED_COUNT, 0);
            intent.putExtra(DropBoxManager.EXTRA_DROPPED_COUNT, dropped + 1);
            return;
        }
    }
}