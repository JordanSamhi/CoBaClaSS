public void injectSmsPdu(byte[] pdu, @SmsMessage.Format String format, PendingIntent receivedIntent){
    if (!format.equals(SmsMessage.FORMAT_3GPP) && !format.equals(SmsMessage.FORMAT_3GPP2)) {
        throw new IllegalArgumentException("Invalid pdu format. format must be either 3gpp or 3gpp2");
    }
    try {
        ISms iSms = TelephonyManager.getSmsService();
        if (iSms != null) {
            iSms.injectSmsPduForSubscriber(getSubscriptionId(), pdu, format, receivedIntent);
        }
    } catch (RemoteException ex) {
        try {
            if (receivedIntent != null) {
                receivedIntent.send(RESULT_REMOTE_EXCEPTION);
            }
        } catch (PendingIntent.CanceledException cx) {
        }
    }
}