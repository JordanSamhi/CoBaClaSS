public int getDataNetworkType(){
    final NetworkRegistrationInfo iwlanRegInfo = getNetworkRegistrationInfo(NetworkRegistrationInfo.DOMAIN_PS, AccessNetworkConstants.TRANSPORT_TYPE_WLAN);
    final NetworkRegistrationInfo wwanRegInfo = getNetworkRegistrationInfo(NetworkRegistrationInfo.DOMAIN_PS, AccessNetworkConstants.TRANSPORT_TYPE_WWAN);
    if (iwlanRegInfo == null || !iwlanRegInfo.isInService()) {
        return (wwanRegInfo != null) ? wwanRegInfo.getAccessNetworkTechnology() : TelephonyManager.NETWORK_TYPE_UNKNOWN;
    }
    if (!wwanRegInfo.isInService() || mIsIwlanPreferred) {
        return iwlanRegInfo.getAccessNetworkTechnology();
    }
    return wwanRegInfo.getAccessNetworkTechnology();
}