public void fullTransportBackup(String[] pkgNames){
    mContext.enforceCallingPermission(android.Manifest.permission.BACKUP, "fullTransportBackup");
    final int callingUserHandle = UserHandle.getCallingUserId();
    if (callingUserHandle != UserHandle.USER_SYSTEM) {
        throw new IllegalStateException("Restore supported only for the device owner");
    }
    String transportName = mTransportManager.getCurrentTransportName();
    if (!fullBackupAllowable(transportName)) {
        Slog.i(TAG, addUserIdToLogMessage(mUserId, "Full backup not currently possible -- key/value backup not yet run?"));
    } else {
        if (DEBUG) {
            Slog.d(TAG, addUserIdToLogMessage(mUserId, "fullTransportBackup()"));
        }
        final long oldId = Binder.clearCallingIdentity();
        try {
            CountDownLatch latch = new CountDownLatch(1);
            Runnable task = PerformFullTransportBackupTask.newWithCurrentTransport(this, null, pkgNames, false, null, latch, null, null, false, "BMS.fullTransportBackup()");
            mWakelock.acquire();
            (new Thread(task, "full-transport-master")).start();
            do {
                try {
                    latch.await();
                    break;
                } catch (InterruptedException e) {
                }
            } while (true);
            final long now = System.currentTimeMillis();
            for (String pkg : pkgNames) {
                enqueueFullBackup(pkg, now);
            }
        } finally {
            Binder.restoreCallingIdentity(oldId);
        }
    }
    if (DEBUG) {
        Slog.d(TAG, addUserIdToLogMessage(mUserId, "Done with full transport backup."));
    }
}