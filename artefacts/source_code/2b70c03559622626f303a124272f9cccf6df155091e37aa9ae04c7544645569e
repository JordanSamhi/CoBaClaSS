public Size getSizeForAspectRatio(Size size, float aspectRatio, float minEdgeSize){
    final int smallestSize = Math.min(size.getWidth(), size.getHeight());
    final int minSize = (int) Math.max(minEdgeSize, smallestSize);
    final int width;
    final int height;
    if (aspectRatio <= 1) {
        width = minSize;
        height = Math.round(width / aspectRatio);
    } else {
        height = minSize;
        width = Math.round(height * aspectRatio);
    }
    return new Size(width, height);
}