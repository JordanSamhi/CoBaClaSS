public boolean startSoftAp(WifiConfiguration wifiConfig){
    enforceNetworkStackPermission();
    mLog.info("startSoftAp uid=%").c(Binder.getCallingUid()).flush();
    SoftApConfiguration softApConfig = null;
    if (wifiConfig != null) {
        softApConfig = ApConfigUtil.fromWifiConfiguration(wifiConfig);
        if (softApConfig == null) {
            return false;
        }
    }
    if (!mTetheredSoftApTracker.setEnablingIfAllowed()) {
        mLog.err("Tethering is already active.").flush();
        return false;
    }
    if (!mWifiThreadRunner.call(() -> mActiveModeWarden.canRequestMoreSoftApManagers(), false)) {
        mLohsSoftApTracker.stopAll();
    }
    if (!startSoftApInternal(new SoftApModeConfiguration(WifiManager.IFACE_IP_MODE_TETHERED, softApConfig, mTetheredSoftApTracker.getSoftApCapability()))) {
        mTetheredSoftApTracker.setFailedWhileEnabling();
        return false;
    }
    return true;
}