public void showAsDropDown(View anchor, int xoff, int yoff, int gravity){
    if (isShowing() || !hasContentView()) {
        return;
    }
    TransitionManager.endTransitions(mDecorView);
    attachToAnchor(anchor, xoff, yoff, gravity);
    mIsShowing = true;
    mIsDropdown = true;
    final WindowManager.LayoutParams p = createPopupLayoutParams(anchor.getApplicationWindowToken());
    preparePopup(p);
    final boolean aboveAnchor = findDropDownPosition(anchor, p, xoff, yoff, p.width, p.height, gravity, mAllowScrollingAnchorParent);
    updateAboveAnchor(aboveAnchor);
    p.accessibilityIdOfAnchor = (anchor != null) ? anchor.getAccessibilityViewId() : -1;
    invokePopup(p);
}