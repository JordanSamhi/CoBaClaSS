public Builder writeAttributionChain(@NonNull final int[] uids, @NonNull final String[] tags){
    final byte numUids = (byte) uids.length;
    final byte numTags = (byte) tags.length;
    if (numUids != numTags) {
        mErrorMask |= ERROR_ATTRIBUTION_UIDS_TAGS_SIZES_NOT_EQUAL;
    } else if (numUids > MAX_ATTRIBUTION_NODES) {
        mErrorMask |= ERROR_ATTRIBUTION_CHAIN_TOO_LONG;
    } else {
        writeTypeId(TYPE_ATTRIBUTION_CHAIN);
        mPos += mBuffer.putByte(mPos, numUids);
        for (int i = 0; i < numUids; i++) {
            mPos += mBuffer.putInt(mPos, uids[i]);
            final byte[] tagBytes = stringToBytes(tags[i]);
            mPos += mBuffer.putInt(mPos, tagBytes.length);
            mPos += mBuffer.putByteArray(mPos, tagBytes);
        }
        mNumElements++;
    }
    return this;
}