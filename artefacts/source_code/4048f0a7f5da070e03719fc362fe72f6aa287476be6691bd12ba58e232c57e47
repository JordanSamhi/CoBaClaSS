public int generateScore(){
    if (mFilter.mx == null)
        return WIFI_TRANSITION_SCORE + 1;
    double badRssi = getAdjustedRssiThreshold();
    double horizonSeconds = mScoringParams.getHorizonSeconds();
    Matrix x = new Matrix(mFilter.mx);
    double filteredRssi = x.get(0, 0);
    setDeltaTimeSeconds(horizonSeconds);
    x = mFilter.mF.dot(x);
    double forecastRssi = x.get(0, 0);
    if (forecastRssi > filteredRssi) {
        forecastRssi = filteredRssi;
    }
    int score = (int) (Math.round(forecastRssi) - badRssi) + WIFI_TRANSITION_SCORE;
    return score;
}