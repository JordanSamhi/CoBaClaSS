public void updateWindowAttributes(@NonNull WindowManager.LayoutParams params){
    if (sDebug) {
        Log.d(TAG, "updateWindowAttributes(): window flags=" + params.flags);
    }
    final boolean flagSecureEnabled = (params.flags & WindowManager.LayoutParams.FLAG_SECURE) != 0;
    MainContentCaptureSession mainSession;
    synchronized (mLock) {
        if (flagSecureEnabled) {
            mFlags |= ContentCaptureContext.FLAG_DISABLED_BY_FLAG_SECURE;
        } else {
            mFlags &= ~ContentCaptureContext.FLAG_DISABLED_BY_FLAG_SECURE;
        }
        mainSession = mMainSession;
    }
    if (mainSession != null) {
        mainSession.setDisabled(flagSecureEnabled);
    }
}