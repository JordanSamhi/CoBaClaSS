public ColorStateList getColorStateList(@NonNull Context context, PartnerConfig partnerConfig){
    if (partnerConfig.getResourceType() != PartnerConfig.ResourceType.COLOR) {
        throw new IllegalArgumentException("Not a color resource");
    }
    if (mPartnerResourceCache.containsKey(partnerConfig)) {
        Object cacheValue = mPartnerResourceCache.get(partnerConfig);
        if (cacheValue instanceof ColorStateList) {
            return (ColorStateList) cacheValue;
        }
    }
    ColorStateList result = null;
    try {
        String resourceName = partnerConfig.getResourceName();
        ResourceEntry resourceEntry = getResourceEntryFromKey(resourceName);
        if (resourceEntry == null) {
            Log.w(TAG, "Resource not found: " + resourceName);
            return null;
        }
        Resources resource = getResourcesByPackageName(context, resourceEntry.getPackageName());
        TypedValue outValue = new TypedValue();
        resource.getValue(resourceEntry.getResourceId(), outValue, true);
        if (outValue.type == TypedValue.TYPE_REFERENCE && outValue.data == 0) {
            return result;
        }
        result = resource.getColorStateList(resourceEntry.getResourceId(), null);
        mPartnerResourceCache.put(partnerConfig, result);
    } catch (PackageManager.NameNotFoundException exception) {
        Log.e(TAG, exception.getMessage());
    }
    return result;
}