public WifiConfiguration getConfiguredNetworkWithPassword(int networkId){
    WifiConfiguration config = getInternalConfiguredNetwork(networkId);
    if (config == null) {
        return null;
    }
    return createExternalWifiConfiguration(config, false, Process.WIFI_UID);
}