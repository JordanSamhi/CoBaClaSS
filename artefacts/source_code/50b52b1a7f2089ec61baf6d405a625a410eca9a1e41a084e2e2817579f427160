public MagnetizedObject<StackAnimationController> getMagnetizedStack(MagnetizedObject.MagneticTarget target){
    if (mMagnetizedStack == null) {
        mMagnetizedStack = new MagnetizedObject<StackAnimationController>(mLayout.getContext(), this, new StackPositionProperty(DynamicAnimation.TRANSLATION_X), new StackPositionProperty(DynamicAnimation.TRANSLATION_Y)) {

            @Override
            public float getWidth(@NonNull StackAnimationController underlyingObject) {
                return mBubbleSize;
            }

            @Override
            public float getHeight(@NonNull StackAnimationController underlyingObject) {
                return mBubbleSize;
            }

            @Override
            public void getLocationOnScreen(@NonNull StackAnimationController underlyingObject, @NonNull int[] loc) {
                loc[0] = (int) mStackPosition.x;
                loc[1] = (int) mStackPosition.y;
            }
        };
        mMagnetizedStack.addTarget(target);
        mMagnetizedStack.setHapticsEnabled(true);
        mMagnetizedStack.setFlingToTargetMinVelocity(FLING_TO_DISMISS_MIN_VELOCITY);
    }
    final ContentResolver contentResolver = mLayout.getContext().getContentResolver();
    final float minVelocity = Settings.Secure.getFloat(contentResolver, "bubble_dismiss_fling_min_velocity", mMagnetizedStack.getFlingToTargetMinVelocity());
    final float maxVelocity = Settings.Secure.getFloat(contentResolver, "bubble_dismiss_stick_max_velocity", mMagnetizedStack.getStickToTargetMaxXVelocity());
    final float targetWidth = Settings.Secure.getFloat(contentResolver, "bubble_dismiss_target_width_percent", mMagnetizedStack.getFlingToTargetWidthPercent());
    mMagnetizedStack.setFlingToTargetMinVelocity(minVelocity);
    mMagnetizedStack.setStickToTargetMaxXVelocity(maxVelocity);
    mMagnetizedStack.setFlingToTargetWidthPercent(targetWidth);
    return mMagnetizedStack;
}