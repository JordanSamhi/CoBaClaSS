public void setDataProfile(List<DataProfile> dps, boolean isRoaming, Message onCompleteMessage){
    if (DBG)
        log("setDataProfile");
    if (!mBound) {
        loge("Data service not bound.");
        sendCompleteMessage(onCompleteMessage, DataServiceCallback.RESULT_ERROR_ILLEGAL_STATE);
        return;
    }
    CellularDataServiceCallback callback = new CellularDataServiceCallback("setDataProfile");
    if (onCompleteMessage != null) {
        mMessageMap.put(callback.asBinder(), onCompleteMessage);
    }
    try {
        mIDataService.setDataProfile(mPhone.getPhoneId(), dps, isRoaming, callback);
    } catch (RemoteException e) {
        loge("Cannot invoke setDataProfile on data service.");
        mMessageMap.remove(callback.asBinder());
        sendCompleteMessage(onCompleteMessage, DataServiceCallback.RESULT_ERROR_ILLEGAL_STATE);
    }
}