public List<UsbPort> getPorts(){
    if (mService == null) {
        return Collections.emptyList();
    }
    List<ParcelableUsbPort> parcelablePorts;
    try {
        parcelablePorts = mService.getPorts();
    } catch (RemoteException e) {
        throw e.rethrowFromSystemServer();
    }
    if (parcelablePorts == null) {
        return Collections.emptyList();
    } else {
        int numPorts = parcelablePorts.size();
        ArrayList<UsbPort> ports = new ArrayList<>(numPorts);
        for (int i = 0; i < numPorts; i++) {
            ports.add(parcelablePorts.get(i).getUsbPort(this));
        }
        return ports;
    }
}