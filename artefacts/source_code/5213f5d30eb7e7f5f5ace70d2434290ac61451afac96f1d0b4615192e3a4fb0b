public void registerInputConsumer(boolean withSfVsync){
    if (mInputEventReceiver == null) {
        final InputChannel inputChannel = new InputChannel();
        try {
            mWindowManager.destroyInputConsumer(mName, DEFAULT_DISPLAY);
            mWindowManager.createInputConsumer(mToken, mName, DEFAULT_DISPLAY, inputChannel);
        } catch (RemoteException e) {
            Log.e(TAG, "Failed to create input consumer", e);
        }
        mInputEventReceiver = new InputEventReceiver(inputChannel, Looper.myLooper(), withSfVsync ? Choreographer.getSfInstance() : Choreographer.getInstance());
        if (mRegistrationListener != null) {
            mRegistrationListener.onRegistrationChanged(true);
        }
    }
}