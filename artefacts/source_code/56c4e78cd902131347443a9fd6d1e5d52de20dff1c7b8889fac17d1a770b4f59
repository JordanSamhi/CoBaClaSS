public int diff(Configuration delta, boolean compareUndefined, boolean publicOnly){
    int changed = 0;
    if ((compareUndefined || delta.fontScale > 0) && fontScale != delta.fontScale) {
        changed |= ActivityInfo.CONFIG_FONT_SCALE;
    }
    if ((compareUndefined || delta.mcc != 0) && mcc != delta.mcc) {
        changed |= ActivityInfo.CONFIG_MCC;
    }
    if ((compareUndefined || delta.mnc != 0) && mnc != delta.mnc) {
        changed |= ActivityInfo.CONFIG_MNC;
    }
    fixUpLocaleList();
    delta.fixUpLocaleList();
    if ((compareUndefined || !delta.mLocaleList.isEmpty()) && !mLocaleList.equals(delta.mLocaleList)) {
        changed |= ActivityInfo.CONFIG_LOCALE;
        changed |= ActivityInfo.CONFIG_LAYOUT_DIRECTION;
    }
    final int deltaScreenLayoutDir = delta.screenLayout & SCREENLAYOUT_LAYOUTDIR_MASK;
    if ((compareUndefined || deltaScreenLayoutDir != SCREENLAYOUT_LAYOUTDIR_UNDEFINED) && deltaScreenLayoutDir != (screenLayout & SCREENLAYOUT_LAYOUTDIR_MASK)) {
        changed |= ActivityInfo.CONFIG_LAYOUT_DIRECTION;
    }
    if ((compareUndefined || delta.touchscreen != TOUCHSCREEN_UNDEFINED) && touchscreen != delta.touchscreen) {
        changed |= ActivityInfo.CONFIG_TOUCHSCREEN;
    }
    if ((compareUndefined || delta.keyboard != KEYBOARD_UNDEFINED) && keyboard != delta.keyboard) {
        changed |= ActivityInfo.CONFIG_KEYBOARD;
    }
    if ((compareUndefined || delta.keyboardHidden != KEYBOARDHIDDEN_UNDEFINED) && keyboardHidden != delta.keyboardHidden) {
        changed |= ActivityInfo.CONFIG_KEYBOARD_HIDDEN;
    }
    if ((compareUndefined || delta.hardKeyboardHidden != HARDKEYBOARDHIDDEN_UNDEFINED) && hardKeyboardHidden != delta.hardKeyboardHidden) {
        changed |= ActivityInfo.CONFIG_KEYBOARD_HIDDEN;
    }
    if ((compareUndefined || delta.navigation != NAVIGATION_UNDEFINED) && navigation != delta.navigation) {
        changed |= ActivityInfo.CONFIG_NAVIGATION;
    }
    if ((compareUndefined || delta.navigationHidden != NAVIGATIONHIDDEN_UNDEFINED) && navigationHidden != delta.navigationHidden) {
        changed |= ActivityInfo.CONFIG_KEYBOARD_HIDDEN;
    }
    if ((compareUndefined || delta.orientation != ORIENTATION_UNDEFINED) && orientation != delta.orientation) {
        changed |= ActivityInfo.CONFIG_ORIENTATION;
    }
    if ((compareUndefined || getScreenLayoutNoDirection(delta.screenLayout) != (SCREENLAYOUT_SIZE_UNDEFINED | SCREENLAYOUT_LONG_UNDEFINED)) && getScreenLayoutNoDirection(screenLayout) != getScreenLayoutNoDirection(delta.screenLayout)) {
        changed |= ActivityInfo.CONFIG_SCREEN_LAYOUT;
    }
    if ((compareUndefined || (delta.colorMode & COLOR_MODE_HDR_MASK) != COLOR_MODE_HDR_UNDEFINED) && (colorMode & COLOR_MODE_HDR_MASK) != (delta.colorMode & COLOR_MODE_HDR_MASK)) {
        changed |= ActivityInfo.CONFIG_COLOR_MODE;
    }
    if ((compareUndefined || (delta.colorMode & COLOR_MODE_WIDE_COLOR_GAMUT_MASK) != COLOR_MODE_WIDE_COLOR_GAMUT_UNDEFINED) && (colorMode & COLOR_MODE_WIDE_COLOR_GAMUT_MASK) != (delta.colorMode & COLOR_MODE_WIDE_COLOR_GAMUT_MASK)) {
        changed |= ActivityInfo.CONFIG_COLOR_MODE;
    }
    if ((compareUndefined || delta.uiMode != (UI_MODE_TYPE_UNDEFINED | UI_MODE_NIGHT_UNDEFINED)) && uiMode != delta.uiMode) {
        changed |= ActivityInfo.CONFIG_UI_MODE;
    }
    if ((compareUndefined || delta.screenWidthDp != SCREEN_WIDTH_DP_UNDEFINED) && screenWidthDp != delta.screenWidthDp) {
        changed |= ActivityInfo.CONFIG_SCREEN_SIZE;
    }
    if ((compareUndefined || delta.screenHeightDp != SCREEN_HEIGHT_DP_UNDEFINED) && screenHeightDp != delta.screenHeightDp) {
        changed |= ActivityInfo.CONFIG_SCREEN_SIZE;
    }
    if ((compareUndefined || delta.smallestScreenWidthDp != SMALLEST_SCREEN_WIDTH_DP_UNDEFINED) && smallestScreenWidthDp != delta.smallestScreenWidthDp) {
        changed |= ActivityInfo.CONFIG_SMALLEST_SCREEN_SIZE;
    }
    if ((compareUndefined || delta.densityDpi != DENSITY_DPI_UNDEFINED) && densityDpi != delta.densityDpi) {
        changed |= ActivityInfo.CONFIG_DENSITY;
    }
    if ((compareUndefined || delta.assetsSeq != ASSETS_SEQ_UNDEFINED) && assetsSeq != delta.assetsSeq) {
        changed |= ActivityInfo.CONFIG_ASSETS_PATHS;
    }
    if (!publicOnly && windowConfiguration.diff(delta.windowConfiguration, compareUndefined) != 0) {
        changed |= ActivityInfo.CONFIG_WINDOW_CONFIGURATION;
    }
    return changed;
}