public static List<AccessibilityTarget> getTargets(Context context, @ShortcutType int shortcutType){
    final List<AccessibilityTarget> installedTargets = getInstalledTargets(context, shortcutType);
    final AccessibilityManager am = (AccessibilityManager) context.getSystemService(Context.ACCESSIBILITY_SERVICE);
    final List<String> assignedTargets = am.getAccessibilityShortcutTargets(shortcutType);
    final List<AccessibilityTarget> results = new ArrayList<>();
    for (String assignedTarget : assignedTargets) {
        for (AccessibilityTarget installedTarget : installedTargets) {
            if (!MAGNIFICATION_CONTROLLER_NAME.contentEquals(assignedTarget)) {
                final ComponentName assignedTargetComponentName = ComponentName.unflattenFromString(assignedTarget);
                final ComponentName targetComponentName = ComponentName.unflattenFromString(installedTarget.getId());
                if (assignedTargetComponentName.equals(targetComponentName)) {
                    results.add(installedTarget);
                    continue;
                }
            }
            if (assignedTarget.contentEquals(installedTarget.getId())) {
                results.add(installedTarget);
            }
        }
    }
    return results;
}