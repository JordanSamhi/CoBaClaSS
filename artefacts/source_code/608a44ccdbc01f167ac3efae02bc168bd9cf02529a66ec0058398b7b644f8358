public void setOperationalMode(int mode, String ifaceName){
    if (mVerboseLoggingEnabled) {
        log("setting operational mode to " + String.valueOf(mode) + " for iface: " + ifaceName);
    }
    mModeChange = true;
    if (mode != CONNECT_MODE) {
        transitionTo(mDefaultState);
    } else {
        if (ifaceName != null) {
            mInterfaceName = ifaceName;
            updateInterfaceCapabilities(ifaceName);
            transitionTo(mDisconnectedState);
            mWifiScoreReport.setInterfaceName(ifaceName);
        } else {
            Log.e(TAG, "supposed to enter connect mode, but iface is null -> DefaultState");
            transitionTo(mDefaultState);
        }
    }
    sendMessageAtFrontOfQueue(CMD_SET_OPERATIONAL_MODE);
}