public static int getCarrierIdFromIdentifier(@NonNull Context context, @NonNull CarrierIdentifier carrierIdentifier){
    final String mccmnc = carrierIdentifier.getMcc() + carrierIdentifier.getMnc();
    final String gid1 = carrierIdentifier.getGid1();
    final String gid2 = carrierIdentifier.getGid2();
    final String imsi = carrierIdentifier.getImsi();
    final String spn = carrierIdentifier.getSpn();
    if (VDBG) {
        logd("[getCarrierIdFromIdentifier]" + " mnnmnc:" + mccmnc + " gid1: " + gid1 + " gid2: " + gid2 + " imsi: " + Rlog.pii(LOG_TAG, imsi) + " spn: " + spn);
    }
    CarrierMatchingRule targetRule = new CarrierMatchingRule(mccmnc, imsi, null, gid1, gid2, null, spn, null, null, TelephonyManager.UNKNOWN_CARRIER_ID_LIST_VERSION, null, TelephonyManager.UNKNOWN_CARRIER_ID);
    int carrierId = TelephonyManager.UNKNOWN_CARRIER_ID;
    int maxScore = CarrierMatchingRule.SCORE_INVALID;
    List<CarrierMatchingRule> rules = getCarrierMatchingRulesFromMccMnc(context, targetRule.mccMnc);
    for (CarrierMatchingRule rule : rules) {
        rule.match(targetRule);
        if (rule.mScore > maxScore) {
            maxScore = rule.mScore;
            carrierId = rule.mCid;
        }
    }
    return carrierId;
}