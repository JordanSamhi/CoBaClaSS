public boolean initOffloadConfig(){
    final IOffloadConfig offloadConfig = mDeps.getOffloadConfig();
    if (offloadConfig == null) {
        mLog.e("Could not find IOffloadConfig service");
        return false;
    }
    final NativeHandle h1 = mDeps.createConntrackSocket(NF_NETLINK_CONNTRACK_NEW | NF_NETLINK_CONNTRACK_DESTROY);
    if (h1 == null)
        return false;
    sendNetlinkMessage(h1, (short) ((NFNL_SUBSYS_CTNETLINK << 8) | IPCTNL_MSG_CT_GET), (short) (NLM_F_REQUEST | NLM_F_DUMP));
    final NativeHandle h2 = mDeps.createConntrackSocket(NF_NETLINK_CONNTRACK_UPDATE | NF_NETLINK_CONNTRACK_DESTROY);
    if (h2 == null) {
        closeFdInNativeHandle(h1);
        return false;
    }
    final CbResults results = new CbResults();
    try {
        offloadConfig.setHandles(h1, h2, (boolean success, String errMsg) -> {
            results.mSuccess = success;
            results.mErrMsg = errMsg;
        });
    } catch (RemoteException e) {
        record("initOffloadConfig, setHandles fail", e);
        return false;
    }
    closeFdInNativeHandle(h1);
    closeFdInNativeHandle(h2);
    record("initOffloadConfig, setHandles results:", results);
    return results.mSuccess;
}