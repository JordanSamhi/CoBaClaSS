public static File buildPath(File base, String... segments){
    File cur = base;
    for (String segment : segments) {
        if (cur == null) {
            cur = new File(segment);
        } else {
            cur = new File(cur, segment);
        }
    }
    return cur;
}