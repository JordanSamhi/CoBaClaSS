public void refreshActiveSlots(Set<Integer> activeSlots) throws RuntimeException{
    if (mSlotMap == null) {
        mActiveSlots = new HashSet<Integer>(activeSlots);
        return;
    }
    final HashSet<Integer> slotsToDelete = new HashSet<Integer>();
    for (Map.Entry<Integer, String> entry : mSlotMap.entrySet()) {
        if (entry.getValue().equals(getMode())) {
            slotsToDelete.add(entry.getKey());
        }
    }
    for (Integer slot : slotsToDelete) {
        mSlotMap.remove(slot);
    }
    for (Integer slot : activeSlots) {
        mSlotMap.put(slot, getMode());
    }
    saveSlotMap();
}