public boolean isDeviceOwner(int uid, @Nullable String packageName){
    if (packageName == null) {
        Log.e(TAG, "isDeviceOwner: packageName is null, returning false");
        return false;
    }
    DevicePolicyManager devicePolicyManager = retrieveDevicePolicyManagerFromContext(mContext);
    if (devicePolicyManager == null)
        return false;
    long ident = Binder.clearCallingIdentity();
    UserHandle deviceOwnerUser = null;
    ComponentName deviceOwnerComponent = null;
    try {
        deviceOwnerUser = devicePolicyManager.getDeviceOwnerUser();
        deviceOwnerComponent = devicePolicyManager.getDeviceOwnerComponentOnAnyUser();
    } finally {
        Binder.restoreCallingIdentity(ident);
    }
    if (deviceOwnerUser == null || deviceOwnerComponent == null)
        return false;
    return deviceOwnerUser.equals(UserHandle.getUserHandleForUid(uid)) && deviceOwnerComponent.getPackageName().equals(packageName);
}