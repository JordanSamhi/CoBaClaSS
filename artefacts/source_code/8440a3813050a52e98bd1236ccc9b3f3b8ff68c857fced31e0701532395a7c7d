public static boolean isExternalStorageLegacy(@NonNull File path){
    final Context context = AppGlobals.getInitialApplication();
    final int uid = context.getApplicationInfo().uid;
    if (Process.isIsolated(uid)) {
        return false;
    }
    final PackageManager packageManager = context.getPackageManager();
    if (packageManager.isInstantApp()) {
        return false;
    }
    boolean defaultScopedStorage = Compatibility.isChangeEnabled(DEFAULT_SCOPED_STORAGE);
    boolean forceEnableScopedStorage = Compatibility.isChangeEnabled(FORCE_ENABLE_SCOPED_STORAGE);
    if (isScopedStorageEnforced(defaultScopedStorage, forceEnableScopedStorage)) {
        return false;
    }
    if (isScopedStorageDisabled(defaultScopedStorage, forceEnableScopedStorage)) {
        return true;
    }
    final AppOpsManager appOps = context.getSystemService(AppOpsManager.class);
    return appOps.checkOpNoThrow(AppOpsManager.OP_LEGACY_STORAGE, uid, context.getOpPackageName()) == AppOpsManager.MODE_ALLOWED;
}