public void testBackupManifest_withoutApkOrSignatures_writesCorrectData() throws Exception{
    PackageInfo packageInfo = createPackageInfo(TEST_PACKAGE, TEST_PACKAGE_INSTALLER, TEST_PACKAGE_VERSION_CODE);
    File manifestFile = createFile(BACKUP_MANIFEST_FILENAME);
    mBackupWriter.backupManifest(packageInfo, manifestFile, mFilesDir, false);
    byte[] manifestBytes = getWrittenBytes(mBackupDataOutputFile, false);
    String[] manifest = new String(manifestBytes, StandardCharsets.UTF_8).split("\n");
    assertThat(manifest.length).isEqualTo(7);
    assertThat(manifest[0]).isEqualTo(Integer.toString(BACKUP_MANIFEST_VERSION));
    assertThat(manifest[1]).isEqualTo(TEST_PACKAGE);
    assertThat(manifest[2]).isEqualTo(Long.toString(TEST_PACKAGE_VERSION_CODE));
    assertThat(manifest[3]).isEqualTo(Integer.toString(Build.VERSION.SDK_INT));
    assertThat(manifest[4]).isEqualTo(TEST_PACKAGE_INSTALLER);
    assertThat(manifest[5]).isEqualTo("0");
    assertThat(manifest[6]).isEqualTo("0");
    manifestFile.delete();
}