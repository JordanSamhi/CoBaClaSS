public void onLoaderUpdated(@NonNull ResourcesLoader loader){
    synchronized (ResourcesManager.this) {
        final ArrayMap<ResourcesImpl, ResourcesKey> updatedResourceImplKeys = new ArrayMap<>();
        for (int i = mResourceImpls.size() - 1; i >= 0; i--) {
            final ResourcesKey key = mResourceImpls.keyAt(i);
            final WeakReference<ResourcesImpl> impl = mResourceImpls.valueAt(i);
            if (impl == null || impl.get() == null || !ArrayUtils.contains(key.mLoaders, loader)) {
                continue;
            }
            mResourceImpls.remove(key);
            updatedResourceImplKeys.put(impl.get(), key);
        }
        redirectResourcesToNewImplLocked(updatedResourceImplKeys);
    }
}