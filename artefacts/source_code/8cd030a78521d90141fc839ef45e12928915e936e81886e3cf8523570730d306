public boolean deviceIsEncrypted(){
    try {
        return mStorageManager.getEncryptionState() != StorageManager.ENCRYPTION_STATE_NONE && mStorageManager.getPasswordType() != StorageManager.CRYPT_TYPE_DEFAULT;
    } catch (Exception e) {
        Slog.e(TAG, addUserIdToLogMessage(mUserId, "Unable to communicate with storagemanager service: " + e.getMessage()));
        return true;
    }
}