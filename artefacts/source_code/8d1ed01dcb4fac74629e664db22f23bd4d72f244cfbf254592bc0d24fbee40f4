public synchronized List<IpConnectivityEvent> listAsProtos(){
    List<IpConnectivityEvent> list = new ArrayList<>();
    for (int i = 0; i < mNetworkMetrics.size(); i++) {
        list.add(IpConnectivityEventBuilder.toProto(mNetworkMetrics.valueAt(i).connectMetrics));
    }
    for (int i = 0; i < mNetworkMetrics.size(); i++) {
        list.add(IpConnectivityEventBuilder.toProto(mNetworkMetrics.valueAt(i).dnsMetrics));
    }
    for (int i = 0; i < mWakeupStats.size(); i++) {
        list.add(IpConnectivityEventBuilder.toProto(mWakeupStats.valueAt(i)));
    }
    return list;
}