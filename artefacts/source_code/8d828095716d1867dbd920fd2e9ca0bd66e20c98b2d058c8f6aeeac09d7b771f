public int getActiveDataSubscriptionId(){
    final long token = Binder.clearCallingIdentity();
    try {
        PhoneSwitcher phoneSwitcher = PhoneSwitcher.getInstance();
        if (phoneSwitcher != null) {
            int activeDataSubId = phoneSwitcher.getActiveDataSubId();
            if (SubscriptionManager.isUsableSubscriptionId(activeDataSubId)) {
                return activeDataSubId;
            }
        }
        return getDefaultDataSubId();
    } finally {
        Binder.restoreCallingIdentity(token);
    }
}