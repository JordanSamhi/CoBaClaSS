public static HidlMemory byteArrayToHidlMemory(@NonNull byte[] input, @Nullable String name){
    Preconditions.checkNotNull(input);
    if (input.length == 0) {
        return new HidlMemory("ashmem", 0, null);
    }
    try {
        SharedMemory shmem = SharedMemory.create(name != null ? name : "", input.length);
        ByteBuffer buffer = shmem.mapReadWrite();
        buffer.put(input);
        shmem.unmap(buffer);
        return sharedMemoryToHidlMemory(shmem);
    } catch (ErrnoException e) {
        throw new RuntimeException(e);
    }
}