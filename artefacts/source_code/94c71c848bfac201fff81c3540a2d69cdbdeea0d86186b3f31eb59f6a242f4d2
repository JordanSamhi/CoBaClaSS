public boolean isAppForeground(Context context, int uid){
    ActivityManager activityManager = getActivityManager(context);
    if (activityManager == null)
        return false;
    return activityManager.getUidImportance(uid) <= IMPORTANCE_VISIBLE;
}