public void broadcastForEachCookie(Consumer<C> action){
    int itemCount = beginBroadcast();
    try {
        for (int i = 0; i < itemCount; i++) {
            action.accept((C) getBroadcastCookie(i));
        }
    } finally {
        finishBroadcast();
    }
}