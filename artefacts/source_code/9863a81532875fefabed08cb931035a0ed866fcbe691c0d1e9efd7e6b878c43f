public void setVtSetting(boolean enabled){
    if (enabled && !isVtProvisionedOnDevice()) {
        log("setVtSetting: Not possible to enable Vt due to provisioning.");
        return;
    }
    int subId = getSubId();
    if (isSubIdValid(subId)) {
        SubscriptionManager.setSubscriptionProperty(subId, SubscriptionManager.VT_IMS_ENABLED, booleanToPropertyString(enabled));
    } else {
        loge("setVtSetting: sub id invalid, skip modifying vt state in subinfo db; subId=" + subId);
    }
    try {
        changeMmTelCapability(MmTelFeature.MmTelCapabilities.CAPABILITY_TYPE_VIDEO, ImsRegistrationImplBase.REGISTRATION_TECH_LTE, enabled);
        if (enabled) {
            log("setVtSetting(b) : turnOnIms");
            turnOnIms();
        } else if (isTurnOffImsAllowedByPlatform() && (!isVolteEnabledByPlatform() || !isEnhanced4gLteModeSettingEnabledByUser())) {
            log("setVtSetting(b) : imsServiceAllowTurnOff -> turnOffIms");
            turnOffIms();
        }
    } catch (ImsException e) {
        loge("setVtSetting(b): ", e);
    }
}