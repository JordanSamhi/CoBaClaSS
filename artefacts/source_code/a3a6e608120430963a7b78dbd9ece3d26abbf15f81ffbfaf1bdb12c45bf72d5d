public static Drawable buildAdvancedDrawable(Context context, Drawable drawable){
    final int iconSize = context.getResources().getDimensionPixelSize(R.dimen.advanced_icon_size);
    final Resources resources = context.getResources();
    Bitmap bitmap = null;
    if (drawable instanceof BitmapDrawable) {
        bitmap = ((BitmapDrawable) drawable).getBitmap();
    } else {
        final int width = drawable.getIntrinsicWidth();
        final int height = drawable.getIntrinsicHeight();
        bitmap = createBitmap(drawable, width > 0 ? width : 1, height > 0 ? height : 1);
    }
    if (bitmap != null) {
        final Bitmap resizedBitmap = Bitmap.createScaledBitmap(bitmap, iconSize, iconSize, false);
        bitmap.recycle();
        return new AdaptiveOutlineDrawable(resources, resizedBitmap, TYPE_ADVANCED);
    }
    return drawable;
}