public static void writeBitWiseFlagsToProtoEnum(ProtoOutputStream proto, long fieldId, int flags, int[] origEnums, int[] protoEnums){
    if (protoEnums.length != origEnums.length) {
        throw new IllegalArgumentException("The length of origEnums must match protoEnums");
    }
    int len = origEnums.length;
    for (int i = 0; i < len; i++) {
        if (origEnums[i] == 0 && flags == 0) {
            proto.write(fieldId, protoEnums[i]);
            return;
        }
        if ((flags & origEnums[i]) != 0) {
            proto.write(fieldId, protoEnums[i]);
        }
    }
}