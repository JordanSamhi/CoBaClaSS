public static Drawable getUserIcon(Context context, UserManager um, UserInfo user){
    final int iconSize = UserIconDrawable.getSizeForList(context);
    if (user.isManagedProfile()) {
        Drawable drawable = UserIconDrawable.getManagedUserDrawable(context);
        drawable.setBounds(0, 0, iconSize, iconSize);
        return drawable;
    }
    if (user.iconPath != null) {
        Bitmap icon = um.getUserIcon(user.id);
        if (icon != null) {
            return new UserIconDrawable(iconSize).setIcon(icon).bake();
        }
    }
    return new UserIconDrawable(iconSize).setIconDrawable(UserIcons.getDefaultUserIcon(context.getResources(), user.id, false)).bake();
}