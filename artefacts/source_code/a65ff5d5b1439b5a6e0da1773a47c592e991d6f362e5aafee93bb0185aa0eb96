public void onSessionLost(@NonNull Network network){
    if (!isActiveNetwork(network)) {
        Log.d(TAG, "onSessionLost() called for obsolete network " + network);
        return;
    }
    mActiveNetwork = null;
    Log.d(TAG, "Resetting state for network: " + network);
    synchronized (Vpn.this) {
        mInterface = null;
        mConfig.interfaze = null;
        if (mConfig != null && mConfig.routes != null) {
            final List<RouteInfo> oldRoutes = new ArrayList<>(mConfig.routes);
            mConfig.routes.clear();
            for (final RouteInfo route : oldRoutes) {
                mConfig.routes.add(new RouteInfo(route.getDestination(), RTN_UNREACHABLE));
            }
            if (mNetworkAgent != null) {
                mNetworkAgent.sendLinkProperties(makeLinkProperties());
            }
        }
    }
    resetIkeState();
}