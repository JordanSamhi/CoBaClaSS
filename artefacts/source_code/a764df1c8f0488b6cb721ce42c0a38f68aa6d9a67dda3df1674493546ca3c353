public static Bitmap createBitmap(@Nullable DisplayMetrics display, int width, int height, @NonNull Config config, boolean hasAlpha, @NonNull ColorSpace colorSpace){
    if (width <= 0 || height <= 0) {
        throw new IllegalArgumentException("width and height must be > 0");
    }
    if (config == Config.HARDWARE) {
        throw new IllegalArgumentException("can't create mutable bitmap with Config.HARDWARE");
    }
    if (colorSpace == null && config != Config.ALPHA_8) {
        throw new IllegalArgumentException("can't create bitmap without a color space");
    }
    Bitmap bm = nativeCreate(null, 0, width, width, height, config.nativeInt, true, colorSpace == null ? 0 : colorSpace.getNativeInstance());
    if (display != null) {
        bm.mDensity = display.densityDpi;
    }
    bm.setHasAlpha(hasAlpha);
    if ((config == Config.ARGB_8888 || config == Config.RGBA_F16) && !hasAlpha) {
        nativeErase(bm.mNativePtr, 0xff000000);
    }
    return bm;
}