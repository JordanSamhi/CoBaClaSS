public Intent createConfirmFactoryResetCredentialIntent(CharSequence title, CharSequence description, CharSequence alternateButtonLabel){
    if (!LockPatternUtils.frpCredentialEnabled(mContext)) {
        Log.w(TAG, "Factory reset credentials not supported.");
        throw new UnsupportedOperationException("not supported on this device");
    }
    if (Settings.Global.getInt(mContext.getContentResolver(), Settings.Global.DEVICE_PROVISIONED, 0) != 0) {
        Log.e(TAG, "Factory reset credential cannot be verified after provisioning.");
        throw new IllegalStateException("must not be provisioned yet");
    }
    try {
        IPersistentDataBlockService pdb = IPersistentDataBlockService.Stub.asInterface(ServiceManager.getService(Context.PERSISTENT_DATA_BLOCK_SERVICE));
        if (pdb == null) {
            Log.e(TAG, "No persistent data block service");
            throw new UnsupportedOperationException("not supported on this device");
        }
        if (!pdb.hasFrpCredentialHandle()) {
            Log.i(TAG, "The persistent data block does not have a factory reset credential.");
            return null;
        }
    } catch (RemoteException e) {
        throw e.rethrowFromSystemServer();
    }
    Intent intent = new Intent(ACTION_CONFIRM_FRP_CREDENTIAL);
    intent.putExtra(EXTRA_TITLE, title);
    intent.putExtra(EXTRA_DESCRIPTION, description);
    intent.putExtra(EXTRA_ALTERNATE_BUTTON_LABEL, alternateButtonLabel);
    intent.setPackage(getSettingsPackageForIntent(intent));
    return intent;
}