public static Bundle hardwareBitmapToBundle(Bitmap bitmap){
    if (bitmap.getConfig() != Bitmap.Config.HARDWARE) {
        throw new IllegalArgumentException("Passed bitmap must have hardware config, found: " + bitmap.getConfig());
    }
    ParcelableColorSpace colorSpace = bitmap.getColorSpace() == null ? new ParcelableColorSpace(ColorSpace.get(ColorSpace.Named.SRGB)) : new ParcelableColorSpace(bitmap.getColorSpace());
    Bundle bundle = new Bundle();
    bundle.putParcelable(KEY_BUFFER, bitmap.getHardwareBuffer());
    bundle.putParcelable(KEY_COLOR_SPACE, colorSpace);
    return bundle;
}