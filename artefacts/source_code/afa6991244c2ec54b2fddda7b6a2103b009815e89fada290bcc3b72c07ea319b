public boolean handleApplicationWtf(final IBinder app, final String tag, boolean system, final ApplicationErrorReport.ParcelableCrashInfo crashInfo, int immediateCallerPid){
    final int callingUid = Binder.getCallingUid();
    final int callingPid = Binder.getCallingPid();
    if (system || (immediateCallerPid == Process.myPid())) {
        mHandler.post(new Runnable() {

            @Override
            public void run() {
                handleApplicationWtfInner(callingUid, callingPid, app, tag, crashInfo);
            }
        });
        return false;
    }
    final ProcessRecord r = handleApplicationWtfInner(callingUid, callingPid, app, tag, crashInfo);
    final boolean isFatal = Build.IS_ENG || Settings.Global.getInt(mContext.getContentResolver(), Settings.Global.WTF_IS_FATAL, 0) != 0;
    final boolean isSystem = (r == null) || r.isPersistent();
    if (isFatal && !isSystem) {
        mAppErrors.crashApplication(r, crashInfo);
        return true;
    } else {
        return false;
    }
}