public Event withNewData(@Nullable Object object){
    byte[] payload = encodeObject(object);
    if (payload.length > 65535 - TAG_LENGTH) {
        throw new IllegalArgumentException("Payload too long");
    }
    int headerLength = getHeaderSize();
    byte[] newBytes = new byte[headerLength + TAG_LENGTH + payload.length];
    System.arraycopy(mBuffer.array(), 0, newBytes, 0, headerLength + TAG_LENGTH);
    System.arraycopy(payload, 0, newBytes, headerLength + TAG_LENGTH, payload.length);
    Event result = new Event(newBytes);
    result.mBuffer.putShort(LENGTH_OFFSET, (short) (payload.length + TAG_LENGTH));
    return result;
}