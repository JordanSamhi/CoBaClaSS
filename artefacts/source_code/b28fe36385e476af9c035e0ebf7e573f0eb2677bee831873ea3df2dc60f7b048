public static SparseArray<String> getProcessCmdlines(){
    int[] pids = new int[1024];
    pids = Process.getPids("/proc", pids);
    SparseArray<String> cmdlines = new SparseArray<>(pids.length);
    for (int pid : pids) {
        if (pid < 0) {
            break;
        }
        String cmdline = readCmdlineFromProcfs(pid);
        if (cmdline.isEmpty()) {
            continue;
        }
        cmdlines.append(pid, cmdline);
    }
    return cmdlines;
}