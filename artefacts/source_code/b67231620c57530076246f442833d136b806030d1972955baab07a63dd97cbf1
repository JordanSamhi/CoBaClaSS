public int checkUriPermission(Uri uri, int pid, int uid, final int modeFlags, int userId, IBinder callerToken){
    enforceNotIsolatedCaller("checkUriPermission");
    Identity tlsIdentity = sCallerIdentity.get();
    if (tlsIdentity != null && tlsIdentity.token == callerToken) {
        uid = tlsIdentity.uid;
        pid = tlsIdentity.pid;
    }
    if (pid == MY_PID) {
        return PackageManager.PERMISSION_GRANTED;
    }
    return mUgmInternal.checkUriPermission(new GrantUri(userId, uri, modeFlags), uid, modeFlags) ? PackageManager.PERMISSION_GRANTED : PackageManager.PERMISSION_DENIED;
}