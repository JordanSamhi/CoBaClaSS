public void testRequestBackup_whenAppNotEligibleForBackup() throws Exception{
    mShadowContext.grantPermissions(android.Manifest.permission.BACKUP);
    registerPackages(PACKAGE_1);
    setUpCurrentTransport(mTransportManager, mTransport);
    UserBackupManagerService backupManagerService = createUserBackupManagerServiceAndRunTasks();
    backupManagerService.setEnabled(true);
    backupManagerService.setSetupComplete(true);
    int result = backupManagerService.requestBackup(new String[] { PACKAGE_1 }, mObserver, 0);
    assertThat(result).isEqualTo(BackupManager.SUCCESS);
    verify(mObserver).onResult(PACKAGE_1, BackupManager.ERROR_BACKUP_NOT_ALLOWED);
    tearDownForRequestBackup();
}