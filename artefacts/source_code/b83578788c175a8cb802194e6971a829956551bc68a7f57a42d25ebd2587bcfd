public void start(HandlerThread handlerThread, WifiAwareStateManager awareStateManager, WifiAwareShellCommand awareShellCommand, WifiAwareMetrics awareMetrics, WifiPermissionsUtil wifiPermissionsUtil, WifiPermissionsWrapper permissionsWrapper, WifiSettingsConfigStore settingsConfigStore, WifiAwareNativeManager wifiAwareNativeManager, WifiAwareNativeApi wifiAwareNativeApi, WifiAwareNativeCallback wifiAwareNativeCallback, NetdWrapper netdWrapper){
    Log.i(TAG, "Starting Wi-Fi Aware service");
    mWifiPermissionsUtil = wifiPermissionsUtil;
    mStateManager = awareStateManager;
    mShellCommand = awareShellCommand;
    mHandler = new Handler(handlerThread.getLooper());
    mHandler.post(() -> {
        mStateManager.start(mContext, handlerThread.getLooper(), awareMetrics, wifiPermissionsUtil, permissionsWrapper, new Clock(), netdWrapper);
        settingsConfigStore.registerChangeListener(WIFI_VERBOSE_LOGGING_ENABLED, (key, newValue) -> enableVerboseLogging(newValue, awareStateManager, wifiAwareNativeManager, wifiAwareNativeApi, wifiAwareNativeCallback), mHandler);
        enableVerboseLogging(settingsConfigStore.get(WIFI_VERBOSE_LOGGING_ENABLED), awareStateManager, wifiAwareNativeManager, wifiAwareNativeApi, wifiAwareNativeCallback);
    });
}