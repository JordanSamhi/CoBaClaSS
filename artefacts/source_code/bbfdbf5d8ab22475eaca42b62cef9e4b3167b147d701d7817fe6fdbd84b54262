public boolean supportsFreeformMultiWindow(Context context){
    final boolean freeformDevOption = Settings.Global.getInt(context.getContentResolver(), Settings.Global.DEVELOPMENT_ENABLE_FREEFORM_WINDOWS_SUPPORT, 0) != 0;
    return ActivityTaskManager.supportsMultiWindow(context) && (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_FREEFORM_WINDOW_MANAGEMENT) || freeformDevOption);
}