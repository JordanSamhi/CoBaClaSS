public void systemReady(boolean safeMode, boolean onlyCore){
    synchronized (mSyncRoot) {
        mSafeMode = safeMode;
        mOnlyCore = onlyCore;
        mSystemReady = true;
        recordTopInsetLocked(mLogicalDisplays.get(Display.DEFAULT_DISPLAY));
        updateSettingsLocked();
    }
    mDisplayModeDirector.setDesiredDisplayModeSpecsListener(new DesiredDisplayModeSpecsObserver());
    mDisplayModeDirector.start(mSensorManager);
    mHandler.sendEmptyMessage(MSG_REGISTER_ADDITIONAL_DISPLAY_ADAPTERS);
    mSettingsObserver = new SettingsObserver();
}