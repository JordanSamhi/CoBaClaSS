public boolean prepareStorageDirs(int userId, Set<String> packageList, String processName){
    synchronized (mLock) {
        if (!mFuseMountedUser.contains(userId)) {
            Slog.w(TAG, "User " + userId + " is not unlocked yet so skip mounting obb");
            return false;
        }
    }
    try {
        final IVold vold = IVold.Stub.asInterface(ServiceManager.getServiceOrThrow("vold"));
        for (String pkg : packageList) {
            final String packageObbDir = String.format("/storage/emulated/%d/Android/obb/%s/", userId, pkg);
            final String packageDataDir = String.format("/storage/emulated/%d/Android/data/%s/", userId, pkg);
            int appUid = UserHandle.getUid(userId, mPmInternal.getPackage(pkg).getUid());
            File file = new File(packageObbDir);
            if (!file.exists()) {
                vold.setupAppDir(packageObbDir, appUid);
            }
            file = new File(packageDataDir);
            if (!file.exists()) {
                vold.setupAppDir(packageDataDir, appUid);
            }
        }
    } catch (ServiceManager.ServiceNotFoundException | RemoteException e) {
        Slog.e(TAG, "Unable to create obb and data directories for " + processName, e);
        return false;
    }
    return true;
}