public LocationProvider getProvider(@NonNull String provider){
    Preconditions.checkArgument(provider != null, "invalid null provider");
    if (!Compatibility.isChangeEnabled(GET_PROVIDER_SECURITY_EXCEPTIONS)) {
        if (NETWORK_PROVIDER.equals(provider) || FUSED_PROVIDER.equals(provider)) {
            try {
                mContext.enforcePermission(ACCESS_FINE_LOCATION, Process.myPid(), Process.myUid(), null);
            } catch (SecurityException e) {
                mContext.enforcePermission(ACCESS_COARSE_LOCATION, Process.myPid(), Process.myUid(), null);
            }
        } else {
            mContext.enforcePermission(ACCESS_FINE_LOCATION, Process.myPid(), Process.myUid(), null);
        }
    }
    try {
        ProviderProperties properties = mService.getProviderProperties(provider);
        if (properties == null) {
            return null;
        }
        return new LocationProvider(provider, properties);
    } catch (RemoteException e) {
        throw e.rethrowFromSystemServer();
    }
}