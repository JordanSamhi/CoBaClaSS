public boolean requestAssistScreenshot(final IAssistDataReceiver receiver){
    if (!checkCallingPermission(READ_FRAME_BUFFER, "requestAssistScreenshot()")) {
        throw new SecurityException("Requires READ_FRAME_BUFFER permission");
    }
    final Bitmap bm;
    synchronized (mGlobalLock) {
        final DisplayContent displayContent = mRoot.getDisplayContent(DEFAULT_DISPLAY);
        if (displayContent == null) {
            if (DEBUG_SCREENSHOT) {
                Slog.i(TAG_WM, "Screenshot returning null. No Display for displayId=" + DEFAULT_DISPLAY);
            }
            bm = null;
        } else {
            bm = displayContent.screenshotDisplayLocked(Bitmap.Config.ARGB_8888);
        }
    }
    FgThread.getHandler().post(() -> {
        try {
            receiver.onHandleAssistScreenshot(bm);
        } catch (RemoteException e) {
        }
    });
    return true;
}