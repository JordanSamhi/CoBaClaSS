public MessageSamplingConfig reportRuntimeAppOpAccessMessageAndGetConfig(String packageName, SyncNotedAppOp notedAppOp, String message){
    int uid = Binder.getCallingUid();
    Objects.requireNonNull(packageName);
    synchronized (this) {
        switchPackageIfBootTimeOrRarelyUsedLocked(packageName);
        if (!packageName.equals(mSampledPackage)) {
            return new MessageSamplingConfig(OP_NONE, 0, Instant.now().plus(1, ChronoUnit.HOURS).toEpochMilli());
        }
        Objects.requireNonNull(notedAppOp);
        Objects.requireNonNull(message);
        reportRuntimeAppOpAccessMessageInternalLocked(uid, packageName, AppOpsManager.strOpToOp(notedAppOp.getOp()), notedAppOp.getAttributionTag(), message);
        return new MessageSamplingConfig(mSampledAppOpCode, mAcceptableLeftDistance, Instant.now().plus(1, ChronoUnit.HOURS).toEpochMilli());
    }
}