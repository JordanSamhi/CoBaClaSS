public static UsbDescriptor allocDescriptor(UsbDescriptorParser parser, ByteStream stream, int length, byte type){
    byte subtype = stream.getByte();
    UsbInterfaceDescriptor interfaceDesc = parser.getCurInterface();
    if (UsbDescriptorParser.DEBUG) {
        Log.d(TAG, "  Video Class-specific Interface subtype: " + subtype);
    }
    switch(subtype) {
        case VCI_UNDEFINED:
            if (UsbDescriptorParser.DEBUG) {
                Log.d(TAG, " ---> VCI_UNDEFINED");
            }
            break;
        case VCI_VEADER:
            {
                if (UsbDescriptorParser.DEBUG) {
                    Log.d(TAG, " ---> VCI_VEADER");
                }
                int vcInterfaceSpec = stream.unpackUsbShort();
                parser.setVCInterfaceSpec(vcInterfaceSpec);
                if (UsbDescriptorParser.DEBUG) {
                    Log.d(TAG, "  vcInterfaceSpec:0x" + Integer.toHexString(vcInterfaceSpec));
                }
                return new UsbVCHeader(length, type, subtype, vcInterfaceSpec);
            }
        case VCI_INPUT_TERMINAL:
            if (UsbDescriptorParser.DEBUG) {
                Log.d(TAG, " ---> VCI_INPUT_TERMINAL");
            }
            return new UsbVCInputTerminal(length, type, subtype);
        case VCI_OUTPUT_TERMINAL:
            if (UsbDescriptorParser.DEBUG) {
                Log.d(TAG, " ---> VCI_OUTPUT_TERMINAL");
            }
            return new UsbVCOutputTerminal(length, type, subtype);
        case VCI_SELECTOR_UNIT:
            if (UsbDescriptorParser.DEBUG) {
                Log.d(TAG, " ---> VCI_SELECTOR_UNIT");
            }
            return new UsbVCSelectorUnit(length, type, subtype);
        case VCI_PROCESSING_UNIT:
            if (UsbDescriptorParser.DEBUG) {
                Log.d(TAG, " ---> VCI_PROCESSING_UNIT");
            }
            return new UsbVCProcessingUnit(length, type, subtype);
        case VCI_EXTENSION_UNIT:
            if (UsbDescriptorParser.DEBUG) {
                Log.d(TAG, " ---> VCI_EXTENSION_UNIT");
            }
            break;
        default:
            Log.w(TAG, "Unknown Video Class Interface subtype: 0x" + Integer.toHexString(subtype));
            return null;
    }
    return null;
}