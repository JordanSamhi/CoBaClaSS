public final Uri canonicalize(@NonNull Uri url){
    Objects.requireNonNull(url, "url");
    try {
        if (mWrapped != null)
            return mWrapped.canonicalize(url);
    } catch (RemoteException e) {
        return null;
    }
    IContentProvider provider = acquireProvider(url);
    if (provider == null) {
        return null;
    }
    try {
        final UriResultListener resultListener = new UriResultListener();
        provider.canonicalizeAsync(mPackageName, mAttributionTag, url, new RemoteCallback(resultListener));
        resultListener.waitForResult(CONTENT_PROVIDER_TIMEOUT_MILLIS);
        if (resultListener.exception != null) {
            throw resultListener.exception;
        }
        return resultListener.result;
    } catch (RemoteException e) {
        return null;
    } finally {
        releaseProvider(provider);
    }
}