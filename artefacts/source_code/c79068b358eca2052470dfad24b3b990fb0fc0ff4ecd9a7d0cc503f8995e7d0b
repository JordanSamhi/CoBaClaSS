public void setCandidatesViewShown(boolean shown){
    updateCandidatesVisibility(shown);
    if (!mShowInputRequested && mDecorViewVisible != shown) {
        if (shown) {
            showWindow(false);
        } else {
            doHideWindow();
        }
    }
}