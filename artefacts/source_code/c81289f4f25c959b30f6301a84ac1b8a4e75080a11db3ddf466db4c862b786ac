public String getNotificationDelegate(String sourcePkg, int sourceUid){
    synchronized (mPackagePreferences) {
        PackagePreferences prefs = getPackagePreferencesLocked(sourcePkg, sourceUid);
        if (prefs == null || prefs.delegate == null) {
            return null;
        }
        if (!prefs.delegate.mUserAllowed || !prefs.delegate.mEnabled) {
            return null;
        }
        return prefs.delegate.mPkg;
    }
}