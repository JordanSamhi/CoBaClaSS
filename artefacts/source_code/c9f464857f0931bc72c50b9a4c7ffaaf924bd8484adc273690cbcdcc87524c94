public WifiPowerStats buildProto(){
    WifiPowerStats m = new WifiPowerStats();
    WifiBatteryStats stats = getStats();
    if (stats != null) {
        m.loggingDurationMs = stats.getLoggingDurationMillis();
        m.energyConsumedMah = stats.getEnergyConsumedMaMillis() / ((double) DateUtils.HOUR_IN_MILLIS);
        m.idleTimeMs = stats.getIdleTimeMillis();
        m.rxTimeMs = stats.getRxTimeMillis();
        m.txTimeMs = stats.getTxTimeMillis();
        m.wifiKernelActiveTimeMs = stats.getKernelActiveTimeMillis();
        m.numPacketsTx = stats.getNumPacketsTx();
        m.numBytesTx = stats.getNumBytesTx();
        m.numPacketsRx = stats.getNumPacketsRx();
        m.numBytesRx = stats.getNumBytesRx();
        m.sleepTimeMs = stats.getSleepTimeMillis();
        m.scanTimeMs = stats.getScanTimeMillis();
        m.monitoredRailEnergyConsumedMah = stats.getMonitoredRailChargeConsumedMaMillis() / ((double) DateUtils.HOUR_IN_MILLIS);
    }
    return m;
}