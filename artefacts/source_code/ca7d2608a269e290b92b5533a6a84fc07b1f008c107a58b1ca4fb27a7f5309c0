public static long checkArgumentInRange(long value, long lower, long upper, String valueName){
    if (value < lower) {
        throw new IllegalArgumentException(String.format("%s is out of range of [%d, %d] (too low)", valueName, lower, upper));
    } else if (value > upper) {
        throw new IllegalArgumentException(String.format("%s is out of range of [%d, %d] (too high)", valueName, lower, upper));
    }
    return value;
}