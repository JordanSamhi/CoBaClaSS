public void setBackgroundColor(Context context, Tile tile){
    final Bundle metaData = tile.getMetaData();
    try {
        if (metaData != null) {
            int bgColor = metaData.getInt(META_DATA_PREFERENCE_ICON_BACKGROUND_ARGB, 0);
            if (bgColor == 0) {
                final int colorRes = metaData.getInt(META_DATA_PREFERENCE_ICON_BACKGROUND_HINT, 0);
                if (colorRes != 0) {
                    bgColor = context.getPackageManager().getResourcesForApplication(tile.getPackageName()).getColor(colorRes, null);
                }
            }
            if (bgColor != 0) {
                setBackgroundColor(bgColor);
                return;
            }
        }
    } catch (PackageManager.NameNotFoundException e) {
        Log.e(TAG, "Failed to set background color for " + tile.getPackageName());
    }
    setBackgroundColor(context.getColor(R.color.homepage_generic_icon_background));
}