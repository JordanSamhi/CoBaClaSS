public int getSimStateForSlotIndex(int slotIndex){
    State simState;
    String err;
    if (slotIndex < 0) {
        simState = IccCardConstants.State.UNKNOWN;
        err = "invalid slotIndex";
    } else {
        Phone phone = null;
        try {
            phone = PhoneFactory.getPhone(slotIndex);
        } catch (IllegalStateException e) {
        }
        if (phone == null) {
            simState = IccCardConstants.State.UNKNOWN;
            err = "phone == null";
        } else {
            IccCard icc = phone.getIccCard();
            if (icc == null) {
                simState = IccCardConstants.State.UNKNOWN;
                err = "icc == null";
            } else {
                simState = icc.getState();
                err = "";
            }
        }
    }
    if (VDBG) {
        logd("getSimStateForSlotIndex: " + err + " simState=" + simState + " ordinal=" + simState.ordinal() + " slotIndex=" + slotIndex);
    }
    return simState.ordinal();
}