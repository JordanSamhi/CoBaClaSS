public DhcpInfo getDhcpInfo(){
    enforceAccessPermission();
    if (mVerboseLoggingEnabled) {
        mLog.info("getDhcpInfo uid=%").c(Binder.getCallingUid()).flush();
    }
    DhcpResultsParcelable dhcpResults = mClientModeImpl.syncGetDhcpResultsParcelable();
    DhcpInfo info = new DhcpInfo();
    if (dhcpResults.baseConfiguration != null) {
        if (dhcpResults.baseConfiguration.getIpAddress() != null && dhcpResults.baseConfiguration.getIpAddress().getAddress() instanceof Inet4Address) {
            info.ipAddress = Inet4AddressUtils.inet4AddressToIntHTL((Inet4Address) dhcpResults.baseConfiguration.getIpAddress().getAddress());
        }
        if (dhcpResults.baseConfiguration.getGateway() != null) {
            info.gateway = Inet4AddressUtils.inet4AddressToIntHTL((Inet4Address) dhcpResults.baseConfiguration.getGateway());
        }
        int dnsFound = 0;
        for (InetAddress dns : dhcpResults.baseConfiguration.getDnsServers()) {
            if (dns instanceof Inet4Address) {
                if (dnsFound == 0) {
                    info.dns1 = Inet4AddressUtils.inet4AddressToIntHTL((Inet4Address) dns);
                } else {
                    info.dns2 = Inet4AddressUtils.inet4AddressToIntHTL((Inet4Address) dns);
                }
                if (++dnsFound > 1)
                    break;
            }
        }
    }
    String serverAddress = dhcpResults.serverAddress;
    if (serverAddress != null) {
        InetAddress serverInetAddress = InetAddresses.parseNumericAddress(serverAddress);
        info.serverAddress = Inet4AddressUtils.inet4AddressToIntHTL((Inet4Address) serverInetAddress);
    }
    info.leaseDuration = dhcpResults.leaseDuration;
    return info;
}