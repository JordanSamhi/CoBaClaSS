public boolean setWifiApConfiguration(WifiConfiguration wifiConfig, String packageName){
    if (enforceChangePermission(packageName) != MODE_ALLOWED) {
        return false;
    }
    int uid = Binder.getCallingUid();
    if (!mWifiPermissionsUtil.checkConfigOverridePermission(uid)) {
        throw new SecurityException("App not allowed to read or update stored WiFi AP config " + "(uid = " + uid + ")");
    }
    mLog.info("setWifiApConfiguration uid=%").c(uid).flush();
    if (wifiConfig == null)
        return false;
    SoftApConfiguration softApConfig = ApConfigUtil.fromWifiConfiguration(wifiConfig);
    if (softApConfig == null)
        return false;
    if (WifiApConfigStore.validateApWifiConfiguration(softApConfig, false)) {
        mWifiThreadRunner.post(() -> mWifiApConfigStore.setApConfiguration(softApConfig));
        return true;
    } else {
        Log.e(TAG, "Invalid WifiConfiguration");
        return false;
    }
}