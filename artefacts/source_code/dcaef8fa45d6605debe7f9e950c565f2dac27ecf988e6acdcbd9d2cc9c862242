public void setVisible(boolean nowVisible, boolean animate){
    if (mIsVisible != nowVisible) {
        mIsVisible = nowVisible;
        if (animate) {
            if (nowVisible) {
                setVisibility(VISIBLE);
                setWillBeGone(false);
                notifyHeightChanged(false);
            } else {
                setWillBeGone(true);
            }
            setContentVisible(nowVisible, true);
        } else {
            setVisibility(nowVisible ? VISIBLE : GONE);
            setContentVisible(nowVisible, false);
            setWillBeGone(false);
            notifyHeightChanged(false);
        }
    }
}