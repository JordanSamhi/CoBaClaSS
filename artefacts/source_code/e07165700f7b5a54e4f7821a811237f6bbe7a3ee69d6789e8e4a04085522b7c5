public boolean isAppPredictionServiceAvailable(){
    if (getPackageManager().getAppPredictionServicePackageName() == null) {
        return false;
    }
    final String appPredictionServiceName = getString(R.string.config_defaultAppPredictionService);
    if (appPredictionServiceName == null) {
        return false;
    }
    final ComponentName appPredictionComponentName = ComponentName.unflattenFromString(appPredictionServiceName);
    if (appPredictionComponentName == null) {
        return false;
    }
    Intent intent = new Intent();
    intent.setComponent(appPredictionComponentName);
    if (getPackageManager().resolveService(intent, PackageManager.MATCH_ALL) == null) {
        Log.e(TAG, "App prediction service is defined, but does not exist: " + appPredictionServiceName);
        return false;
    }
    return true;
}