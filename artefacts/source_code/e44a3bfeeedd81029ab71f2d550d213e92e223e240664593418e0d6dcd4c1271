public synchronized void setState(DctConstants.State s){
    log("setState: " + s + ", previous state:" + mState);
    if (mState != s) {
        mStateLocalLog.log("State changed from " + mState + " to " + s);
        mState = s;
    }
    if (mState == DctConstants.State.FAILED) {
        if (mRetryManager.getWaitingApns() != null) {
            mRetryManager.getWaitingApns().clear();
        }
    }
}