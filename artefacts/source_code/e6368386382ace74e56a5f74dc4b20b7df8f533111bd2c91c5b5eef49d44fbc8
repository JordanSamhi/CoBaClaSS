public static final int getMetaState(final CharSequence text, final KeyEvent event){
    int metaState = event.getMetaState();
    if (event.getKeyCharacterMap().getModifierBehavior() == KeyCharacterMap.MODIFIER_BEHAVIOR_CHORDED_OR_TOGGLED) {
        metaState |= getMetaState(text);
    }
    return metaState;
}