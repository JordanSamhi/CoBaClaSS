public void refreshPinnedFlags(){
    for (int i = mShortcuts.size() - 1; i >= 0; i--) {
        mShortcuts.valueAt(i).clearFlags(ShortcutInfo.FLAG_PINNED);
    }
    mShortcutUser.forAllLaunchers(launcherShortcuts -> {
        final ArraySet<String> pinned = launcherShortcuts.getPinnedShortcutIds(getPackageName(), getPackageUserId());
        if (pinned == null || pinned.size() == 0) {
            return;
        }
        for (int i = pinned.size() - 1; i >= 0; i--) {
            final String id = pinned.valueAt(i);
            final ShortcutInfo si = mShortcuts.get(id);
            if (si == null) {
                continue;
            }
            si.addFlags(ShortcutInfo.FLAG_PINNED);
        }
    });
    removeOrphans();
}