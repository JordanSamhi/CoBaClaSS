public void onEnabledComponentChanged(){
    synchronized (mLock) {
        int currentUser = ActivityManager.getCurrentUser();
        ArraySet<ComponentName> enabledListeners = mComponentObserver.getEnabled(currentUser);
        ArraySet<String> enabledPackages = new ArraySet<>();
        for (ComponentName n : enabledListeners) {
            String pkg = n.getPackageName();
            if (isDefaultAllowed(pkg)) {
                enabledPackages.add(n.getPackageName());
            }
        }
        mNotifAccessManager.update(enabledPackages);
        if (!mVrModeAllowed) {
            return;
        }
        consumeAndApplyPendingStateLocked(false);
        if (mCurrentVrService == null) {
            return;
        }
        updateCurrentVrServiceLocked(mVrModeEnabled, mRunning2dInVr, mCurrentVrService.getComponent(), mCurrentVrService.getUserId(), mVrAppProcessId, mCurrentVrModeComponent);
    }
}