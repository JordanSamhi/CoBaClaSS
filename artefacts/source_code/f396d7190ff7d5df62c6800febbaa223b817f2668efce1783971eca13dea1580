public Object sendSessionCommand(@NonNull Session2Command command, @Nullable Bundle args){
    if (command == null) {
        throw new IllegalArgumentException("command shouldn't be null");
    }
    ResultReceiver resultReceiver = new ResultReceiver(mResultHandler) {

        protected void onReceiveResult(int resultCode, Bundle resultData) {
            synchronized (mLock) {
                mPendingCommands.remove(this);
            }
            mCallbackExecutor.execute(() -> {
                mCallback.onCommandResult(MediaController2.this, this, command, new Session2Command.Result(resultCode, resultData));
            });
        }
    };
    synchronized (mLock) {
        if (mSessionBinder != null) {
            int seq = getNextSeqNumber();
            mPendingCommands.put(resultReceiver, seq);
            try {
                mSessionBinder.sendSessionCommand(mControllerStub, seq, command, args, resultReceiver);
            } catch (RuntimeException e) {
                mPendingCommands.remove(resultReceiver);
                resultReceiver.send(RESULT_ERROR_UNKNOWN_ERROR, null);
            }
        }
    }
    return resultReceiver;
}