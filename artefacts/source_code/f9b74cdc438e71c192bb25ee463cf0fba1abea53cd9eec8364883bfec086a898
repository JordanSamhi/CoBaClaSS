public final int onMotionEvent(MotionEvent event, MotionEvent rawEvent, int policyFlags){
    if (mState == STATE_GESTURE_CANCELED || mState == STATE_GESTURE_COMPLETED) {
        return mState;
    }
    switch(event.getActionMasked()) {
        case MotionEvent.ACTION_DOWN:
            onDown(event, rawEvent, policyFlags);
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            onPointerDown(event, rawEvent, policyFlags);
            break;
        case MotionEvent.ACTION_MOVE:
            onMove(event, rawEvent, policyFlags);
            break;
        case MotionEvent.ACTION_POINTER_UP:
            onPointerUp(event, rawEvent, policyFlags);
            break;
        case MotionEvent.ACTION_UP:
            onUp(event, rawEvent, policyFlags);
            break;
        default:
            setState(STATE_GESTURE_CANCELED, event, rawEvent, policyFlags);
            break;
    }
    return mState;
}