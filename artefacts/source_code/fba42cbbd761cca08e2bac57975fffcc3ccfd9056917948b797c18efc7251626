public void readNetworksFromStream(BufferedReader in){
    try {
        String line;
        while (in.ready()) {
            line = in.readLine();
            if (line != null) {
                if (line.startsWith("network")) {
                    SupplicantNetwork net = SupplicantNetwork.readNetworkFromStream(in);
                    if (net == null) {
                        Log.e(TAG, "Error while parsing the network.");
                        continue;
                    }
                    if (net.isEap || net.certUsed) {
                        Log.d(TAG, "Skipping enterprise network for restore: " + net.mParsedSSIDLine + " / " + net.mParsedKeyMgmtLine);
                        continue;
                    }
                    mNetworks.add(net);
                }
            }
        }
    } catch (IOException e) {
    }
}