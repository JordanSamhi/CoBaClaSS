public WifiConfiguration toWifiConfiguration(){
    WifiConfiguration wifiConfig = new WifiConfiguration();
    wifiConfig.SSID = mSsid;
    wifiConfig.preSharedKey = mPassphrase;
    wifiConfig.hiddenSSID = mHiddenSsid;
    wifiConfig.apChannel = mChannel;
    switch(mSecurityType) {
        case SECURITY_TYPE_OPEN:
            wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
            break;
        case SECURITY_TYPE_WPA2_PSK:
            wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA2_PSK);
            break;
        default:
            Log.e(TAG, "Convert fail, unsupported security type :" + mSecurityType);
            return null;
    }
    switch(mBand) {
        case BAND_2GHZ:
            wifiConfig.apBand = WifiConfiguration.AP_BAND_2GHZ;
            break;
        case BAND_5GHZ:
            wifiConfig.apBand = WifiConfiguration.AP_BAND_5GHZ;
            break;
        case BAND_2GHZ | BAND_5GHZ:
            wifiConfig.apBand = WifiConfiguration.AP_BAND_ANY;
            break;
        case BAND_ANY:
            wifiConfig.apBand = WifiConfiguration.AP_BAND_ANY;
            break;
        default:
            Log.e(TAG, "Convert fail, unsupported band setting :" + mBand);
            return null;
    }
    return wifiConfig;
}