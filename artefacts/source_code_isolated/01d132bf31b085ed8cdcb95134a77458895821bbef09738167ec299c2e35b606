public boolean shouldUseAggressiveRandomization(WifiConfiguration config){
    if (!isMacRandomizationSupported() || config.macRandomizationSetting != WifiConfiguration.RANDOMIZATION_PERSISTENT) {
        return false;
    }
    if (mFrameworkFacade.getIntegerSetting(mContext, ENHANCED_MAC_RANDOMIZATION_FEATURE_FORCE_ENABLE_FLAG, 0) == 1) {
        return true;
    }
    if (config.getIpConfiguration().getIpAssignment() == IpConfiguration.IpAssignment.STATIC) {
        return false;
    }
    if (config.isPasspoint()) {
        return isNetworkOptInForAggressiveRandomization(config.FQDN);
    } else {
        return isNetworkOptInForAggressiveRandomization(config.SSID);
    }
}