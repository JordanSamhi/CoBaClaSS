public boolean createEglSurface(SurfaceHolder surfaceHolder, boolean wcg){
    if (DEBUG) {
        Log.d(TAG, "createEglSurface start");
    }
    if (hasEglDisplay() && surfaceHolder.getSurface().isValid()) {
        int[] attrs = null;
        int wcgCapability = getWcgCapability();
        if (wcg && checkExtensionCapability(KHR_GL_COLOR_SPACE) && wcgCapability > 0) {
            attrs = new int[] { EGL_GL_COLORSPACE_KHR, wcgCapability, EGL_NONE };
        }
        mEglSurface = askCreatingEglWindowSurface(surfaceHolder, attrs, 0);
    } else {
        Log.w(TAG, "Create EglSurface failed: hasEglDisplay=" + hasEglDisplay() + ", has valid surface=" + surfaceHolder.getSurface().isValid());
        return false;
    }
    if (!hasEglSurface()) {
        Log.w(TAG, "createWindowSurface failed: " + GLUtils.getEGLErrorString(eglGetError()));
        return false;
    }
    if (!eglMakeCurrent(mEglDisplay, mEglSurface, mEglSurface, mEglContext)) {
        Log.w(TAG, "eglMakeCurrent failed: " + GLUtils.getEGLErrorString(eglGetError()));
        return false;
    }
    if (DEBUG) {
        Log.d(TAG, "createEglSurface done");
    }
    return true;
}