public URLConnection openConnection(URL url) throws IOException{
    final ConnectivityManager cm = ConnectivityManager.getInstanceOrNull();
    if (cm == null) {
        throw new IOException("No ConnectivityManager yet constructed, please construct one");
    }
    final ProxyInfo proxyInfo = cm.getProxyForNetwork(this);
    final java.net.Proxy proxy;
    if (proxyInfo != null) {
        proxy = proxyInfo.makeProxy();
    } else {
        proxy = java.net.Proxy.NO_PROXY;
    }
    return openConnection(url, proxy);
}