public ArrayList<IdmapInvocation> getImmutableFrameworkOverlayIdmapInvocations(){
    final ArrayList<IdmapInvocation> idmapInvocations = new ArrayList<>();
    final ArrayList<Configuration> sortedConfigs = getSortedOverlays();
    for (int i = 0, n = sortedConfigs.size(); i < n; i++) {
        final Configuration overlay = sortedConfigs.get(i);
        if (overlay.parsedConfig.mutable || !overlay.parsedConfig.enabled || !"android".equals(overlay.parsedConfig.parsedInfo.targetPackageName)) {
            continue;
        }
        final boolean enforceOverlayable = overlay.parsedConfig.parsedInfo.targetSdkVersion >= Build.VERSION_CODES.Q;
        IdmapInvocation invocation = null;
        if (!idmapInvocations.isEmpty()) {
            final IdmapInvocation last = idmapInvocations.get(idmapInvocations.size() - 1);
            if (last.enforceOverlayable == enforceOverlayable && last.policy.equals(overlay.parsedConfig.policy)) {
                invocation = last;
            }
        }
        if (invocation == null) {
            invocation = new IdmapInvocation(enforceOverlayable, overlay.parsedConfig.policy);
            idmapInvocations.add(invocation);
        }
        invocation.overlayPaths.add(overlay.parsedConfig.parsedInfo.path.getAbsolutePath());
    }
    return idmapInvocations;
}