public List<ScanResult> getScanResults(long maxScanAgeMillis) throws IllegalArgumentException{
    if (maxScanAgeMillis > mMaxScanAgeMillis) {
        throw new IllegalArgumentException("maxScanAgeMillis argument cannot be greater than mMaxScanAgeMillis!");
    }
    synchronized (mLock) {
        List<ScanResult> ageFilteredResults = new ArrayList<>();
        for (ScanResult result : mScanResultsByBssid.values()) {
            if (mClock.millis() - result.timestamp / 1000 <= maxScanAgeMillis) {
                ageFilteredResults.add(result);
            }
        }
        return ageFilteredResults;
    }
}