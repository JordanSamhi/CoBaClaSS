public int getCurrentUserId(){
    UserInfo ui;
    try {
        ui = ActivityManager.getService().getCurrentUser();
        return ui != null ? ui.id : 0;
    } catch (RemoteException e) {
        throw e.rethrowFromSystemServer();
    }
}