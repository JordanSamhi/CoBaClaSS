public void sendDataMessage(String destinationAddress, String scAddress, short destinationPort, byte[] data, PendingIntent sentIntent, PendingIntent deliveryIntent){
    if (TextUtils.isEmpty(destinationAddress)) {
        throw new IllegalArgumentException("Invalid destinationAddress");
    }
    if (data == null || data.length == 0) {
        throw new IllegalArgumentException("Invalid message data");
    }
    resolveSubscriptionForOperation(new SubscriptionResolverResult() {

        @Override
        public void onSuccess(int subId) {
            try {
                ISms iSms = getISmsServiceOrThrow();
                iSms.sendDataForSubscriber(subId, null, null, destinationAddress, scAddress, destinationPort & 0xFFFF, data, sentIntent, deliveryIntent);
            } catch (RemoteException e) {
                Log.e(TAG, "sendDataMessage: Couldn't send SMS - Exception: " + e.getMessage());
                notifySmsError(sentIntent, RESULT_REMOTE_EXCEPTION);
            }
        }

        @Override
        public void onFailure() {
            notifySmsError(sentIntent, RESULT_NO_DEFAULT_SMS_APP);
        }
    });
}