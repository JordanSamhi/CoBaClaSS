public int getZygotePid(String abi){
    try {
        synchronized (mLock) {
            ZygoteState state = openZygoteSocketIfNeeded(abi);
            state.mZygoteOutputWriter.write("1");
            state.mZygoteOutputWriter.newLine();
            state.mZygoteOutputWriter.write("--get-pid");
            state.mZygoteOutputWriter.newLine();
            state.mZygoteOutputWriter.flush();
            int numBytes = state.mZygoteInputStream.readInt();
            byte[] bytes = new byte[numBytes];
            state.mZygoteInputStream.readFully(bytes);
            return Integer.parseInt(new String(bytes, StandardCharsets.US_ASCII));
        }
    } catch (Exception ex) {
        throw new RuntimeException("Failure retrieving pid", ex);
    }
}