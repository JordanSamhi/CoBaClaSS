public final int addProgressListener(final DownloadRequest downloadRequest, final IDownloadProgressListener listener) throws RemoteException{
    final int uid = Binder.getCallingUid();
    if (downloadRequest == null) {
        throw new NullPointerException("Download request must not be null");
    }
    if (listener == null) {
        throw new NullPointerException("Callback must not be null");
    }
    DownloadProgressListener exposedCallback = new VendorDownloadProgressListener(listener) {

        @Override
        protected void onRemoteException(RemoteException e) {
            onAppCallbackDied(uid, downloadRequest.getSubscriptionId());
        }
    };
    int result = addProgressListener(downloadRequest, exposedCallback);
    if (result == MbmsErrors.SUCCESS) {
        DeathRecipient deathRecipient = new DeathRecipient() {

            @Override
            public void binderDied() {
                onAppCallbackDied(uid, downloadRequest.getSubscriptionId());
                mDownloadProgressListenerBinderMap.remove(listener.asBinder());
                mDownloadCallbackDeathRecipients.remove(listener.asBinder());
            }
        };
        mDownloadCallbackDeathRecipients.put(listener.asBinder(), deathRecipient);
        listener.asBinder().linkToDeath(deathRecipient, 0);
        mDownloadProgressListenerBinderMap.put(listener.asBinder(), exposedCallback);
    }
    return result;
}