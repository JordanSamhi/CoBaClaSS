public synchronized int read(){
    return (pos < count) ? (buf[pos++] & 0xff) : -1;
}