public Runnable wrap(Runnable r){
    acquire();
    return () -> {
        try {
            r.run();
        } finally {
            release();
        }
    };
}