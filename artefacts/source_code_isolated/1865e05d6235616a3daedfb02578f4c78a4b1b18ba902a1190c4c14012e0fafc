public int getNetworkType(){
    if (networkRequest == null) {
        return NETWORK_TYPE_NONE;
    } else if (networkRequest.networkCapabilities.hasCapability(NET_CAPABILITY_NOT_METERED)) {
        return NETWORK_TYPE_UNMETERED;
    } else if (networkRequest.networkCapabilities.hasCapability(NET_CAPABILITY_NOT_ROAMING)) {
        return NETWORK_TYPE_NOT_ROAMING;
    } else if (networkRequest.networkCapabilities.hasTransport(TRANSPORT_CELLULAR)) {
        return NETWORK_TYPE_CELLULAR;
    } else {
        return NETWORK_TYPE_ANY;
    }
}