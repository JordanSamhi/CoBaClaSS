public HardwareConfig getModemForSim(int simIndex){
    synchronized (mLock) {
        if (mModems.isEmpty() || mSims.isEmpty()) {
            loge("getModemForSim: no registered modem/sim device?!?");
            return null;
        }
        if (simIndex > getSimCount()) {
            loge("getModemForSim: out-of-bounds access for sim device " + simIndex + " max: " + getSimCount());
            return null;
        }
        if (DBG)
            logd("getModemForSim " + simIndex);
        HardwareConfig sim = getSim(simIndex);
        for (HardwareConfig modem : mModems) {
            if (modem.uuid.equals(sim.modemUuid)) {
                return modem;
            }
        }
        return null;
    }
}