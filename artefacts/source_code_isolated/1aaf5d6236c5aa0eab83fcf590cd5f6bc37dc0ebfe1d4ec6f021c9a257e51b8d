public static WifiMetricsProto.WifiAwareLog.NanStatusHistogramBucket[] histogramToProtoArray(SparseIntArray histogram){
    WifiMetricsProto.WifiAwareLog.NanStatusHistogramBucket[] protoArray = new WifiMetricsProto.WifiAwareLog.NanStatusHistogramBucket[histogram.size()];
    for (int i = 0; i < histogram.size(); ++i) {
        protoArray[i] = new WifiMetricsProto.WifiAwareLog.NanStatusHistogramBucket();
        protoArray[i].nanStatusType = histogram.keyAt(i);
        protoArray[i].count = histogram.valueAt(i);
    }
    return protoArray;
}