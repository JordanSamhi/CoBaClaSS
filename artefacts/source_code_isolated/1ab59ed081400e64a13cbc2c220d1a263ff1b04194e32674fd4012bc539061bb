public static GenericBucket[] linearHistogramToGenericBuckets(SparseIntArray histogram, int[] linearHistParams){
    GenericBucket[] protoArray = new GenericBucket[histogram.size()];
    for (int i = 0; i < histogram.size(); ++i) {
        int bucket = histogram.keyAt(i);
        protoArray[i] = new GenericBucket();
        if (bucket == 0) {
            protoArray[i].start = Integer.MIN_VALUE;
            protoArray[i].end = linearHistParams[0];
        } else if (bucket != linearHistParams.length) {
            protoArray[i].start = linearHistParams[bucket - 1];
            protoArray[i].end = linearHistParams[bucket];
        } else {
            protoArray[i].start = linearHistParams[linearHistParams.length - 1];
            protoArray[i].end = Integer.MAX_VALUE;
        }
        protoArray[i].count = histogram.valueAt(i);
    }
    return protoArray;
}