public boolean isPasspointSuggestionSharedWithUser(WifiConfiguration config){
    if (WifiConfiguration.isMetered(config, null) && mWifiCarrierInfoManager.isCarrierNetworkFromNonDefaultDataSim(config)) {
        return false;
    }
    Set<ExtendedWifiNetworkSuggestion> extendedWifiNetworkSuggestions = getNetworkSuggestionsForFqdnMatch(config.FQDN);
    Set<ExtendedWifiNetworkSuggestion> matchedSuggestions = extendedWifiNetworkSuggestions == null ? null : extendedWifiNetworkSuggestions.stream().filter(ewns -> ewns.perAppInfo.uid == config.creatorUid).collect(Collectors.toSet());
    if (matchedSuggestions == null || matchedSuggestions.isEmpty()) {
        Log.e(TAG, "Matched network suggestion is missing for FQDN:" + config.FQDN);
        return false;
    }
    ExtendedWifiNetworkSuggestion suggestion = matchedSuggestions.stream().findAny().get();
    return suggestion.wns.isUserAllowedToManuallyConnect && suggestion.perAppInfo.hasUserApproved;
}