public void setTargetFragment(Fragment fragment, int requestCode){
    final FragmentManager mine = getFragmentManager();
    final FragmentManager theirs = fragment != null ? fragment.getFragmentManager() : null;
    if (mine != null && theirs != null && mine != theirs) {
        throw new IllegalArgumentException("Fragment " + fragment + " must share the same FragmentManager to be set as a target fragment");
    }
    for (Fragment check = fragment; check != null; check = check.getTargetFragment()) {
        if (check == this) {
            throw new IllegalArgumentException("Setting " + fragment + " as the target of " + this + " would create a target cycle");
        }
    }
    mTarget = fragment;
    mTargetRequestCode = requestCode;
}