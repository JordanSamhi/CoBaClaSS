public static EnforcedAdmin checkIfRestrictionEnforced(Context context, String userRestriction, int userId){
    final DevicePolicyManager dpm = (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);
    if (dpm == null) {
        return null;
    }
    final UserManager um = UserManager.get(context);
    final List<UserManager.EnforcingUser> enforcingUsers = um.getUserRestrictionSources(userRestriction, UserHandle.of(userId));
    if (enforcingUsers.isEmpty()) {
        return null;
    } else if (enforcingUsers.size() > 1) {
        return EnforcedAdmin.createDefaultEnforcedAdminWithRestriction(userRestriction);
    }
    final int restrictionSource = enforcingUsers.get(0).getUserRestrictionSource();
    final int adminUserId = enforcingUsers.get(0).getUserHandle().getIdentifier();
    if (restrictionSource == UserManager.RESTRICTION_SOURCE_PROFILE_OWNER) {
        if (adminUserId == userId) {
            return getProfileOwner(context, userRestriction, adminUserId);
        } else {
            final UserInfo parentUser = um.getProfileParent(adminUserId);
            return (parentUser != null && parentUser.id == userId) ? getProfileOwner(context, userRestriction, adminUserId) : EnforcedAdmin.createDefaultEnforcedAdminWithRestriction(userRestriction);
        }
    } else if (restrictionSource == UserManager.RESTRICTION_SOURCE_DEVICE_OWNER) {
        return adminUserId == userId ? getDeviceOwner(context, userRestriction) : EnforcedAdmin.createDefaultEnforcedAdminWithRestriction(userRestriction);
    }
    return null;
}