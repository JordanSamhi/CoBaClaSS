public void onServiceAdded(int status, BluetoothGattService service){
    if (DBG) {
        Log.d(TAG, "onServiceAdded() - handle=" + service.getInstanceId() + " uuid=" + service.getUuid() + " status=" + status);
    }
    if (mPendingService == null) {
        return;
    }
    BluetoothGattService tmp = mPendingService;
    mPendingService = null;
    tmp.setInstanceId(service.getInstanceId());
    List<BluetoothGattCharacteristic> temp_chars = tmp.getCharacteristics();
    List<BluetoothGattCharacteristic> svc_chars = service.getCharacteristics();
    for (int i = 0; i < svc_chars.size(); i++) {
        BluetoothGattCharacteristic temp_char = temp_chars.get(i);
        BluetoothGattCharacteristic svc_char = svc_chars.get(i);
        temp_char.setInstanceId(svc_char.getInstanceId());
        List<BluetoothGattDescriptor> temp_descs = temp_char.getDescriptors();
        List<BluetoothGattDescriptor> svc_descs = svc_char.getDescriptors();
        for (int j = 0; j < svc_descs.size(); j++) {
            temp_descs.get(j).setInstanceId(svc_descs.get(j).getInstanceId());
        }
    }
    mServices.add(tmp);
    try {
        mCallback.onServiceAdded((int) status, tmp);
    } catch (Exception ex) {
        Log.w(TAG, "Unhandled exception in callback", ex);
    }
}