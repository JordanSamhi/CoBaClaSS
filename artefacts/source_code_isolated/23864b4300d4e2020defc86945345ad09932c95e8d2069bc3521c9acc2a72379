public boolean persistStringSet(Set<String> values){
    if (!shouldPersist()) {
        return false;
    }
    if (values.equals(getPersistedStringSet(null))) {
        return true;
    }
    PreferenceDataStore dataStore = getPreferenceDataStore();
    if (dataStore != null) {
        dataStore.putStringSet(mKey, values);
    } else {
        SharedPreferences.Editor editor = mPreferenceManager.getEditor();
        editor.putStringSet(mKey, values);
        tryCommit(editor);
    }
    return true;
}