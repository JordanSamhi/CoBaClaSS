public static SmsManager getSmsManagerForSubscriptionId(int subId){
    synchronized (sLockObject) {
        SmsManager smsManager = sSubInstances.get(subId);
        if (smsManager == null) {
            smsManager = new SmsManager(subId);
            sSubInstances.put(subId, smsManager);
        }
        return smsManager;
    }
}