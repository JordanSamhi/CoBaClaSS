public static void configureSystemServerDexReporter(IPackageManager pm){
    Slog.i(TAG, "Configuring system server dex reporter");
    SystemServerDexLoadReporter reporter = new SystemServerDexLoadReporter(pm);
    BaseDexClassLoader.setReporter(reporter);
    ClassLoader currrentClassLoader = reporter.getClass().getClassLoader();
    if (currrentClassLoader instanceof BaseDexClassLoader) {
        ((BaseDexClassLoader) currrentClassLoader).reportClassLoaderChain();
    } else {
        Slog.wtf(TAG, "System server class loader is not a BaseDexClassLoader. type=" + currrentClassLoader.getClass().getName());
    }
}