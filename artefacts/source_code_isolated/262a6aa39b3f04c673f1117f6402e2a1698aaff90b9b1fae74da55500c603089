public Key keyFromScanDetailAndConfig(ScanDetail scanDetail, WifiConfiguration config){
    if (!validConfigAndScanDetail(config, scanDetail))
        return null;
    ScanResult scanResult = scanDetail.getScanResult();
    MacAddress bssid = MacAddress.fromString(scanResult.BSSID);
    return new Key(ScanResultMatchInfo.fromScanResult(scanResult), bssid, config.networkId);
}