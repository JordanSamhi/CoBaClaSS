public void setPinned(boolean pinned){
    int intrinsicHeight = getIntrinsicHeight();
    boolean wasAboveShelf = isAboveShelf();
    mIsPinned = pinned;
    if (intrinsicHeight != getIntrinsicHeight()) {
        notifyHeightChanged(false);
    }
    if (pinned) {
        setIconAnimationRunning(true);
        mExpandedWhenPinned = false;
    } else if (mExpandedWhenPinned) {
        setUserExpanded(true);
    }
    setChronometerRunning(mLastChronometerRunning);
    if (isAboveShelf() != wasAboveShelf) {
        mAboveShelfChangedListener.onAboveShelfStateChanged(!wasAboveShelf);
    }
}