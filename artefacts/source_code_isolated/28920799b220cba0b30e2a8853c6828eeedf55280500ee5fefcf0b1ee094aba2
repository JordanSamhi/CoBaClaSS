public int detectAbnormalConnectionFailure(String ssid){
    PerNetwork perNetwork = lookupNetwork(ssid);
    NetworkConnectionStats recentStats = perNetwork.getRecentStats();
    int recentCountCode = recentStats.getRecentCountCode();
    if (recentCountCode == CNT_AUTHENTICATION_FAILURE) {
        return detectAbnormalFailureReason(recentStats, CNT_AUTHENTICATION_FAILURE, REASON_AUTH_FAILURE, mDeviceConfigFacade.getAuthFailureHighThrPercent(), mDeviceConfigFacade.getAuthFailureCountMin(), CNT_CONNECTION_ATTEMPT);
    } else if (recentCountCode == CNT_ASSOCIATION_REJECTION) {
        return detectAbnormalFailureReason(recentStats, CNT_ASSOCIATION_REJECTION, REASON_ASSOC_REJECTION, mDeviceConfigFacade.getAssocRejectionHighThrPercent(), mDeviceConfigFacade.getAssocRejectionCountMin(), CNT_CONNECTION_ATTEMPT);
    } else if (recentCountCode == CNT_ASSOCIATION_TIMEOUT) {
        return detectAbnormalFailureReason(recentStats, CNT_ASSOCIATION_TIMEOUT, REASON_ASSOC_TIMEOUT, mDeviceConfigFacade.getAssocTimeoutHighThrPercent(), mDeviceConfigFacade.getAssocTimeoutCountMin(), CNT_CONNECTION_ATTEMPT);
    } else if (recentCountCode == CNT_CONNECTION_FAILURE) {
        return detectAbnormalFailureReason(recentStats, CNT_CONNECTION_FAILURE, REASON_CONNECTION_FAILURE, mDeviceConfigFacade.getConnectionFailureHighThrPercent(), mDeviceConfigFacade.getConnectionFailureCountMin(), CNT_CONNECTION_ATTEMPT);
    } else {
        return REASON_NO_FAILURE;
    }
}