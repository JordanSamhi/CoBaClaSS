public int getNext(int numOfBits) throws IOException{
    int component = 0;
    int count = 0;
    while (count++ < numOfBits) {
        if (mBitsRead % 8 == 0) {
            mCurrentByte = getNextByte();
        }
        int offset = 7 - (int) (mBitsRead % 8);
        component <<= 1;
        component |= (mCurrentByte >>> offset) & 1;
        mBitsRead++;
    }
    return component;
}