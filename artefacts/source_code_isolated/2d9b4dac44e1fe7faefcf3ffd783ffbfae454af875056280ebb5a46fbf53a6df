public void toggleNotificationDelegate(String sourcePkg, int sourceUid, boolean userAllowed){
    boolean changed = false;
    synchronized (mPackagePreferences) {
        PackagePreferences prefs = getPackagePreferencesLocked(sourcePkg, sourceUid);
        if (prefs != null && prefs.delegate != null) {
            prefs.delegate.mUserAllowed = userAllowed;
            changed = true;
        }
    }
    if (changed) {
        updateConfig();
    }
}