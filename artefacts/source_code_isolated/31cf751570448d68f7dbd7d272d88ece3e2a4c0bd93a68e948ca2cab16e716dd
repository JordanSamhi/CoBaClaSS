public static Bitmap createHardwareBitmap(int width, int height, Consumer<Canvas> consumer){
    final Picture picture = new Picture();
    final Canvas canvas = picture.beginRecording(width, height);
    consumer.accept(canvas);
    picture.endRecording();
    return Bitmap.createBitmap(picture);
}