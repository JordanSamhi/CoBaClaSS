public static void sendSmsCbReceivedBroadcast(@NonNull Context context, @Nullable UserHandle user, @NonNull SmsCbMessage smsCbMessage, @Nullable BroadcastReceiver resultReceiver, @Nullable Handler scheduler, int initialCode, int slotIndex){
    Intent backgroundIntent = new Intent(Telephony.Sms.Intents.SMS_CB_RECEIVED_ACTION);
    backgroundIntent.putExtra(EXTRA_MESSAGE, smsCbMessage);
    putPhoneIdAndSubIdExtra(context, backgroundIntent, slotIndex);
    String receiverPermission = Manifest.permission.RECEIVE_SMS;
    String receiverAppOp = AppOpsManager.OPSTR_RECEIVE_SMS;
    if (user != null) {
        context.createContextAsUser(user, 0).sendOrderedBroadcast(backgroundIntent, receiverPermission, receiverAppOp, resultReceiver, scheduler, initialCode, null, null);
    } else {
        context.sendOrderedBroadcast(backgroundIntent, receiverPermission, receiverAppOp, resultReceiver, scheduler, initialCode, null, null);
    }
}