public InputStream getInputStream() throws IOException{
    if (isClosed())
        throw new SocketException("Socket is closed");
    if (!isConnected())
        throw new SocketException("Socket is not connected");
    if (isInputShutdown())
        throw new SocketException("Socket input is shutdown");
    final Socket s = this;
    InputStream is = null;
    try {
        is = AccessController.doPrivileged(new PrivilegedExceptionAction<InputStream>() {

            public InputStream run() throws IOException {
                return impl.getInputStream();
            }
        });
    } catch (java.security.PrivilegedActionException e) {
        throw (IOException) e.getException();
    }
    return is;
}