public void attach(Handler handler, ConfigRequest configRequest, AttachCallback attachCallback, IdentityChangedListener identityChangedListener){
    if (VDBG) {
        Log.v(TAG, "attach(): handler=" + handler + ", callback=" + attachCallback + ", configRequest=" + configRequest + ", identityChangedListener=" + identityChangedListener);
    }
    if (attachCallback == null) {
        throw new IllegalArgumentException("Null callback provided");
    }
    synchronized (mLock) {
        Looper looper = (handler == null) ? Looper.getMainLooper() : handler.getLooper();
        try {
            Binder binder = new Binder();
            mService.connect(binder, mContext.getOpPackageName(), mContext.getAttributionTag(), new WifiAwareEventCallbackProxy(this, looper, binder, attachCallback, identityChangedListener), configRequest, identityChangedListener != null);
        } catch (RemoteException e) {
            throw e.rethrowFromSystemServer();
        }
    }
}