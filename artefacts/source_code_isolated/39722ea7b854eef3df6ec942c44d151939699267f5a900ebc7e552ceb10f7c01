public void putUsageStats(int intervalType, IntervalStats stats) throws IOException{
    if (stats == null)
        return;
    synchronized (mLock) {
        if (intervalType < 0 || intervalType >= mIntervalDirs.length) {
            throw new IllegalArgumentException("Bad interval type " + intervalType);
        }
        AtomicFile f = mSortedStatFiles[intervalType].get(stats.beginTime);
        if (f == null) {
            f = new AtomicFile(new File(mIntervalDirs[intervalType], Long.toString(stats.beginTime)));
            mSortedStatFiles[intervalType].put(stats.beginTime, f);
        }
        writeLocked(f, stats);
        stats.lastTimeSaved = f.getLastModifiedTime();
    }
}