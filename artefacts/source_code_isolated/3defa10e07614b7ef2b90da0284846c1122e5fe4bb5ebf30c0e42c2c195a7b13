public void finish() throws IOException{
    if (!def.finished()) {
        def.finish();
        while (!def.finished()) {
            deflate();
        }
    }
}