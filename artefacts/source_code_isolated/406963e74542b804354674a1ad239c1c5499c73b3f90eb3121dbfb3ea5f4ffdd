public int getTokenOrAdd(int packageToken, String packageName, String key){
    if (packageName.equals(key)) {
        return PACKAGE_NAME_INDEX;
    }
    int token = packagesToTokensMap.get(packageName).getOrDefault(key, UNASSIGNED_TOKEN);
    if (token == UNASSIGNED_TOKEN) {
        token = tokensToPackagesMap.get(packageToken).size();
        packagesToTokensMap.get(packageName).put(key, token);
        tokensToPackagesMap.get(packageToken).add(key);
    }
    return token;
}