public synchronized void registerPostedByApp(NotificationRecord notification){
    final long now = SystemClock.elapsedRealtime();
    notification.stats.posttimeElapsedMs = now;
    AggregatedStats[] aggregatedStatsArray = getAggregatedStatsLocked(notification);
    for (AggregatedStats stats : aggregatedStatsArray) {
        stats.numPostedByApp++;
        stats.updateInterarrivalEstimate(now);
        stats.countApiUse(notification);
        stats.numUndecoratedRemoteViews += (notification.hasUndecoratedRemoteView() ? 1 : 0);
    }
    releaseAggregatedStatsLocked(aggregatedStatsArray);
    if (ENABLE_SQLITE_LOG) {
        mSQLiteLog.logPosted(notification);
    }
}