public static int calculateSampleSize(Size currentSize, Size requestedSize){
    int inSampleSize = 1;
    if (currentSize.getHeight() > requestedSize.getHeight() || currentSize.getWidth() > requestedSize.getWidth()) {
        final int halfHeight = currentSize.getHeight() / 2;
        final int halfWidth = currentSize.getWidth() / 2;
        while ((halfHeight / inSampleSize) >= requestedSize.getHeight() && (halfWidth / inSampleSize) >= requestedSize.getWidth()) {
            inSampleSize *= 2;
        }
    }
    return inSampleSize;
}