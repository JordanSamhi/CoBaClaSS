public static Set<T> addAll(@Nullable Set<T> cur, @Nullable Collection<T> val){
    if (isEmpty(val)) {
        return cur != null ? cur : emptySet();
    }
    if (cur == null || cur == emptySet()) {
        cur = new ArraySet<>();
    }
    cur.addAll(val);
    return cur;
}