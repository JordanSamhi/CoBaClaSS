public static RestrictionsSet readRestrictions(@NonNull XmlPullParser parser, @NonNull String outerTag) throws IOException, XmlPullParserException{
    RestrictionsSet restrictionsSet = new RestrictionsSet();
    int userId = 0;
    int type;
    while ((type = parser.next()) != XmlPullParser.END_DOCUMENT) {
        String tag = parser.getName();
        if (type == XmlPullParser.END_TAG && outerTag.equals(tag)) {
            return restrictionsSet;
        } else if (type == XmlPullParser.START_TAG && TAG_RESTRICTIONS_USER.equals(tag)) {
            userId = Integer.parseInt(parser.getAttributeValue(null, USER_ID));
        } else if (type == XmlPullParser.START_TAG && TAG_RESTRICTIONS.equals(tag)) {
            Bundle restrictions = UserRestrictionsUtils.readRestrictions(parser);
            restrictionsSet.updateRestrictions(userId, restrictions);
        }
    }
    throw new XmlPullParserException("restrictions cannot be read as xml is malformed.");
}