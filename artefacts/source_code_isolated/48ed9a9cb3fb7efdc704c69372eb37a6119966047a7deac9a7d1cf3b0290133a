public boolean handleStateEvent(int event){
    final boolean changed;
    synchronized (this) {
        changed = (mPlayerState != event);
        mPlayerState = event;
        if (changed && (event == PLAYER_STATE_RELEASED) && (mIPlayerShell != null)) {
            mIPlayerShell.release();
            mIPlayerShell = null;
        }
    }
    return changed;
}