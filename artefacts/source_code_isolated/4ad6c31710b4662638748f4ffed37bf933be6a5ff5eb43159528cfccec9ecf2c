public void addThermalStatusListener(@NonNull @CallbackExecutor Executor executor, @NonNull OnThermalStatusChangedListener listener){
    Preconditions.checkNotNull(listener, "listener cannot be null");
    Preconditions.checkNotNull(executor, "executor cannot be null");
    Preconditions.checkArgument(!mListenerMap.containsKey(listener), "Listener already registered: " + listener);
    IThermalStatusListener internalListener = new IThermalStatusListener.Stub() {

        @Override
        public void onStatusChange(int status) {
            final long token = Binder.clearCallingIdentity();
            try {
                executor.execute(() -> {
                    listener.onThermalStatusChanged(status);
                });
            } finally {
                Binder.restoreCallingIdentity(token);
            }
        }
    };
    try {
        if (mThermalService.registerThermalStatusListener(internalListener)) {
            mListenerMap.put(listener, internalListener);
        } else {
            throw new RuntimeException("Listener failed to set");
        }
    } catch (RemoteException e) {
        throw e.rethrowFromSystemServer();
    }
}