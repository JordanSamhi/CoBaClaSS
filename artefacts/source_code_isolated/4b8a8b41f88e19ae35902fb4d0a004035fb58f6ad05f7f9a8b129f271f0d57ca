public void handleSystemKey(int key){
    if (SPEW)
        Log.d(TAG, "handleNavigationKey: " + key);
    if (!mCommandQueue.panelsEnabled() || !mKeyguardUpdateMonitor.isDeviceInteractive() || mKeyguardStateController.isShowing() && !mKeyguardStateController.isOccluded()) {
        return;
    }
    if (!mUserSetup)
        return;
    if (KeyEvent.KEYCODE_SYSTEM_NAVIGATION_UP == key) {
        mMetricsLogger.action(MetricsEvent.ACTION_SYSTEM_NAVIGATION_KEY_UP);
        mNotificationPanelViewController.collapse(false, 1.0f);
    } else if (KeyEvent.KEYCODE_SYSTEM_NAVIGATION_DOWN == key) {
        mMetricsLogger.action(MetricsEvent.ACTION_SYSTEM_NAVIGATION_KEY_DOWN);
        if (mNotificationPanelViewController.isFullyCollapsed()) {
            if (mVibrateOnOpening) {
                mVibratorHelper.vibrate(VibrationEffect.EFFECT_TICK);
            }
            mNotificationPanelViewController.expand(true);
            ((NotificationListContainer) mStackScroller).setWillExpand(true);
            mHeadsUpManager.unpinAll(true);
            mMetricsLogger.count(NotificationPanelView.COUNTER_PANEL_OPEN, 1);
        } else if (!mNotificationPanelViewController.isInSettings() && !mNotificationPanelViewController.isExpanding()) {
            mNotificationPanelViewController.flingSettings(0, NotificationPanelView.FLING_EXPAND);
            mMetricsLogger.count(NotificationPanelView.COUNTER_PANEL_OPEN_QS, 1);
        }
    }
}