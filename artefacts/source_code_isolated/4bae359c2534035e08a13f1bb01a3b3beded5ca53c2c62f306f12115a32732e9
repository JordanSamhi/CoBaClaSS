public void logLinkProbeFailure(long timeSinceLastTxSuccessMs, int rssi, int linkSpeed, int reason){
    synchronized (mLock) {
        mProbeStatusSinceLastUpdate = android.net.wifi.WifiUsabilityStatsEntry.PROBE_STATUS_FAILURE;
        mProbeElapsedTimeSinceLastUpdateMs = Integer.MAX_VALUE;
        mLinkProbeFailureSecondsSinceLastTxSuccessHistogram.increment((int) (timeSinceLastTxSuccessMs / 1000));
        mLinkProbeFailureRssiCounts.increment(rssi);
        mLinkProbeFailureLinkSpeedCounts.increment(linkSpeed);
        mLinkProbeFailureReasonCounts.increment(reason);
        if (mLinkProbeStaEventCount < MAX_LINK_PROBE_STA_EVENTS) {
            StaEvent event = new StaEvent();
            event.type = StaEvent.TYPE_LINK_PROBE;
            event.linkProbeWasSuccess = false;
            event.linkProbeFailureReason = linkProbeFailureReasonToProto(reason);
            addStaEvent(event);
        }
        mLinkProbeStaEventCount++;
    }
}