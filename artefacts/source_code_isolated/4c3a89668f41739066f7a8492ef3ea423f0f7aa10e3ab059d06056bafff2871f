public int getClosestOfStates(ActivityClientRecord r, int[] finalStates){
    if (finalStates == null || finalStates.length == 0) {
        return UNDEFINED;
    }
    final int currentState = r.getLifecycleState();
    int closestState = UNDEFINED;
    for (int i = 0, shortestPath = Integer.MAX_VALUE, pathLength; i < finalStates.length; i++) {
        getLifecyclePath(currentState, finalStates[i], false);
        pathLength = mLifecycleSequence.size();
        if (pathInvolvesDestruction(mLifecycleSequence)) {
            pathLength += DESTRUCTION_PENALTY;
        }
        if (shortestPath > pathLength) {
            shortestPath = pathLength;
            closestState = finalStates[i];
        }
    }
    return closestState;
}