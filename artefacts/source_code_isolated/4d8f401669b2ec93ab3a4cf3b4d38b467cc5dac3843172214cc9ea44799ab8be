public int getVolumeIndexForAttributes(@NonNull AudioAttributes attr){
    enforceModifyAudioRoutingPermission();
    Objects.requireNonNull(attr, "attr must not be null");
    final int volumeGroup = getVolumeGroupIdForAttributes(attr);
    if (sVolumeGroupStates.indexOfKey(volumeGroup) < 0) {
        throw new IllegalArgumentException("No volume group for attributes " + attr);
    }
    final VolumeGroupState vgs = sVolumeGroupStates.get(volumeGroup);
    return vgs.getVolumeIndex();
}