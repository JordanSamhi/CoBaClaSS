public List<ResolveInfo> queryIntentContentProvidersAsUser(Intent intent, int flags, int userId){
    try {
        ParceledListSlice<ResolveInfo> parceledList = mPM.queryIntentContentProviders(intent, intent.resolveTypeIfNeeded(mContext.getContentResolver()), updateFlagsForComponent(flags, userId, intent), userId);
        if (parceledList == null) {
            return Collections.emptyList();
        }
        return parceledList.getList();
    } catch (RemoteException e) {
        throw e.rethrowFromSystemServer();
    }
}