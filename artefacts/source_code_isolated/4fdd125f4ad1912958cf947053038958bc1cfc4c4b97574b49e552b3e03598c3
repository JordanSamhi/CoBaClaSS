public boolean tryUpdateCarrierIdForPasspoint(PasspointConfiguration config){
    if (config.getCarrierId() != TelephonyManager.UNKNOWN_CARRIER_ID) {
        return false;
    }
    Credential.SimCredential simCredential = config.getCredential().getSimCredential();
    if (simCredential == null) {
        return false;
    }
    IMSIParameter imsiParameter = IMSIParameter.build(simCredential.getImsi());
    if (imsiParameter == null || !imsiParameter.isFullImsi()) {
        vlogd("IMSI is not available or not full");
        return false;
    }
    List<SubscriptionInfo> infos = mSubscriptionManager.getActiveSubscriptionInfoList();
    if (infos == null) {
        return false;
    }
    for (SubscriptionInfo subInfo : infos) {
        String imsi = mTelephonyManager.createForSubscriptionId(subInfo.getSubscriptionId()).getSubscriberId();
        if (imsiParameter.matchesImsi(imsi)) {
            config.setCarrierId(subInfo.getCarrierId());
            return true;
        }
    }
    return false;
}