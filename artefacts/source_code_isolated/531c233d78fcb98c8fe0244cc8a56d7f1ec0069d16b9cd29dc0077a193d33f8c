public static InvocationHandler getInvocationHandler(Object proxy) throws IllegalArgumentException{
    if (!isProxyClass(proxy.getClass())) {
        throw new IllegalArgumentException("not a proxy instance");
    }
    final Proxy p = (Proxy) proxy;
    final InvocationHandler ih = p.h;
    return ih;
}