public static int updateApChannelConfig(WifiNative wifiNative, Resources resources, String countryCode, SoftApConfiguration.Builder configBuilder, SoftApConfiguration config, boolean acsEnabled){
    if (!wifiNative.isHalStarted()) {
        configBuilder.setChannel(DEFAULT_AP_CHANNEL, DEFAULT_AP_BAND);
        return SUCCESS;
    }
    if (config.getBand() == SoftApConfiguration.BAND_5GHZ && countryCode == null) {
        Log.e(TAG, "5GHz band is not allowed without country code");
        return ERROR_GENERIC;
    }
    if ((config.getChannel() == 0) && !acsEnabled) {
        int freq = chooseApChannel(config.getBand(), wifiNative, resources);
        if (freq == -1) {
            Log.e(TAG, "Failed to get available channel.");
            return ERROR_NO_CHANNEL;
        }
        configBuilder.setChannel(ScanResult.convertFrequencyMhzToChannel(freq), convertFrequencyToBand(freq));
    }
    return SUCCESS;
}