public void start() throws IllegalStateException{
    if (mThread != null) {
        Log.e(TAG, "a recording is being done in parallel or stop is not called");
    }
    mAudioRecord.startRecording();
    if (mMic)
        mAudioRecordMic.startRecording();
    Log.d(TAG, "channel count " + mAudioRecord.getChannelCount());
    mCodec.start();
    if (mAudioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
        throw new IllegalStateException("Audio recording failed to start");
    }
    mThread.start();
}