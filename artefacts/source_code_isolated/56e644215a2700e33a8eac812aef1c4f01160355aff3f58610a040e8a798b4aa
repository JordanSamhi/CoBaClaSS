public int getCarrierIdForPackageWithCarrierPrivileges(String packageName){
    List<SubscriptionInfo> subInfoList = mSubscriptionManager.getActiveSubscriptionInfoList();
    if (subInfoList == null || subInfoList.isEmpty()) {
        if (mVerboseLogEnabled)
            Log.v(TAG, "No subs for carrier privilege check");
        return TelephonyManager.UNKNOWN_CARRIER_ID;
    }
    for (SubscriptionInfo info : subInfoList) {
        TelephonyManager specifiedTm = mTelephonyManager.createForSubscriptionId(info.getSubscriptionId());
        if (specifiedTm.checkCarrierPrivilegesForPackage(packageName) == TelephonyManager.CARRIER_PRIVILEGE_STATUS_HAS_ACCESS) {
            return info.getCarrierId();
        }
    }
    return TelephonyManager.UNKNOWN_CARRIER_ID;
}