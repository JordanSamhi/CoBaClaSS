public static ArrayList<AudioDeviceAttributes> getDevicesForAttributes(@NonNull AudioAttributes attributes){
    Objects.requireNonNull(attributes);
    final AudioDeviceAttributes[] devices = new AudioDeviceAttributes[MAX_DEVICE_ROUTING];
    final int res = getDevicesForAttributes(attributes, devices);
    final ArrayList<AudioDeviceAttributes> routeDevices = new ArrayList<>();
    if (res != SUCCESS) {
        Log.e(TAG, "error " + res + " in getDevicesForAttributes for " + attributes);
        return routeDevices;
    }
    for (AudioDeviceAttributes device : devices) {
        if (device != null) {
            routeDevices.add(device);
        }
    }
    return routeDevices;
}