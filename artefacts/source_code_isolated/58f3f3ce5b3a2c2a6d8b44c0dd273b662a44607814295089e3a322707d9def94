public static final int getSelectionEnd(CharSequence text){
    if (text instanceof Spanned) {
        return ((Spanned) text).getSpanStart(SELECTION_END);
    }
    return -1;
}