public void dump(DualDumpOutputStream dump, String idName, long id){
    long token = dump.start(idName, id);
    synchronized (mHandlerLock) {
        if (mUsbDeviceConnectionHandler != null) {
            writeComponentName(dump, "default_usb_host_connection_handler", UsbHostManagerProto.DEFAULT_USB_HOST_CONNECTION_HANDLER, mUsbDeviceConnectionHandler);
        }
    }
    synchronized (mLock) {
        for (String name : mDevices.keySet()) {
            writeDevice(dump, "devices", UsbHostManagerProto.DEVICES, mDevices.get(name));
        }
        dump.write("num_connects", UsbHostManagerProto.NUM_CONNECTS, mNumConnects);
        for (ConnectionRecord rec : mConnections) {
            rec.dump(dump, "connections", UsbHostManagerProto.CONNECTIONS);
        }
    }
    dump.end(token);
}