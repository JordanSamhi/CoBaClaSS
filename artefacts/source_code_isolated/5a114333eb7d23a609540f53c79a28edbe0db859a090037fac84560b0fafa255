public DctConstants.State getOverallState(){
    boolean isConnecting = false;
    boolean isFailed = true;
    boolean isAnyEnabled = false;
    for (ApnContext apnContext : mApnContexts.values()) {
        if (apnContext.isEnabled()) {
            isAnyEnabled = true;
            switch(apnContext.getState()) {
                case CONNECTED:
                case DISCONNECTING:
                    if (VDBG)
                        log("overall state is CONNECTED");
                    return DctConstants.State.CONNECTED;
                case CONNECTING:
                    isConnecting = true;
                    isFailed = false;
                    break;
                case IDLE:
                case RETRYING:
                    isFailed = false;
                    break;
                default:
                    isAnyEnabled = true;
                    break;
            }
        }
    }
    if (!isAnyEnabled) {
        if (VDBG)
            log("overall state is IDLE");
        return DctConstants.State.IDLE;
    }
    if (isConnecting) {
        if (VDBG)
            log("overall state is CONNECTING");
        return DctConstants.State.CONNECTING;
    } else if (!isFailed) {
        if (VDBG)
            log("overall state is IDLE");
        return DctConstants.State.IDLE;
    } else {
        if (VDBG)
            log("overall state is FAILED");
        return DctConstants.State.FAILED;
    }
}