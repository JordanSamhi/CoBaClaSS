public void detectLocaleChange(){
    final String currentLocales = mService.injectGetLocaleTagsForUser(mUserId);
    if (!TextUtils.isEmpty(mKnownLocales) && mKnownLocales.equals(currentLocales)) {
        return;
    }
    if (ShortcutService.DEBUG) {
        Slog.d(TAG, "Locale changed from " + mKnownLocales + " to " + currentLocales + " for user " + mUserId);
    }
    mKnownLocales = currentLocales;
    forAllPackages(pkg -> {
        pkg.resetRateLimiting();
        pkg.resolveResourceStrings();
    });
    mService.scheduleSaveUser(mUserId);
}