public static ColorSpace adapt(@NonNull ColorSpace colorSpace, @NonNull @Size(min = 2, max = 3) float[] whitePoint, @NonNull Adaptation adaptation){
    if (colorSpace.getModel() == Model.RGB) {
        ColorSpace.Rgb rgb = (ColorSpace.Rgb) colorSpace;
        if (compare(rgb.mWhitePoint, whitePoint))
            return colorSpace;
        float[] xyz = whitePoint.length == 3 ? Arrays.copyOf(whitePoint, 3) : xyYToXyz(whitePoint);
        float[] adaptationTransform = chromaticAdaptation(adaptation.mTransform, xyYToXyz(rgb.getWhitePoint()), xyz);
        float[] transform = mul3x3(adaptationTransform, rgb.mTransform);
        return new ColorSpace.Rgb(rgb, transform, whitePoint);
    }
    return colorSpace;
}