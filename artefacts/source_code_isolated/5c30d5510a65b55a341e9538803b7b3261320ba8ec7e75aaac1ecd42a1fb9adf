public void injectSmsPdu(byte[] pdu, String format, PendingIntent receivedIntent){
    if (mContext.checkCallingOrSelfPermission(android.Manifest.permission.MODIFY_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {
        mSmsPermissions.enforceCallerIsImsAppOrCarrierApp("injectSmsPdu");
    }
    if (Rlog.isLoggable("SMS", Log.VERBOSE)) {
        log("pdu: " + pdu + "\n format=" + format + "\n receivedIntent=" + receivedIntent);
    }
    mDispatchersController.injectSmsPdu(pdu, format, result -> {
        if (receivedIntent != null) {
            try {
                receivedIntent.send(result);
            } catch (PendingIntent.CanceledException e) {
                loge("receivedIntent cancelled.");
            }
        }
    });
}