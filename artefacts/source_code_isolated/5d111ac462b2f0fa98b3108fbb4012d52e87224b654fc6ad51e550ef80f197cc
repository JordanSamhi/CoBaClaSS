public static long getSystemSize(Context context){
    PackageManager pm = context.getPackageManager();
    VolumeInfo primaryVolume = pm.getPrimaryStorageCurrentVolume();
    StorageManager sm = (StorageManager) context.getSystemService(Context.STORAGE_SERVICE);
    VolumeInfo shared = sm.findEmulatedForPrivate(primaryVolume);
    if (shared == null) {
        return 0;
    }
    final File sharedPath = shared.getPath();
    if (sharedPath == null) {
        return 0;
    }
    final long sharedDataSize = sharedPath.getTotalSpace();
    long systemSize = sm.getPrimaryStorageSize() - sharedDataSize;
    if (systemSize <= 0) {
        return 0;
    }
    return systemSize;
}