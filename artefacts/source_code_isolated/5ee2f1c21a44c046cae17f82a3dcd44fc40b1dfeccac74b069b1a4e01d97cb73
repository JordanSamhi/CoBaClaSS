public static ViewConfiguration get(Context context){
    if (!context.isUiContext() && vmIncorrectContextUseEnabled()) {
        final String errorMessage = "Tried to access UI constants from a non-visual Context:" + context;
        final String message = "UI constants, such as display metrics or window metrics, " + "must be accessed from Activity or other visual Context. " + "Use an Activity or a Context created with " + "Context#createWindowContext(int, Bundle), which are adjusted to the " + "configuration and visual bounds of an area on screen";
        final Exception exception = new IllegalArgumentException(errorMessage);
        StrictMode.onIncorrectContextUsed(message, exception);
        Log.e(TAG, errorMessage + message, exception);
    }
    final DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    final int density = (int) (100.0f * metrics.density);
    ViewConfiguration configuration = sConfigurations.get(density);
    if (configuration == null) {
        configuration = new ViewConfiguration(context);
        sConfigurations.put(density, configuration);
    }
    return configuration;
}