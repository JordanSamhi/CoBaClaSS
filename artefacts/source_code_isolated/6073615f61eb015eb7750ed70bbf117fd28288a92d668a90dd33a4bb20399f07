public static boolean checkReadCallLog(Context context, int subId, int pid, int uid, String callingPackage, @Nullable String callingPackageName){
    if (context.checkPermission(Manifest.permission.READ_CALL_LOG, pid, uid) != PERMISSION_GRANTED) {
        if (SubscriptionManager.isValidSubscriptionId(subId)) {
            enforceCarrierPrivilege(context, subId, uid, "readCallLog");
            return true;
        }
        return false;
    }
    AppOpsManager appOps = (AppOpsManager) context.getSystemService(Context.APP_OPS_SERVICE);
    return appOps.noteOp(AppOpsManager.OPSTR_READ_CALL_LOG, uid, callingPackage, callingPackageName, null) == AppOpsManager.MODE_ALLOWED;
}