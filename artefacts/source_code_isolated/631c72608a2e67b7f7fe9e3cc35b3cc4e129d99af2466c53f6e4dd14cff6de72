public synchronized void write(int b){
    ensureCapacity(count + 1);
    buf[count] = (byte) b;
    count += 1;
}