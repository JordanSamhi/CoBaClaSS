public static long subtractExact(long x, long y){
    long r = x - y;
    if (((x ^ y) & (x ^ r)) < 0) {
        throw new ArithmeticException("long overflow");
    }
    return r;
}