public void addAppUsageObserver(int requestingUid, int observerId, String[] observed, long timeLimit, PendingIntent callbackIntent, @UserIdInt int userId){
    if (timeLimit < getMinTimeLimit()) {
        throw new IllegalArgumentException("Time limit must be >= " + getMinTimeLimit());
    }
    synchronized (mLock) {
        UserData user = getOrCreateUserDataLocked(userId);
        ObserverAppData observerApp = getOrCreateObserverAppDataLocked(requestingUid);
        AppUsageGroup group = observerApp.appUsageGroups.get(observerId);
        if (group != null) {
            group.remove();
        }
        final int observerIdCount = observerApp.appUsageGroups.size();
        if (observerIdCount >= getAppUsageObserverPerUidLimit()) {
            throw new IllegalStateException("Too many app usage observers added by uid " + requestingUid);
        }
        group = new AppUsageGroup(user, observerApp, observerId, observed, timeLimit, callbackIntent);
        observerApp.appUsageGroups.append(observerId, group);
        if (DEBUG) {
            Slog.d(TAG, "addObserver " + observed + " for " + timeLimit);
        }
        user.addUsageGroup(group);
        noteActiveLocked(user, group, getUptimeMillis());
    }
}