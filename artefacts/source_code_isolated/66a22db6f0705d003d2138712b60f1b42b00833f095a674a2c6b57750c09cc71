public static SmsMessage createFromEfRecord(int index, byte[] data, int subId){
    SmsMessageBase wrappedMessage;
    if (isCdmaVoice(subId)) {
        wrappedMessage = com.android.internal.telephony.cdma.SmsMessage.createFromEfRecord(index, data);
    } else {
        wrappedMessage = com.android.internal.telephony.gsm.SmsMessage.createFromEfRecord(index, data);
    }
    return wrappedMessage != null ? new SmsMessage(wrappedMessage) : null;
}