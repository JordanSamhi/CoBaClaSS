public boolean shouldBeVisible(){
    boolean notificationsShown = !mWakeUpCoordinator.getNotificationsFullyHidden();
    boolean canShow = !mIsExpanded && notificationsShown;
    if (mBypassController.getBypassEnabled() && (mStatusBarStateController.getState() == StatusBarState.KEYGUARD || mKeyguardStateController.isKeyguardGoingAway()) && notificationsShown) {
        canShow = true;
    }
    return canShow && mHeadsUpManager.hasPinnedHeadsUp();
}