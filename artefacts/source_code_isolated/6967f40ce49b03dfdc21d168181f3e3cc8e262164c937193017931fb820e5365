public ComponentName[] discardObsoleteComponents(List<ResolveInfo> query){
    if (mSetPackages == null || query == null) {
        return new ComponentName[0];
    }
    final int NQ = query.size();
    final int NS = mSetPackages.length;
    ArrayList<ComponentName> aliveComponents = new ArrayList<>();
    for (int i = 0; i < NQ; i++) {
        ResolveInfo ri = query.get(i);
        ActivityInfo ai = ri.activityInfo;
        for (int j = 0; j < NS; j++) {
            if (mSetPackages[j].equals(ai.packageName) && mSetClasses[j].equals(ai.name)) {
                aliveComponents.add(new ComponentName(mSetPackages[j], mSetClasses[j]));
                break;
            }
        }
    }
    return aliveComponents.toArray(new ComponentName[aliveComponents.size()]);
}