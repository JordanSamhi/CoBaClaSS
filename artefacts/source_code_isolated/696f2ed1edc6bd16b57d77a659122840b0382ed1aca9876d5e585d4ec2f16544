public void trigger(@RecoveryReason int reason){
    if (!(reason == REASON_LAST_RESORT_WATCHDOG || reason == REASON_WIFINATIVE_FAILURE || reason == REASON_STA_IFACE_DOWN)) {
        Log.e(TAG, "Invalid trigger reason. Ignoring...");
        return;
    }
    if (reason == REASON_STA_IFACE_DOWN) {
        Log.e(TAG, "STA interface down, disable wifi");
        mActiveModeWarden.recoveryDisableWifi();
        return;
    }
    Log.e(TAG, "Triggering recovery for reason: " + REASON_STRINGS[reason]);
    if (reason == REASON_WIFINATIVE_FAILURE) {
        int maxRecoveriesPerHour = mContext.getResources().getInteger(R.integer.config_wifiMaxNativeFailureSelfRecoveryPerHour);
        if (maxRecoveriesPerHour == 0) {
            Log.e(TAG, "Recovery disabled. Disabling wifi");
            mActiveModeWarden.recoveryDisableWifi();
            return;
        }
        trimPastRestartTimes();
        if (mPastRestartTimes.size() >= maxRecoveriesPerHour) {
            Log.e(TAG, "Already restarted wifi " + maxRecoveriesPerHour + " times in" + " last 1 hour. Disabling wifi");
            mActiveModeWarden.recoveryDisableWifi();
            return;
        }
        mPastRestartTimes.add(mClock.getElapsedSinceBootMillis());
    }
    mActiveModeWarden.recoveryRestartWifi(reason);
}