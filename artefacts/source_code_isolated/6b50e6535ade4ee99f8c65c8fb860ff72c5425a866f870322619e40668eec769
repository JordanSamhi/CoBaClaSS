public boolean getInEmergency(){
    boolean isInEmergencyExtension = (mCallEndElapsedRealtimeMillis > 0) && ((SystemClock.elapsedRealtime() - mCallEndElapsedRealtimeMillis) < mEmergencyExtensionMillis);
    boolean isInEmergencyCallback = mTelephonyManager.getEmergencyCallbackMode();
    boolean isInEmergencySmsMode = mTelephonyManager.isInEmergencySmsMode();
    return mIsInEmergencyCall || isInEmergencyCallback || isInEmergencyExtension || isInEmergencySmsMode;
}