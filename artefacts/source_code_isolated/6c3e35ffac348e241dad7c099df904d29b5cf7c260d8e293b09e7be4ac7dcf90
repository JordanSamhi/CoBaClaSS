public void testIsAppEligibleForBackup_whenAppEligible() throws Exception{
    mShadowContext.grantPermissions(android.Manifest.permission.BACKUP);
    TransportMock transportMock = setUpCurrentTransport(mTransportManager, backupTransport());
    registerPackages(PACKAGE_1);
    ShadowAppBackupUtils.setAppRunningAndEligibleForBackupWithTransport(PACKAGE_1);
    UserBackupManagerService backupManagerService = createUserBackupManagerServiceAndRunTasks();
    boolean result = backupManagerService.isAppEligibleForBackup(PACKAGE_1);
    assertThat(result).isTrue();
    verify(mTransportManager).disposeOfTransportClient(eq(transportMock.transportClient), any());
}