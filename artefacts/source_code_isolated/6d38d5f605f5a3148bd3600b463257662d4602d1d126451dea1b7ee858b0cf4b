public static SubmitPdu getSmsPdu(int subId, @SmsManager.StatusOnIcc int status, @Nullable String scAddress, @NonNull String address, @NonNull String message, long date){
    SubmitPduBase spb;
    if (isCdmaVoice(subId)) {
        if (status == SmsManager.STATUS_ON_ICC_READ || status == SmsManager.STATUS_ON_ICC_UNREAD) {
            spb = com.android.internal.telephony.cdma.SmsMessage.getDeliverPdu(address, message, date);
        } else {
            spb = com.android.internal.telephony.cdma.SmsMessage.getSubmitPdu(scAddress, address, message, false, null);
        }
    } else {
        if (status == SmsManager.STATUS_ON_ICC_READ || status == SmsManager.STATUS_ON_ICC_UNREAD) {
            spb = com.android.internal.telephony.gsm.SmsMessage.getDeliverPdu(scAddress, address, message, date);
        } else {
            spb = com.android.internal.telephony.gsm.SmsMessage.getSubmitPdu(scAddress, address, message, false, null);
        }
    }
    return spb != null ? new SubmitPdu(spb) : null;
}