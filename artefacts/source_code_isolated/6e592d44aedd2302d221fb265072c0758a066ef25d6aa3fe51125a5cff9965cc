public ServiceInfo<V> getServiceInfo(V type, int userId){
    synchronized (mServicesLock) {
        final UserServices<V> user = findOrCreateUserLocked(userId);
        if (user.services == null) {
            generateServicesMap(null, userId);
        }
        return user.services.get(type);
    }
}