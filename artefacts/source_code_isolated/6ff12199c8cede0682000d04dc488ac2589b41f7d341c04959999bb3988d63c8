public void testRunTask_whenLocalAgentOnBackupThrows_setsNullWorkSource() throws Exception{
    TransportMock transportMock = setUpInitializedTransport(mTransport);
    AgentMock agentMock = setUpAgent(PACKAGE_1);
    agentOnBackupDo(agentMock, (oldState, dataOutput, newState) -> {
        throw new RuntimeException();
    });
    KeyValueBackupTask task = createKeyValueBackupTask(transportMock, PACKAGE_1);
    runTask(task);
    verify(mBackupManagerService).setWorkSource(null);
}