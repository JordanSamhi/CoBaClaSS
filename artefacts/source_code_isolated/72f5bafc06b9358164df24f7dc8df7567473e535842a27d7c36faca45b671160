public boolean isAppCompatTheme(){
    if (mIsThemeAppCompat != null) {
        return mIsThemeAppCompat;
    }
    StyleResourceValue defaultTheme = mRenderResources.getDefaultTheme();
    boolean isThemeAppCompat = false;
    for (int i = 0; i < 50; i++) {
        if (defaultTheme == null) {
            break;
        }
        if (defaultTheme.getName().startsWith(PREFIX_THEME_APPCOMPAT)) {
            isThemeAppCompat = true;
            break;
        }
        defaultTheme = mRenderResources.getParent(defaultTheme);
    }
    mIsThemeAppCompat = isThemeAppCompat;
    return isThemeAppCompat;
}