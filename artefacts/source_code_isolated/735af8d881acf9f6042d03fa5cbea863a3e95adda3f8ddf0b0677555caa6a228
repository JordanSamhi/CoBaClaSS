public void countPermissionApps(@NonNull List<String> permissionNames, @CountPermissionAppsFlag int flags, @NonNull OnCountPermissionAppsResultCallback callback, @Nullable Handler handler){
    checkCollectionElementsNotNull(permissionNames, "permissionNames");
    checkFlagsArgument(flags, COUNT_WHEN_SYSTEM | COUNT_ONLY_WHEN_GRANTED);
    checkNotNull(callback);
    Handler finalHandler = handler != null ? handler : mHandler;
    mRemoteService.postAsync(service -> {
        AndroidFuture<Integer> countPermissionAppsResult = new AndroidFuture<>();
        service.countPermissionApps(permissionNames, flags, countPermissionAppsResult);
        return countPermissionAppsResult;
    }).whenComplete((countPermissionAppsResult, err) -> finalHandler.post(() -> {
        if (err != null) {
            Log.e(TAG, "Error counting permission apps", err);
            callback.onCountPermissionApps(0);
        } else {
            callback.onCountPermissionApps(countPermissionAppsResult);
        }
    }));
}