public static void setDefaultApplicationAsUser(String packageName, Context context, int userId){
    TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    RoleManager roleManager = (RoleManager) context.getSystemService(Context.ROLE_SERVICE);
    if (!tm.isSmsCapable() && (roleManager == null || !roleManager.isRoleAvailable(RoleManager.ROLE_SMS))) {
        return;
    }
    final long token = Binder.clearCallingIdentity();
    try {
        setDefaultApplicationInternal(packageName, context, userId);
    } finally {
        Binder.restoreCallingIdentity(token);
    }
}