public boolean hasImeFocus(){
    return getViewRootImpl() != null && getViewRootImpl().getImeFocusController().hasImeFocus();
}