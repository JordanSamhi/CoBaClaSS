public void updateMediaButtonSessionIfNeeded(){
    if (DEBUG) {
        Log.d(TAG, "updateMediaButtonSessionIfNeeded, callers=" + Debug.getCallers(2));
    }
    IntArray audioPlaybackUids = mAudioPlayerStateMonitor.getSortedAudioPlaybackClientUids();
    for (int i = 0; i < audioPlaybackUids.size(); i++) {
        int audioPlaybackUid = audioPlaybackUids.get(i);
        MediaSessionRecordImpl mediaButtonSession = findMediaButtonSession(audioPlaybackUid);
        if (mediaButtonSession == null) {
            if (DEBUG) {
                Log.d(TAG, "updateMediaButtonSessionIfNeeded, skipping uid=" + audioPlaybackUid);
            }
            continue;
        }
        boolean ignoreButtonSession = (mediaButtonSession.getSessionPolicies() & SESSION_POLICY_IGNORE_BUTTON_SESSION) != 0;
        if (DEBUG) {
            Log.d(TAG, "updateMediaButtonSessionIfNeeded, checking uid=" + audioPlaybackUid + ", mediaButtonSession=" + mediaButtonSession + ", ignoreButtonSession=" + ignoreButtonSession);
        }
        if (!ignoreButtonSession) {
            mAudioPlayerStateMonitor.cleanUpAudioPlaybackUids(mediaButtonSession.getUid());
            if (mediaButtonSession != mMediaButtonSession) {
                updateMediaButtonSession(mediaButtonSession);
            }
            return;
        }
    }
}