public boolean hasPermission(String name, int userId){
    enforceValidUserId(userId);
    synchronized (mLock) {
        if (mPermissions == null) {
            return false;
        }
        PermissionData permissionData = mPermissions.get(name);
        return permissionData != null && permissionData.isGranted(userId);
    }
}