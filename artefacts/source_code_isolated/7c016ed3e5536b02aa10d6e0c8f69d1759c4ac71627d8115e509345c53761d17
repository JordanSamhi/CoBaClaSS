public int setAllowedCapturePolicy(int capturePolicy){
    int callingUid = Binder.getCallingUid();
    int flags = AudioAttributes.capturePolicyToFlags(capturePolicy, 0x0);
    final long identity = Binder.clearCallingIdentity();
    synchronized (mPlaybackMonitor) {
        int result = AudioSystem.setAllowedCapturePolicy(callingUid, flags);
        if (result == AudioSystem.AUDIO_STATUS_OK) {
            mPlaybackMonitor.setAllowedCapturePolicy(callingUid, capturePolicy);
        }
        Binder.restoreCallingIdentity(identity);
        return result;
    }
}