public boolean setMiracastMode(int mode){
    synchronized (mLock) {
        if (!checkSupplicantP2pIfaceAndLogFailure("setMiracastMode"))
            return false;
        byte targetMode = ISupplicantP2pIface.MiracastMode.DISABLED;
        switch(mode) {
            case WifiP2pManager.MIRACAST_SOURCE:
                targetMode = ISupplicantP2pIface.MiracastMode.SOURCE;
                break;
            case WifiP2pManager.MIRACAST_SINK:
                targetMode = ISupplicantP2pIface.MiracastMode.SINK;
                break;
        }
        SupplicantResult<Void> result = new SupplicantResult("setMiracastMode(" + mode + ")");
        try {
            result.setResult(mISupplicantP2pIface.setMiracastMode(targetMode));
        } catch (RemoteException e) {
            Log.e(TAG, "ISupplicantP2pIface exception: " + e);
            supplicantServiceDiedHandler();
        }
        return result.isSuccess();
    }
}