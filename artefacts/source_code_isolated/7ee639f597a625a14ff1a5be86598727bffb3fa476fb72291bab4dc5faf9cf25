public void end(){
    mAudioRecord.stop();
    if (mMic) {
        mAudioRecordMic.stop();
    }
    mAudioRecord.release();
    if (mMic) {
        mAudioRecordMic.release();
    }
    try {
        mThread.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    mCodec.stop();
    mCodec.release();
    mMuxer.stop();
    mMuxer.release();
    mThread = null;
}