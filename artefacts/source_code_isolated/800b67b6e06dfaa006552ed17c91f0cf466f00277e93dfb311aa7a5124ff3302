public boolean update(@Nullable WifiConfiguration config, WifiInfo info, NetworkInfo networkInfo){
    boolean updated = false;
    final int oldLevel = getLevel();
    if (info != null && isInfoForThisAccessPoint(config, info)) {
        updated = (mInfo == null);
        if (!isPasspoint() && mConfig != config) {
            update(config);
        }
        if (mRssi != info.getRssi() && info.getRssi() != WifiInfo.INVALID_RSSI) {
            mRssi = info.getRssi();
            updated = true;
        } else if (mNetworkInfo != null && networkInfo != null && mNetworkInfo.getDetailedState() != networkInfo.getDetailedState()) {
            updated = true;
        }
        mInfo = info;
        mNetworkInfo = networkInfo;
    } else if (mInfo != null) {
        updated = true;
        mInfo = null;
        mNetworkInfo = null;
    }
    if (updated && mAccessPointListener != null) {
        ThreadUtils.postOnMainThread(() -> {
            if (mAccessPointListener != null) {
                mAccessPointListener.onAccessPointChanged(this);
            }
        });
        if (oldLevel != getLevel()) {
            ThreadUtils.postOnMainThread(() -> {
                if (mAccessPointListener != null) {
                    mAccessPointListener.onLevelChanged(this);
                }
            });
        }
    }
    return updated;
}