public static List<E> checkedList(List<E> list, Class<E> type){
    return (list instanceof RandomAccess ? new CheckedRandomAccessList<>(list, type) : new CheckedList<>(list, type));
}