public void setOnKeyguard(boolean onKeyguard){
    if (onKeyguard != mOnKeyguard) {
        boolean wasAboveShelf = isAboveShelf();
        final boolean wasExpanded = isExpanded();
        mOnKeyguard = onKeyguard;
        onExpansionChanged(false, wasExpanded);
        if (wasExpanded != isExpanded()) {
            if (mIsSummaryWithChildren) {
                mChildrenContainer.updateGroupOverflow();
            }
            notifyHeightChanged(false);
        }
        if (isAboveShelf() != wasAboveShelf) {
            mAboveShelfChangedListener.onAboveShelfStateChanged(!wasAboveShelf);
        }
    }
    updateRippleAllowed();
}