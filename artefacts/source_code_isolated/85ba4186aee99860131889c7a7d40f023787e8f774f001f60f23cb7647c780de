public void setAdapter(Adapter adapter){
    setLayoutFrozen(false);
    setAdapterInternal(adapter, false, true);
    requestLayout();
}