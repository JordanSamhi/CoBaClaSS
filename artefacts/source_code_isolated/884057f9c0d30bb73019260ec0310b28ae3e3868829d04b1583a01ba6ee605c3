public int getCarrierPrivilegeStatusForUid(PackageManager packageManager, int uid){
    String[] packages = packageManager.getPackagesForUid(uid);
    for (String pkg : packages) {
        int accessStatus = getCarrierPrivilegeStatus(packageManager, pkg);
        if (accessStatus != TelephonyManager.CARRIER_PRIVILEGE_STATUS_NO_ACCESS) {
            return accessStatus;
        }
    }
    return TelephonyManager.CARRIER_PRIVILEGE_STATUS_NO_ACCESS;
}