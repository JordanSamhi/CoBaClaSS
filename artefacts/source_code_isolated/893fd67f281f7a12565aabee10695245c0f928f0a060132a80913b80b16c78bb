public int getAppsBypassingDndCount(int userId){
    int count = 0;
    synchronized (mPackagePreferences) {
        final int numPackagePreferences = mPackagePreferences.size();
        for (int i = 0; i < numPackagePreferences; i++) {
            final PackagePreferences r = mPackagePreferences.valueAt(i);
            if (userId != UserHandle.getUserId(r.uid) || r.importance == IMPORTANCE_NONE) {
                continue;
            }
            for (NotificationChannel channel : r.channels.values()) {
                if (channelIsLiveLocked(r, channel) && channel.canBypassDnd()) {
                    count++;
                    break;
                }
            }
        }
    }
    return count;
}