public static EnforcedAdmin checkIfKeyguardFeaturesDisabled(Context context, int keyguardFeatures, @UserIdInt final int userId){
    final LockSettingCheck check = (dpm, admin, checkUser) -> {
        int effectiveFeatures = dpm.getKeyguardDisabledFeatures(admin, checkUser);
        if (checkUser != userId) {
            effectiveFeatures &= PROFILE_KEYGUARD_FEATURES_AFFECT_OWNER;
        }
        return (effectiveFeatures & keyguardFeatures) != KEYGUARD_DISABLE_FEATURES_NONE;
    };
    if (UserManager.get(context).getUserInfo(userId).isManagedProfile()) {
        DevicePolicyManager dpm = (DevicePolicyManager) context.getSystemService(Context.DEVICE_POLICY_SERVICE);
        return findEnforcedAdmin(dpm.getActiveAdminsAsUser(userId), dpm, userId, check);
    }
    return checkForLockSetting(context, userId, check);
}