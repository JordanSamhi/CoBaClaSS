public void saveCallQuality(CallQuality cq){
    if (cq.getUplinkCallQualityLevel() == CallQuality.CALL_QUALITY_NOT_AVAILABLE || cq.getDownlinkCallQualityLevel() == CallQuality.CALL_QUALITY_NOT_AVAILABLE) {
        return;
    }
    int newUlCallQualityState = BAD_QUALITY;
    int newDlCallQualityState = BAD_QUALITY;
    if (isGoodQuality(cq.getUplinkCallQualityLevel())) {
        newUlCallQualityState = GOOD_QUALITY;
    }
    if (isGoodQuality(cq.getDownlinkCallQualityLevel())) {
        newDlCallQualityState = GOOD_QUALITY;
    }
    if (IS_DEBUGGABLE) {
        if (newUlCallQualityState != mUlCallQualityState) {
            addSnapshot(cq, mUlSnapshots);
        }
        if (newDlCallQualityState != mDlCallQualityState) {
            addSnapshot(cq, mDlSnapshots);
        }
    }
    updateTotalDurations(cq);
    updateMinAndMaxSignalStrengthSnapshots(newDlCallQualityState, newUlCallQualityState, cq);
    mUlCallQualityState = newUlCallQualityState;
    mDlCallQualityState = newDlCallQualityState;
    if (cq.getCallDuration() > mLastCallQuality.getCallDuration()) {
        mLastCallQuality = cq;
    }
}