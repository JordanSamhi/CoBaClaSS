public Waveform scale(float gamma, int maxAmplitude){
    if (maxAmplitude > MAX_AMPLITUDE || maxAmplitude < 0) {
        throw new IllegalArgumentException("Amplitude is negative or greater than MAX_AMPLITUDE");
    }
    if (gamma == 1.0f && maxAmplitude == MAX_AMPLITUDE) {
        return new Waveform(mTimings, mAmplitudes, mRepeat);
    }
    int[] scaledAmplitudes = Arrays.copyOf(mAmplitudes, mAmplitudes.length);
    for (int i = 0; i < scaledAmplitudes.length; i++) {
        scaledAmplitudes[i] = scale(scaledAmplitudes[i], gamma, maxAmplitude);
    }
    return new Waveform(mTimings, scaledAmplitudes, mRepeat);
}