public void endConnectionEvent(int failure){
    synchronized (mLock) {
        if (mCurrentConnectionEvent == null) {
            startConnectionEvent(P2pConnectionEvent.CONNECTION_REINVOKE, null);
        }
        mCurrentConnectionEvent.durationTakenToConnectMillis = (int) (mClock.getElapsedSinceBootMillis() - mCurrentConnectionEventStartTime);
        mCurrentConnectionEvent.connectivityLevelFailureCode = failure;
        mCurrentConnectionEvent = null;
    }
}