public synchronized void verifyKnownUsers(){
    mSerialNumbers = mDatabase.getUserSerialNumbers();
    List<Integer> deletedUserIds = new ArrayList<Integer>() {
    };
    for (Map.Entry<Integer, Long> entry : mSerialNumbers.entrySet()) {
        Integer userId = entry.getKey();
        Long storedSerialNumber = entry.getValue();
        if (storedSerialNumber == null) {
            storedSerialNumber = -1L;
        }
        long currentSerialNumber = mUserManager.getSerialNumberForUser(UserHandle.of(userId));
        if (currentSerialNumber == -1) {
            deletedUserIds.add(userId);
            removeDataForUser(userId);
        } else if (storedSerialNumber == -1) {
            storeUserSerialNumber(userId, currentSerialNumber);
        } else if (storedSerialNumber != currentSerialNumber) {
            deletedUserIds.add(userId);
            removeDataForUser(userId);
            storeUserSerialNumber(userId, currentSerialNumber);
        }
    }
    for (Integer deletedUser : deletedUserIds) {
        mSerialNumbers.remove(deletedUser);
    }
}