public int trackRecorder(IBinder recorder){
    if (recorder == null) {
        Log.e(TAG, "trackRecorder called with null token");
        return AudioManager.RECORD_RIID_INVALID;
    }
    final int newRiid = AudioSystem.newAudioRecorderId();
    RecorderDeathHandler handler = new RecorderDeathHandler(newRiid, recorder);
    if (!handler.init()) {
        return AudioManager.RECORD_RIID_INVALID;
    }
    synchronized (mRecordStates) {
        mRecordStates.add(new RecordingState(newRiid, handler));
    }
    return newRiid;
}