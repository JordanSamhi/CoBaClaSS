public void updateCapabilities() throws android.telephony.ims.ImsException{
    boolean optionsSupport = isOptionsSupported();
    boolean presenceSupported = isPresenceSupported();
    logi("Update capabilities for slot " + mSlotId + ": options=" + optionsSupport + ", presence=" + presenceSupported);
    if (optionsSupport || presenceSupported) {
        CapabilityChangeRequest request = new CapabilityChangeRequest();
        if (optionsSupport) {
            addRcsUceCapability(request, CAPABILITY_OPTIONS);
        }
        if (presenceSupported) {
            addRcsUceCapability(request, CAPABILITY_PRESENCE);
        }
        sendCapabilityChangeRequest(request);
    } else {
        disableAllRcsUceCapabilities();
    }
}