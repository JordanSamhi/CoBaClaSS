public static AutoCloseable startRenderingCommandsCapture(View tree, Executor executor, Function<Picture, Boolean> callback){
    final View.AttachInfo attachInfo = tree.mAttachInfo;
    if (attachInfo == null) {
        throw new IllegalArgumentException("Given view isn't attached");
    }
    if (attachInfo.mHandler.getLooper() != Looper.myLooper()) {
        throw new IllegalStateException("Called on the wrong thread." + " Must be called on the thread that owns the given View");
    }
    final HardwareRenderer renderer = attachInfo.mThreadedRenderer;
    if (renderer != null) {
        return new PictureCallbackHandler(renderer, callback, executor);
    }
    return null;
}