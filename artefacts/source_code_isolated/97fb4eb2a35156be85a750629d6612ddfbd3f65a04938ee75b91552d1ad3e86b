public void onBootCompleted(){
    if (DEBUG) {
        Slog.d(TAG, "onBootCompleted");
    }
    putGlobalSetting(Settings.Global.LOW_POWER_MODE, 0);
    runOnBgThread(() -> {
        final ContentResolver cr = mContext.getContentResolver();
        cr.registerContentObserver(Settings.Global.getUriFor(Settings.Global.LOW_POWER_MODE), false, mSettingsObserver, UserHandle.USER_SYSTEM);
        cr.registerContentObserver(Settings.Global.getUriFor(Settings.Global.LOW_POWER_MODE_STICKY), false, mSettingsObserver, UserHandle.USER_SYSTEM);
        cr.registerContentObserver(Settings.Global.getUriFor(Settings.Global.LOW_POWER_MODE_TRIGGER_LEVEL), false, mSettingsObserver, UserHandle.USER_SYSTEM);
        cr.registerContentObserver(Settings.Global.getUriFor(Settings.Global.AUTOMATIC_POWER_SAVE_MODE), false, mSettingsObserver, UserHandle.USER_SYSTEM);
        cr.registerContentObserver(Settings.Global.getUriFor(Settings.Global.DYNAMIC_POWER_SAVINGS_ENABLED), false, mSettingsObserver, UserHandle.USER_SYSTEM);
        cr.registerContentObserver(Settings.Global.getUriFor(Settings.Global.DYNAMIC_POWER_SAVINGS_DISABLE_THRESHOLD), false, mSettingsObserver, UserHandle.USER_SYSTEM);
        cr.registerContentObserver(Settings.Global.getUriFor(Settings.Global.LOW_POWER_MODE_STICKY_AUTO_DISABLE_ENABLED), false, mSettingsObserver, UserHandle.USER_SYSTEM);
        cr.registerContentObserver(Settings.Global.getUriFor(Settings.Global.LOW_POWER_MODE_STICKY_AUTO_DISABLE_LEVEL), false, mSettingsObserver, UserHandle.USER_SYSTEM);
        synchronized (mLock) {
            final boolean lowPowerModeEnabledSticky = getGlobalSetting(Settings.Global.LOW_POWER_MODE_STICKY, 0) != 0;
            if (lowPowerModeEnabledSticky) {
                mState = STATE_PENDING_STICKY_ON;
            }
            mBootCompleted = true;
            refreshSettingsLocked();
            doAutoBatterySaverLocked();
        }
    });
}