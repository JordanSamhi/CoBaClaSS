public int findIndex(@EuiccProfileInfo.PolicyRule int policy, CarrierIdentifier carrierId){
    for (int i = 0; i < mPolicyRules.length; i++) {
        if ((mPolicyRules[i] & policy) == 0) {
            continue;
        }
        CarrierIdentifier[] carrierIds = mCarrierIds[i];
        if (carrierIds == null || carrierIds.length == 0) {
            continue;
        }
        for (int j = 0; j < carrierIds.length; j++) {
            CarrierIdentifier ruleCarrierId = carrierIds[j];
            if (!match(ruleCarrierId.getMcc(), carrierId.getMcc()) || !match(ruleCarrierId.getMnc(), carrierId.getMnc())) {
                continue;
            }
            String gid = ruleCarrierId.getGid1();
            if (!TextUtils.isEmpty(gid) && !gid.equals(carrierId.getGid1())) {
                continue;
            }
            gid = ruleCarrierId.getGid2();
            if (!TextUtils.isEmpty(gid) && !gid.equals(carrierId.getGid2())) {
                continue;
            }
            return i;
        }
    }
    return -1;
}