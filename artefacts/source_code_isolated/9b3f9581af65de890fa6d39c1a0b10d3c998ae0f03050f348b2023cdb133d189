public void setWriteAheadLoggingEnabled(boolean enabled){
    synchronized (this) {
        if (mOpenParamsBuilder.isWriteAheadLoggingEnabled() != enabled) {
            if (mDatabase != null && mDatabase.isOpen() && !mDatabase.isReadOnly()) {
                if (enabled) {
                    mDatabase.enableWriteAheadLogging();
                } else {
                    mDatabase.disableWriteAheadLogging();
                }
            }
            mOpenParamsBuilder.setWriteAheadLoggingEnabled(enabled);
        }
        mOpenParamsBuilder.removeOpenFlags(SQLiteDatabase.ENABLE_LEGACY_COMPATIBILITY_WAL);
    }
}