public final void removeSession(@NonNull MediaSession2 session){
    if (session == null) {
        throw new IllegalArgumentException("session shouldn't be null");
    }
    MediaNotification notification;
    synchronized (mLock) {
        if (mSessions.get(session.getId()) != session) {
            return;
        }
        mSessions.remove(session.getId());
        notification = mNotifications.remove(session);
    }
    session.setForegroundServiceEventCallback(null);
    if (notification != null) {
        mNotificationManager.cancel(notification.getNotificationId());
    }
    if (getSessions().isEmpty()) {
        stopForeground(false);
    }
}