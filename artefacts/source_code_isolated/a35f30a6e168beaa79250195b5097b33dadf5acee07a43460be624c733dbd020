public long logDurationStat(int eventId, long start){
    synchronized (mLock) {
        final long duration = getTime() - start;
        if (eventId >= 0 && eventId < SIZE) {
            mCountStats[eventId]++;
            mDurationStats[eventId] += duration;
        } else {
            Slog.wtf(TAG, "Invalid event ID: " + eventId);
            return duration;
        }
        if (mMaxDurationStats[eventId] < duration) {
            mMaxDurationStats[eventId] = duration;
        }
        final long nowRealtime = SystemClock.elapsedRealtime();
        if (nowRealtime > mNextTickTime) {
            if (mMaxCallsPerSecond[eventId] < mCallsPerSecond[eventId]) {
                mMaxCallsPerSecond[eventId] = mCallsPerSecond[eventId];
            }
            if (mMaxDurationPerSecond[eventId] < mDurationPerSecond[eventId]) {
                mMaxDurationPerSecond[eventId] = mDurationPerSecond[eventId];
            }
            mCallsPerSecond[eventId] = 0;
            mDurationPerSecond[eventId] = 0;
            mNextTickTime = nowRealtime + 1000;
        }
        mCallsPerSecond[eventId]++;
        mDurationPerSecond[eventId] += duration;
        return duration;
    }
}