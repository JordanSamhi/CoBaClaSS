public static void copyToFileOrThrow(InputStream in, File destFile) throws IOException{
    if (destFile.exists()) {
        destFile.delete();
    }
    try (FileOutputStream out = new FileOutputStream(destFile)) {
        copy(in, out);
        try {
            Os.fsync(out.getFD());
        } catch (ErrnoException e) {
            throw e.rethrowAsIOException();
        }
    }
}