public void updateIcon(){
    if (getCurrentView() == null || !getCurrentView().isAttachedToWindow() || mIconResId == 0) {
        return;
    }
    final KeyButtonDrawable currentDrawable = getImageDrawable();
    KeyButtonDrawable drawable = getNewDrawable();
    if (currentDrawable != null) {
        drawable.setDarkIntensity(currentDrawable.getDarkIntensity());
    }
    setImageDrawable(drawable);
}