public static int flagsUpTo(int lastFlag){
    return lastFlag <= 0 ? 0 : lastFlag | flagsUpTo(lastFlag >> 1);
}