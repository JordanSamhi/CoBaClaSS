public void updateDrawState(TextPaint ds){
    updateMeasureState(ds);
    if (mTextColor != null) {
        ds.setColor(mTextColor.getColorForState(ds.drawableState, 0));
    }
    if (mTextColorLink != null) {
        ds.linkColor = mTextColorLink.getColorForState(ds.drawableState, 0);
    }
    if (mShadowColor != 0) {
        ds.setShadowLayer(mShadowRadius, mShadowDx, mShadowDy, mShadowColor);
    }
}