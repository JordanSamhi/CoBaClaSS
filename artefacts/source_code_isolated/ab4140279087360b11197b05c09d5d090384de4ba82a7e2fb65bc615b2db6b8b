public void disableCarModeByCallingPackage(@UiModeManager.DisableCarMode int flags, String callingPackage){
    if (isUiModeLocked()) {
        Slog.e(TAG, "disableCarMode while UI mode is locked");
        return;
    }
    boolean isSystemCaller = Binder.getCallingUid() == Process.SYSTEM_UID;
    final int carModeFlags = isSystemCaller ? flags : flags & ~UiModeManager.DISABLE_CAR_MODE_ALL_PRIORITIES;
    final long ident = Binder.clearCallingIdentity();
    try {
        synchronized (mLock) {
            int priority = mCarModePackagePriority.entrySet().stream().filter(e -> e.getValue().equals(callingPackage)).findFirst().map(Map.Entry::getKey).orElse(UiModeManager.DEFAULT_PRIORITY);
            setCarModeLocked(false, carModeFlags, priority, callingPackage);
            if (mSystemReady) {
                updateLocked(0, flags);
            }
        }
    } finally {
        Binder.restoreCallingIdentity(ident);
    }
}