public final int initialize(final int subscriptionId, final IMbmsDownloadSessionCallback callback) throws RemoteException{
    if (callback == null) {
        throw new NullPointerException("Callback must not be null");
    }
    final int uid = Binder.getCallingUid();
    int result = initialize(subscriptionId, new MbmsDownloadSessionCallback() {

        @Override
        public void onError(int errorCode, String message) {
            try {
                if (errorCode == MbmsErrors.UNKNOWN) {
                    throw new IllegalArgumentException("Middleware cannot send an unknown error.");
                }
                callback.onError(errorCode, message);
            } catch (RemoteException e) {
                onAppCallbackDied(uid, subscriptionId);
            }
        }

        @Override
        public void onFileServicesUpdated(List<FileServiceInfo> services) {
            try {
                callback.onFileServicesUpdated(services);
            } catch (RemoteException e) {
                onAppCallbackDied(uid, subscriptionId);
            }
        }

        @Override
        public void onMiddlewareReady() {
            try {
                callback.onMiddlewareReady();
            } catch (RemoteException e) {
                onAppCallbackDied(uid, subscriptionId);
            }
        }
    });
    if (result == MbmsErrors.SUCCESS) {
        callback.asBinder().linkToDeath(new DeathRecipient() {

            @Override
            public void binderDied() {
                onAppCallbackDied(uid, subscriptionId);
            }
        }, 0);
    }
    return result;
}