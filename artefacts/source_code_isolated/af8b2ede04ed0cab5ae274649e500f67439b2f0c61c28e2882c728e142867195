public static int detectSurfaceType(Surface surface) throws BufferQueueAbandonedException{
    checkNotNull(surface);
    int surfaceType = nativeDetectSurfaceType(surface);
    if ((surfaceType >= LegacyMetadataMapper.HAL_PIXEL_FORMAT_RGBA_8888 && surfaceType <= LegacyMetadataMapper.HAL_PIXEL_FORMAT_BGRA_8888)) {
        surfaceType = ImageFormat.PRIVATE;
    }
    return LegacyExceptionUtils.throwOnError(surfaceType);
}