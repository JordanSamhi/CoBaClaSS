public void addAfterApplyCallback(final Runnable afterApplyCallback){
    if (mSequenceNumber == mPendingSequenceNumber) {
        afterApplyCallback.run();
    } else {
        if (mAfterApplyCallback == null) {
            mAfterApplyCallback = afterApplyCallback;
        } else {
            final Runnable oldCallback = mAfterApplyCallback;
            mAfterApplyCallback = new Runnable() {

                @Override
                public void run() {
                    afterApplyCallback.run();
                    oldCallback.run();
                }
            };
        }
    }
}