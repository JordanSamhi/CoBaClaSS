public static int capturePolicyToFlags(@CapturePolicy int capturePolicy, int flags){
    switch(capturePolicy) {
        case ALLOW_CAPTURE_BY_NONE:
            flags |= FLAG_NO_MEDIA_PROJECTION | FLAG_NO_SYSTEM_CAPTURE;
            break;
        case ALLOW_CAPTURE_BY_SYSTEM:
            flags |= FLAG_NO_MEDIA_PROJECTION;
            flags &= ~FLAG_NO_SYSTEM_CAPTURE;
            break;
        case ALLOW_CAPTURE_BY_ALL:
            flags &= ~FLAG_NO_SYSTEM_CAPTURE & ~FLAG_NO_MEDIA_PROJECTION;
            break;
        default:
            throw new IllegalArgumentException("Unknown allow playback capture policy");
    }
    return flags;
}