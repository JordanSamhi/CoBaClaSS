public static EnumSet<E> copyOf(Collection<E> c){
    if (c instanceof EnumSet) {
        return ((EnumSet<E>) c).clone();
    } else {
        if (c.isEmpty())
            throw new IllegalArgumentException("Collection is empty");
        Iterator<E> i = c.iterator();
        E first = i.next();
        EnumSet<E> result = EnumSet.of(first);
        while (i.hasNext()) result.add(i.next());
        return result;
    }
}