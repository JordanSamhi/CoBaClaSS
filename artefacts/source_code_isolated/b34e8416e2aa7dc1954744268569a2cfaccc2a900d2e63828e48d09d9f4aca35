public boolean init(SurfaceHolder surfaceHolder, boolean wideColorGamut){
    if (!hasEglDisplay() && !connectDisplay()) {
        Log.w(TAG, "Can not connect display, abort!");
        return false;
    }
    if (!eglInitialize(mEglDisplay, mEglVersion, 0, mEglVersion, 1)) {
        Log.w(TAG, "eglInitialize failed: " + GLUtils.getEGLErrorString(eglGetError()));
        return false;
    }
    mEglConfig = chooseEglConfig();
    if (mEglConfig == null) {
        Log.w(TAG, "eglConfig not initialized!");
        return false;
    }
    if (!createEglContext()) {
        Log.w(TAG, "Can't create EGLContext!");
        return false;
    }
    if (!createEglSurface(surfaceHolder, wideColorGamut)) {
        Log.w(TAG, "Can't create EGLSurface!");
        return false;
    }
    mEglReady = true;
    return true;
}