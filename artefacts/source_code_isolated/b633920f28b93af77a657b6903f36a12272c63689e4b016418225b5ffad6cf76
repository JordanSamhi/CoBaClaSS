public void updateLevel(PersistableBundle cc, ServiceState ss){
    int[] rssiThresholds;
    if (cc == null) {
        rssiThresholds = sRssiThresholds;
    } else {
        rssiThresholds = cc.getIntArray(CarrierConfigManager.KEY_GSM_RSSI_THRESHOLDS_INT_ARRAY);
        if (rssiThresholds == null || rssiThresholds.length != NUM_SIGNAL_STRENGTH_THRESHOLDS) {
            rssiThresholds = sRssiThresholds;
        }
    }
    int level = NUM_SIGNAL_STRENGTH_THRESHOLDS;
    if (mRssi < GSM_RSSI_MIN || mRssi > GSM_RSSI_MAX) {
        mLevel = SIGNAL_STRENGTH_NONE_OR_UNKNOWN;
        return;
    }
    while (level > 0 && mRssi < rssiThresholds[level - 1]) level--;
    mLevel = level;
}