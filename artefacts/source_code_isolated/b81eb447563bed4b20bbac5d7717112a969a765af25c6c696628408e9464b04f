public int getOpacity(){
    final InsetState state = mState;
    final int opacity = getDrawable().getOpacity();
    getInsets(mTmpInsetRect);
    if (opacity == PixelFormat.OPAQUE && (mTmpInsetRect.left > 0 || mTmpInsetRect.top > 0 || mTmpInsetRect.right > 0 || mTmpInsetRect.bottom > 0)) {
        return PixelFormat.TRANSLUCENT;
    }
    return opacity;
}