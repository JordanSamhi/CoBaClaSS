public float measureText(char[] text, int index, int count){
    if (text == null) {
        throw new IllegalArgumentException("text cannot be null");
    }
    if ((index | count) < 0 || index + count > text.length) {
        throw new ArrayIndexOutOfBoundsException();
    }
    if (text.length == 0 || count == 0) {
        return 0f;
    }
    if (!mHasCompatScaling) {
        return (float) Math.ceil(nGetTextAdvances(mNativePaint, text, index, count, index, count, mBidiFlags, null, 0));
    }
    final float oldSize = getTextSize();
    setTextSize(oldSize * mCompatScaling);
    final float w = nGetTextAdvances(mNativePaint, text, index, count, index, count, mBidiFlags, null, 0);
    setTextSize(oldSize);
    return (float) Math.ceil(w * mInvCompatScaling);
}