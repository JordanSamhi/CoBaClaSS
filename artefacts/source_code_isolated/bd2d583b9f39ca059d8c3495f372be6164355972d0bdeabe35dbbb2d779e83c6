public String getAnonymousIdentityWith3GppRealm(@NonNull WifiConfiguration config){
    int subId = getBestMatchSubscriptionId(config);
    TelephonyManager specifiedTm = mTelephonyManager.createForSubscriptionId(subId);
    if (specifiedTm.getSimState() != TelephonyManager.SIM_STATE_READY) {
        return null;
    }
    String mccMnc = specifiedTm.getSimOperator();
    if (mccMnc == null || mccMnc.isEmpty()) {
        return null;
    }
    String mcc = mccMnc.substring(0, 3);
    String mnc = mccMnc.substring(3);
    if (mnc.length() == 2) {
        mnc = "0" + mnc;
    }
    String realm = String.format(THREE_GPP_NAI_REALM_FORMAT, mnc, mcc);
    StringBuilder sb = new StringBuilder();
    if (mEapMethodPrefixEnable.get(subId)) {
        String eapMethod = EAP_METHOD_PREFIX.get(config.enterpriseConfig.getEapMethod());
        if (!TextUtils.isEmpty(eapMethod)) {
            sb.append(eapMethod);
        }
    }
    return sb.append(ANONYMOUS_IDENTITY).append("@").append(realm).toString();
}