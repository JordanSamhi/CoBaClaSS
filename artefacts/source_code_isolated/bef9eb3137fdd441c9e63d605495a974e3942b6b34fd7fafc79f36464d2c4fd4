public void setWfcSetting(boolean enabled){
    if (enabled && !isWfcProvisionedOnDevice()) {
        log("setWfcSetting: Not possible to enable WFC due to provisioning.");
        return;
    }
    int subId = getSubId();
    if (isSubIdValid(subId)) {
        SubscriptionManager.setSubscriptionProperty(subId, SubscriptionManager.WFC_IMS_ENABLED, booleanToPropertyString(enabled));
    } else {
        loge("setWfcSetting: invalid sub id, can not set WFC setting in siminfo db; subId=" + subId);
    }
    TelephonyManager tm = (TelephonyManager) mContext.getSystemService(Context.TELEPHONY_SERVICE);
    boolean isRoaming = tm.isNetworkRoaming(subId);
    setWfcNonPersistent(enabled, getWfcMode(isRoaming));
}