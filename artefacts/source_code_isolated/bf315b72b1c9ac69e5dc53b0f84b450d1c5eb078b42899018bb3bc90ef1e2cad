public static int getSurfaceFormat(Surface surface){
    try {
        return LegacyCameraDevice.detectSurfaceType(surface);
    } catch (BufferQueueAbandonedException e) {
        throw new IllegalArgumentException("Surface was abandoned", e);
    }
}