public String setupInterface(@NonNull HalDeviceManager.InterfaceDestroyedListener destroyedListener, Handler handler){
    Log.d(TAG, "Setup P2P interface");
    if (mIWifiP2pIface == null) {
        mInterfaceDestroyedListener = new InterfaceDestroyedListenerInternal(destroyedListener);
        String ifaceName = createP2pIface(handler);
        if (ifaceName == null) {
            Log.e(TAG, "Failed to create P2p iface");
            return null;
        }
        if (!waitForSupplicantConnection()) {
            Log.e(TAG, "Failed to connect to supplicant");
            teardownInterface();
            return null;
        }
        if (!mSupplicantP2pIfaceHal.setupIface(ifaceName)) {
            Log.e(TAG, "Failed to setup P2p iface in supplicant");
            teardownInterface();
            return null;
        }
        Log.i(TAG, "P2P interface setup completed");
        return ifaceName;
    } else {
        Log.i(TAG, "P2P interface is already existed");
        return mHalDeviceManager.isSupported() ? HalDeviceManager.getName(mIWifiP2pIface) : mPropertyService.getString(P2P_INTERFACE_PROPERTY, P2P_IFACE_NAME);
    }
}