public boolean isDisplayedLw(){
    final ActivityRecord atoken = mActivityRecord;
    return isDrawnLw() && isVisibleByPolicy() && ((!isParentWindowHidden() && (atoken == null || atoken.mVisibleRequested)) || isAnimating(TRANSITION | PARENTS));
}