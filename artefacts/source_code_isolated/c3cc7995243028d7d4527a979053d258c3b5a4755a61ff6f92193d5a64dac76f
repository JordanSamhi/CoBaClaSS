public static void createSystemAssetsInZygoteLocked(boolean reinitialize, String frameworkPath){
    if (sSystem != null && !reinitialize) {
        return;
    }
    try {
        final ArrayList<ApkAssets> apkAssets = new ArrayList<>();
        apkAssets.add(ApkAssets.loadFromPath(frameworkPath, ApkAssets.PROPERTY_SYSTEM));
        final String[] systemIdmapPaths = OverlayConfig.getZygoteInstance().createImmutableFrameworkIdmapsInZygote();
        for (String idmapPath : systemIdmapPaths) {
            apkAssets.add(ApkAssets.loadOverlayFromPath(idmapPath, ApkAssets.PROPERTY_SYSTEM));
        }
        sSystemApkAssetsSet = new ArraySet<>(apkAssets);
        sSystemApkAssets = apkAssets.toArray(new ApkAssets[apkAssets.size()]);
        if (sSystem == null) {
            sSystem = new AssetManager(true);
        }
        sSystem.setApkAssets(sSystemApkAssets, false);
    } catch (IOException e) {
        throw new IllegalStateException("Failed to create system AssetManager", e);
    }
}