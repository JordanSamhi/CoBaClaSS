public void refreshChannelStatsAndChannelUtilization(WifiLinkLayerStats wifiLinkLayerStats, int frequency){
    if (mContext.getResources().getBoolean(R.bool.config_wifiChannelUtilizationOverrideEnabled)) {
        return;
    }
    if (wifiLinkLayerStats == null) {
        return;
    }
    SparseArray<ChannelStats> channelStatsMap = wifiLinkLayerStats.channelStatsMap;
    if (channelStatsMap == null) {
        return;
    }
    if (frequency != UNKNOWN_FREQ) {
        ChannelStats channelStats = channelStatsMap.get(frequency, null);
        if (channelStats != null)
            calculateChannelUtilization(channelStats);
    } else {
        for (int i = 0; i < channelStatsMap.size(); i++) {
            ChannelStats channelStats = channelStatsMap.valueAt(i);
            calculateChannelUtilization(channelStats);
        }
    }
    updateChannelStatsCache(channelStatsMap, frequency);
}