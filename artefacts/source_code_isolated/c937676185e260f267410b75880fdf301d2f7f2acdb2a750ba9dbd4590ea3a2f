public static EncryptedData parseFromXml(XmlPullParser in, int outerTagDepth) throws XmlPullParserException, IOException{
    byte[] encryptedData = null;
    byte[] iv = null;
    while (!XmlUtil.isNextSectionEnd(in, outerTagDepth)) {
        String[] valueName = new String[1];
        Object value = XmlUtil.readCurrentValue(in, valueName);
        if (valueName[0] == null) {
            throw new XmlPullParserException("Missing value name");
        }
        switch(valueName[0]) {
            case XML_TAG_ENCRYPTED_DATA:
                encryptedData = (byte[]) value;
                break;
            case XML_TAG_IV:
                iv = (byte[]) value;
                break;
            default:
                Log.e(TAG, "Unknown value name found: " + valueName[0]);
                break;
        }
    }
    return new EncryptedData(encryptedData, iv);
}