public int setPreferredDeviceForStrategy(int strategy, AudioDeviceAttributes device){
    if (device == null) {
        return AudioSystem.ERROR;
    }
    enforceModifyAudioRoutingPermission();
    final String logString = String.format("setPreferredDeviceForStrategy u/pid:%d/%d strat:%d dev:%s", Binder.getCallingUid(), Binder.getCallingPid(), strategy, device.toString());
    sDeviceLogger.log(new AudioEventLogger.StringEvent(logString).printLog(TAG));
    if (device.getRole() == AudioDeviceAttributes.ROLE_INPUT) {
        Log.e(TAG, "Unsupported input routing in " + logString);
        return AudioSystem.ERROR;
    }
    final int status = mDeviceBroker.setPreferredDeviceForStrategySync(strategy, device);
    if (status != AudioSystem.SUCCESS) {
        Log.e(TAG, String.format("Error %d in %s)", status, logString));
    }
    return status;
}