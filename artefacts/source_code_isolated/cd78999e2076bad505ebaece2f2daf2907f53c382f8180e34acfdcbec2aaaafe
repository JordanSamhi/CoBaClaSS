public void setCallback(@Nullable Callback callback, @Nullable Handler handler){
    synchronized (mLock) {
        if (mCallback != null) {
            mCallback.mCallback.mSession = null;
            mCallback.removeCallbacksAndMessages(null);
        }
        if (callback == null) {
            mCallback = null;
            return;
        }
        if (handler == null) {
            handler = new Handler();
        }
        callback.mSession = this;
        CallbackMessageHandler msgHandler = new CallbackMessageHandler(handler.getLooper(), callback);
        mCallback = msgHandler;
    }
}