public long diff(WindowConfiguration other, boolean compareUndefined){
    long changes = 0;
    if (!mBounds.equals(other.mBounds)) {
        changes |= WINDOW_CONFIG_BOUNDS;
    }
    if ((compareUndefined || other.mAppBounds != null) && mAppBounds != other.mAppBounds && (mAppBounds == null || !mAppBounds.equals(other.mAppBounds))) {
        changes |= WINDOW_CONFIG_APP_BOUNDS;
    }
    if ((compareUndefined || other.mWindowingMode != WINDOWING_MODE_UNDEFINED) && mWindowingMode != other.mWindowingMode) {
        changes |= WINDOW_CONFIG_WINDOWING_MODE;
    }
    if ((compareUndefined || other.mActivityType != ACTIVITY_TYPE_UNDEFINED) && mActivityType != other.mActivityType) {
        changes |= WINDOW_CONFIG_ACTIVITY_TYPE;
    }
    if ((compareUndefined || other.mAlwaysOnTop != ALWAYS_ON_TOP_UNDEFINED) && mAlwaysOnTop != other.mAlwaysOnTop) {
        changes |= WINDOW_CONFIG_ALWAYS_ON_TOP;
    }
    if ((compareUndefined || other.mRotation != ROTATION_UNDEFINED) && mRotation != other.mRotation) {
        changes |= WINDOW_CONFIG_ROTATION;
    }
    if ((compareUndefined || other.mDisplayWindowingMode != WINDOWING_MODE_UNDEFINED) && mDisplayWindowingMode != other.mDisplayWindowingMode) {
        changes |= WINDOW_CONFIG_DISPLAY_WINDOWING_MODE;
    }
    return changes;
}