public void setTimeInMillis(long millis){
    if (time == millis && isTimeSet && areFieldsSet && areAllFieldsSet) {
        return;
    }
    time = millis;
    isTimeSet = true;
    areFieldsSet = false;
    computeFields();
    areAllFieldsSet = areFieldsSet = true;
}