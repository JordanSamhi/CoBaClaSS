public Image getInputImage(int index){
    synchronized (mBufferLock) {
        if (mBufferMode == BUFFER_MODE_BLOCK) {
            throw new IncompatibleWithBlockModelException("getInputImage() " + "is not compatible with CONFIGURE_FLAG_USE_BLOCK_MODEL. " + "Please obtain MediaCodec.LinearBlock or HardwareBuffer " + "objects and attach to QueueRequest objects.");
        }
    }
    Image newImage = getImage(true, index);
    synchronized (mBufferLock) {
        invalidateByteBuffer(mCachedInputBuffers, index);
        mDequeuedInputBuffers.put(index, newImage);
    }
    return newImage;
}