public WifiConfiguration getConfiguredNetworkForScanDetail(ScanDetail scanDetail){
    ScanResult scanResult = scanDetail.getScanResult();
    if (scanResult == null) {
        Log.e(TAG, "No scan result found in scan detail");
        return null;
    }
    WifiConfiguration config = null;
    try {
        config = mConfiguredNetworks.getByScanResultForCurrentUser(scanResult);
    } catch (IllegalArgumentException e) {
        Log.e(TAG, "Failed to lookup network from config map", e);
    }
    if (config != null) {
        if (mVerboseLoggingEnabled) {
            Log.v(TAG, "getSavedNetworkFromScanDetail Found " + config.getKey() + " for " + scanResult.SSID + "[" + scanResult.capabilities + "]");
        }
    }
    return config;
}