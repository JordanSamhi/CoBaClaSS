public void setExpanded(boolean shouldExpand){
    if (DEBUG_BUBBLE_STACK_VIEW) {
        Log.d(TAG, "setExpanded: " + shouldExpand);
    }
    if (!shouldExpand) {
        releaseAnimatingOutBubbleBuffer();
    }
    if (shouldExpand == mIsExpanded) {
        return;
    }
    hideCurrentInputMethod();
    mSysUiState.setFlag(QuickStepContract.SYSUI_STATE_BUBBLES_EXPANDED, shouldExpand).commitUpdate(mContext.getDisplayId());
    if (mIsExpanded) {
        animateCollapse();
        logBubbleEvent(mExpandedBubble, SysUiStatsLog.BUBBLE_UICHANGED__ACTION__COLLAPSED);
    } else {
        animateExpansion();
        logBubbleEvent(mExpandedBubble, SysUiStatsLog.BUBBLE_UICHANGED__ACTION__EXPANDED);
        logBubbleEvent(mExpandedBubble, SysUiStatsLog.BUBBLE_UICHANGED__ACTION__STACK_EXPANDED);
    }
    notifyExpansionChanged(mExpandedBubble, mIsExpanded);
}