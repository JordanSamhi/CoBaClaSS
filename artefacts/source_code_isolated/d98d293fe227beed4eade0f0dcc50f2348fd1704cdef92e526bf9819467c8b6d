public void addOnUidImportanceListener(OnUidImportanceListener listener, @RunningAppProcessInfo.Importance int importanceCutpoint){
    synchronized (this) {
        if (mImportanceListeners.containsKey(listener)) {
            throw new IllegalArgumentException("Listener already registered: " + listener);
        }
        UidObserver observer = new UidObserver(listener, mContext);
        try {
            getService().registerUidObserver(observer, UID_OBSERVER_PROCSTATE | UID_OBSERVER_GONE, RunningAppProcessInfo.importanceToProcState(importanceCutpoint), mContext.getOpPackageName());
        } catch (RemoteException e) {
            throw e.rethrowFromSystemServer();
        }
        mImportanceListeners.put(listener, observer);
    }
}