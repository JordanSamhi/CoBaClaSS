public boolean requestPinItemLocked(ShortcutInfo inShortcut, AppWidgetProviderInfo inAppWidget, Bundle extras, int userId, IntentSender resultIntent){
    final int requestType = inShortcut != null ? PinItemRequest.REQUEST_TYPE_SHORTCUT : PinItemRequest.REQUEST_TYPE_APPWIDGET;
    final Pair<ComponentName, Integer> confirmActivity = getRequestPinConfirmationActivity(userId, requestType);
    if (confirmActivity == null) {
        Log.w(TAG, "Launcher doesn't support requestPinnedShortcut(). Shortcut not created.");
        return false;
    }
    final int launcherUserId = confirmActivity.second;
    mService.throwIfUserLockedL(launcherUserId);
    final PinItemRequest request;
    if (inShortcut != null) {
        request = requestPinShortcutLocked(inShortcut, resultIntent, confirmActivity);
    } else {
        int launcherUid = mService.injectGetPackageUid(confirmActivity.first.getPackageName(), launcherUserId);
        request = new PinItemRequest(new PinAppWidgetRequestInner(this, resultIntent, launcherUid, inAppWidget, extras), PinItemRequest.REQUEST_TYPE_APPWIDGET);
    }
    return startRequestConfirmActivity(confirmActivity.first, launcherUserId, request, requestType);
}