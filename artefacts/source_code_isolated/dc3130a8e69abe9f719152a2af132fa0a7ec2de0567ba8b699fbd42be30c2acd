public void reportSignalQuality(float[] ascendingCN0Array, int numSv){
    double avgCn0 = 0.0;
    if (numSv > 0) {
        for (int i = Math.max(0, numSv - 4); i < numSv; i++) {
            avgCn0 += (double) ascendingCN0Array[i];
        }
        avgCn0 /= Math.min(numSv, 4);
    }
    if (Math.abs(avgCn0 - mLastAverageCn0) < REPORTING_THRESHOLD_DB_HZ) {
        return;
    }
    int signalLevel = getSignalLevel(avgCn0);
    if (signalLevel != mLastSignalLevel) {
        FrameworkStatsLog.write(FrameworkStatsLog.GPS_SIGNAL_QUALITY_CHANGED, signalLevel);
        mLastSignalLevel = signalLevel;
    }
    try {
        mBatteryStats.noteGpsSignalQuality(signalLevel);
        mLastAverageCn0 = avgCn0;
    } catch (Exception e) {
        Log.w(TAG, "Exception", e);
    }
}