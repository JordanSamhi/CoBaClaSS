public synchronized void setData(byte[] buf){
    if (buf == null) {
        throw new NullPointerException("null packet buffer");
    }
    this.buf = buf;
    this.offset = 0;
    this.length = buf.length;
    this.bufLength = buf.length;
}