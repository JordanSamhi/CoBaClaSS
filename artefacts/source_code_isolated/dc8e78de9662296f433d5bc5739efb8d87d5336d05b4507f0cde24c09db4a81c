public void onReceive(Context context, Intent intent){
    verifyPermissionIntegrity(context);
    if (!verifyIntentContents(context, intent)) {
        setResultCode(RESULT_MALFORMED_INTENT);
        return;
    }
    if (!Objects.equals(intent.getStringExtra(VendorUtils.EXTRA_TEMP_FILE_ROOT), MbmsTempFileProvider.getEmbmsTempFileDir(context).getPath())) {
        setResultCode(RESULT_BAD_TEMP_FILE_ROOT);
        return;
    }
    if (VendorUtils.ACTION_DOWNLOAD_RESULT_INTERNAL.equals(intent.getAction())) {
        moveDownloadedFile(context, intent);
        cleanupPostMove(context, intent);
    } else if (VendorUtils.ACTION_FILE_DESCRIPTOR_REQUEST.equals(intent.getAction())) {
        generateTempFiles(context, intent);
    } else if (VendorUtils.ACTION_CLEANUP.equals(intent.getAction())) {
        cleanupTempFiles(context, intent);
    } else {
        setResultCode(RESULT_INVALID_ACTION);
    }
}