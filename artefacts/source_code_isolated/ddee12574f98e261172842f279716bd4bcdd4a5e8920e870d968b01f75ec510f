public boolean isPermittedForProfile(int userId){
    if (!mUserProfiles.isManagedProfile(userId)) {
        return true;
    }
    DevicePolicyManager dpm = (DevicePolicyManager) mContext.getSystemService(DEVICE_POLICY_SERVICE);
    final long identity = Binder.clearCallingIdentity();
    try {
        return dpm.isNotificationListenerServicePermitted(component.getPackageName(), userId);
    } finally {
        Binder.restoreCallingIdentity(identity);
    }
}