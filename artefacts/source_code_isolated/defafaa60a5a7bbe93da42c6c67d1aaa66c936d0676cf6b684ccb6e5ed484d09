public static void writePrintJobInfo(@NonNull Context context, @NonNull DualDumpOutputStream proto, String idName, long id, @NonNull PrintJobInfo printJobInfo){
    long token = proto.start(idName, id);
    proto.write("label", PrintJobInfoProto.LABEL, printJobInfo.getLabel());
    PrintJobId printJobId = printJobInfo.getId();
    if (printJobId != null) {
        proto.write("print_job_id", PrintJobInfoProto.PRINT_JOB_ID, printJobId.flattenToString());
    }
    int state = printJobInfo.getState();
    if (state >= PrintJobInfoProto.STATE_CREATED && state <= PrintJobInfoProto.STATE_CANCELED) {
        proto.write("state", PrintJobInfoProto.STATE, state);
    } else {
        proto.write("state", PrintJobInfoProto.STATE, PrintJobInfoProto.STATE_UNKNOWN);
    }
    PrinterId printer = printJobInfo.getPrinterId();
    if (printer != null) {
        writePrinterId(proto, "printer", PrintJobInfoProto.PRINTER, printer);
    }
    String tag = printJobInfo.getTag();
    if (tag != null) {
        proto.write("tag", PrintJobInfoProto.TAG, tag);
    }
    proto.write("creation_time", PrintJobInfoProto.CREATION_TIME, printJobInfo.getCreationTime());
    PrintAttributes attributes = printJobInfo.getAttributes();
    if (attributes != null) {
        writePrintAttributes(context, proto, "attributes", PrintJobInfoProto.ATTRIBUTES, attributes);
    }
    PrintDocumentInfo docInfo = printJobInfo.getDocumentInfo();
    if (docInfo != null) {
        writePrintDocumentInfo(proto, "document_info", PrintJobInfoProto.DOCUMENT_INFO, docInfo);
    }
    proto.write("is_canceling", PrintJobInfoProto.IS_CANCELING, printJobInfo.isCancelling());
    PageRange[] pages = printJobInfo.getPages();
    if (pages != null) {
        for (int i = 0; i < pages.length; i++) {
            writePageRange(proto, "pages", PrintJobInfoProto.PAGES, pages[i]);
        }
    }
    proto.write("has_advanced_options", PrintJobInfoProto.HAS_ADVANCED_OPTIONS, printJobInfo.getAdvancedOptions() != null);
    proto.write("progress", PrintJobInfoProto.PROGRESS, printJobInfo.getProgress());
    CharSequence status = printJobInfo.getStatus(context.getPackageManager());
    if (status != null) {
        proto.write("status", PrintJobInfoProto.STATUS, status.toString());
    }
    proto.end(token);
}