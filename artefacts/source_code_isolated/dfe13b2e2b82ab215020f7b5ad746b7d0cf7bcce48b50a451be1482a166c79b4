public final int generateSecret(byte[] sharedSecret, int offset) throws IllegalStateException, ShortBufferException{
    chooseFirstProvider();
    return spi.engineGenerateSecret(sharedSecret, offset);
}