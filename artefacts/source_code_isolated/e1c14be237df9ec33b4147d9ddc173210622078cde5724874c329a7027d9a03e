public boolean updateVolumeForDevices(int devices, int volume){
    int routeType;
    if ((devices & (AudioSystem.DEVICE_OUT_HEARING_AID)) != 0) {
        routeType = MediaRoute2Info.TYPE_HEARING_AID;
    } else if ((devices & (AudioManager.DEVICE_OUT_BLUETOOTH_A2DP | AudioManager.DEVICE_OUT_BLUETOOTH_A2DP_HEADPHONES | AudioManager.DEVICE_OUT_BLUETOOTH_A2DP_SPEAKER)) != 0) {
        routeType = MediaRoute2Info.TYPE_BLUETOOTH_A2DP;
    } else {
        return false;
    }
    mVolumeMap.put(routeType, volume);
    boolean shouldNotify = false;
    for (BluetoothRouteInfo btRoute : mActiveRoutes) {
        if (btRoute.route.getType() != routeType) {
            continue;
        }
        btRoute.route = new MediaRoute2Info.Builder(btRoute.route).setVolume(volume).build();
        shouldNotify = true;
    }
    if (shouldNotify) {
        notifyBluetoothRoutesUpdated();
    }
    return true;
}