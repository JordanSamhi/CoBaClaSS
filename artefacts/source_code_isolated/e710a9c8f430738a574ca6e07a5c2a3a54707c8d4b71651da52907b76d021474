public CaptureRequest createRequest(CameraDevice camera, int template, Surface... targets) throws CameraAccessException{
    if (camera == null) {
        throw new NullPointerException("Tried to create request using null CameraDevice");
    }
    Builder reqBuilder = camera.createCaptureRequest(template);
    for (Key<?> key : mDictionary.keySet()) {
        setRequestFieldIfNonNull(reqBuilder, key);
    }
    for (Surface target : targets) {
        if (target == null) {
            throw new NullPointerException("Tried to add null Surface as request target");
        }
        reqBuilder.addTarget(target);
    }
    return reqBuilder.build();
}