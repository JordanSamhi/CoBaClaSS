public void flush(){
    synchronized (this) {
        try {
            ensureOpen();
            out.flush();
        } catch (IOException x) {
            trouble = true;
        }
    }
}