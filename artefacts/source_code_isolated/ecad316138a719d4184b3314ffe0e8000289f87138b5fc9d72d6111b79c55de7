public static float[] getFloatArray(TypedArray array){
    final int N = array.length();
    float[] vals = new float[N];
    for (int i = 0; i < N; i++) {
        vals[i] = array.getFloat(i, PowerManager.BRIGHTNESS_OFF_FLOAT);
    }
    array.recycle();
    return vals;
}