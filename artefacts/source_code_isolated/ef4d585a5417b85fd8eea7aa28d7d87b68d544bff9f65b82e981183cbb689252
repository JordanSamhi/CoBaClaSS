public void commit(@NonNull @CallbackExecutor Executor executor, @NonNull Consumer<Integer> resultCallback) throws IOException{
    try {
        mSession.commit(new IBlobCommitCallback.Stub() {

            public void onResult(int result) {
                executor.execute(PooledLambda.obtainRunnable(Consumer::accept, resultCallback, result));
            }
        });
    } catch (ParcelableException e) {
        e.maybeRethrow(IOException.class);
        throw new RuntimeException(e);
    } catch (RemoteException e) {
        throw e.rethrowFromSystemServer();
    }
}