public synchronized NetworkCapabilities getAndSetNetworkCapabilities(@NonNull final NetworkCapabilities nc){
    final NetworkCapabilities oldNc = networkCapabilities;
    networkCapabilities = nc;
    final NetworkMonitorManager nm = mNetworkMonitor;
    if (nm != null) {
        nm.notifyNetworkCapabilitiesChanged(nc);
    }
    return oldNc;
}