public void writeImsCallState(int phoneId, ImsCallSession session, ImsPhoneCall.State callState){
    int state;
    switch(callState) {
        case IDLE:
            state = TelephonyCallSession.Event.CallState.CALL_IDLE;
            break;
        case ACTIVE:
            state = TelephonyCallSession.Event.CallState.CALL_ACTIVE;
            break;
        case HOLDING:
            state = TelephonyCallSession.Event.CallState.CALL_HOLDING;
            break;
        case DIALING:
            state = TelephonyCallSession.Event.CallState.CALL_DIALING;
            break;
        case ALERTING:
            state = TelephonyCallSession.Event.CallState.CALL_ALERTING;
            break;
        case INCOMING:
            state = TelephonyCallSession.Event.CallState.CALL_INCOMING;
            break;
        case WAITING:
            state = TelephonyCallSession.Event.CallState.CALL_WAITING;
            break;
        case DISCONNECTED:
            state = TelephonyCallSession.Event.CallState.CALL_DISCONNECTED;
            break;
        case DISCONNECTING:
            state = TelephonyCallSession.Event.CallState.CALL_DISCONNECTING;
            break;
        default:
            state = TelephonyCallSession.Event.CallState.CALL_UNKNOWN;
            break;
    }
    InProgressCallSession callSession = mInProgressCallSessions.get(phoneId);
    if (callSession == null) {
        Rlog.e(TAG, "Call session is missing");
    } else {
        callSession.addEvent(new CallSessionEventBuilder(TelephonyCallSession.Event.Type.IMS_CALL_STATE_CHANGED).setCallIndex(getCallId(session)).setCallState(state));
    }
}