public synchronized void close(){
    for (MtpObject obj : mObjects.values()) {
        if (obj.getObserver() != null) {
            obj.getObserver().stopWatching();
            obj.setObserver(null);
        }
    }
    for (MtpObject obj : mRoots.values()) {
        if (obj.getObserver() != null) {
            obj.getObserver().stopWatching();
            obj.setObserver(null);
        }
    }
    if (mCheckConsistency) {
        mCheckConsistency = false;
        mConsistencyThread.interrupt();
        try {
            mConsistencyThread.join();
        } catch (InterruptedException e) {
        }
    }
}