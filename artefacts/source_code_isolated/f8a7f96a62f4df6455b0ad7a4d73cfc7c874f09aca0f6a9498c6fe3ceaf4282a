public synchronized int getStrongestLockMode(){
    if (!mWifiConnected) {
        return WifiManager.WIFI_MODE_NO_LOCKS_HELD;
    }
    if (mForceHiPerfMode) {
        return WifiManager.WIFI_MODE_FULL_HIGH_PERF;
    }
    if (mForceLowLatencyMode) {
        return WifiManager.WIFI_MODE_FULL_LOW_LATENCY;
    }
    if (mScreenOn && countFgLowLatencyUids() > 0) {
        return WifiManager.WIFI_MODE_FULL_LOW_LATENCY;
    }
    if (mFullHighPerfLocksAcquired > mFullHighPerfLocksReleased) {
        return WifiManager.WIFI_MODE_FULL_HIGH_PERF;
    }
    return WifiManager.WIFI_MODE_NO_LOCKS_HELD;
}