public final boolean equals(Object obj){
    if (obj == null || !(obj instanceof Proxy))
        return false;
    Proxy p = (Proxy) obj;
    if (p.type() == type()) {
        if (address() == null) {
            return (p.address() == null);
        } else
            return address().equals(p.address());
    }
    return false;
}