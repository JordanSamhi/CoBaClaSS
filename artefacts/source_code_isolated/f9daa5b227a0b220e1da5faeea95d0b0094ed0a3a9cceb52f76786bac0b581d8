public Set<String> getNonRequiredApps(@NonNull ComponentName admin, int userId, @NonNull String provisioningAction){
    final Set<String> nonRequiredApps = getLaunchableApps(userId);
    nonRequiredApps.removeAll(getRequiredApps(provisioningAction, admin.getPackageName()));
    nonRequiredApps.removeAll(getSystemInputMethods(userId));
    nonRequiredApps.addAll(getDisallowedApps(provisioningAction));
    return nonRequiredApps;
}