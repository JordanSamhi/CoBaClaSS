public void onWallpaperColorsChanged(WallpaperColors primaryColors, int displayId){
    int which;
    synchronized (mLock) {
        if (mImageWallpaper.equals(mWallpaper.wallpaperComponent)) {
            return;
        }
        mWallpaper.primaryColors = primaryColors;
        which = FLAG_SYSTEM;
        if (displayId == DEFAULT_DISPLAY) {
            final WallpaperData lockedWallpaper = mLockWallpaperMap.get(mWallpaper.userId);
            if (lockedWallpaper == null) {
                which |= FLAG_LOCK;
            }
        }
    }
    if (which != 0) {
        notifyWallpaperColorsChangedOnDisplay(mWallpaper, which, displayId);
    }
}