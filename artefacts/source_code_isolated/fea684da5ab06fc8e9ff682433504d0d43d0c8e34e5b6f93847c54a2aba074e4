public void setWfcNonPersistent(boolean enabled, int wfcMode){
    int imsWfcModeFeatureValue = enabled ? wfcMode : ImsMmTelManager.WIFI_MODE_CELLULAR_PREFERRED;
    try {
        changeMmTelCapability(MmTelFeature.MmTelCapabilities.CAPABILITY_TYPE_VOICE, ImsRegistrationImplBase.REGISTRATION_TECH_IWLAN, enabled);
        setWfcModeInternal(imsWfcModeFeatureValue);
        setWfcRoamingSettingInternal(enabled && isWfcRoamingEnabledByUser());
        if (enabled) {
            log("setWfcSetting() : turnOnIms");
            turnOnIms();
        } else if (isTurnOffImsAllowedByPlatform() && (!isVolteEnabledByPlatform() || !isEnhanced4gLteModeSettingEnabledByUser())) {
            log("setWfcSetting() : imsServiceAllowTurnOff -> turnOffIms");
            turnOffIms();
        }
    } catch (ImsException e) {
        loge("setWfcSetting(): ", e);
    }
}